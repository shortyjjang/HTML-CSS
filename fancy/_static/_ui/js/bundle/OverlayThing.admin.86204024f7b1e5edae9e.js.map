{"version":3,"sources":["webpack://fancy/./_static/_ui/js/ajaxfileupload.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/Admin.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/AdminSimple.js"],"names":["getCookie","name","RegExp","test","document","cookie","unescape","$2","$","xhr","plugin","window","XMLHttpRequest","upload","FileReader","FormData","ajaxFileUpload","s","$file","file","reader","extend","ajaxSettings","fileElementId","files","onload","event","data","append","attr","settings","url","type","async","cache","processData","contentType","success","noop","error","complete","onprogress","percent","pos","loaded","position","total","lengthComputable","Math","ceil","progress","dataType","ajax","onerror","readAsArrayBuffer","createUploadIframe","id","uri","$io","frameId","ActiveXObject","src","css","top","left","appendTo","createUploadForm","formId","fileId","csrfId","$form","$oldFile","$newFile","clone","before","$inputHidden","length","val","Date","getTime","secureuri","global","active","trigger","requestDone","xml","uploadCallback","isTimeout","io","getElementById","contentWindow","responseText","body","innerHTML","responseXML","XMLDocument","contentDocument","e","handleError","status","uploadHttpData","jQuery","off","setTimeout","remove","timeout","action","method","target","enctype","submit","attachEvent","addEventListener","abort","r","globalEval","parseJSON","text","html","evalScripts","call","context","formatISODate","date","toISOString","replace","split","handleInput","stateKey","component","el","key","setState","className","htmlFor","Admin","props","showOnHomepage","showOnHomepageChecked","showInSearch","datePublished","datePublishedIntermediate","salesShowInNewest","salesExcludeFromPopular","salesEditorPicked","salesEditorPickedIntermediate","salesEditorPickedChecked","salesVideoFeatured","thingVideoUrl","collapse","thing","date_published","sales","editor_picked","show_on_homepage","show_in_newest","show_in_search","exclude_from_popular","metadata","video_url","video","featured","thing_id","user_id","user","new_thing_id","ntid","reassign_thing_id","reassignInput","trim","Number","isInteger","alert","loading","confirm","post","xmlUtil","location","href","find","msg","fail","always","old_user_id","new_owner_name","changeOwnerInput","username","done","eitherFancy","reloadCurrentThing","checked","update","undefined","nextState","state","inputDate","isNaN","getTimezoneOffset","payload","sale_item_id","json","changeOwnerInputRef","element","reassignInputRef","prevProps","this","appContext","lastFullyRenderedThingID","fromServer","setThingAdminState","adminForm","draggable","handle","viewer","canSeeOrder","is_fancybox","is_vanity_number_thing","canSeeCart","is_admin_senior","is_admin_manager","onClick","handleCollapseClick","fancyd_count","ref","placeholder","handleOwnerChange","onChange","handlePublishedDateChange","value","style","Display","handleExcludePopular","handleShowInSearch","is_ready","handleFeaturedVideo","handleEditorPickChange","handleShowNewest","handleReassign","handleThingVideoUrl","Component","sharedState","draggingAdmin","ready","on","clickedOn","didClickOn","getFancyDepsRoot"],"mappings":"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","file":"OverlayThing.admin.86204024f7b1e5edae9e.js","sourcesContent":["// Support HTML5 file upload by taegon kim\n\n;(function($){\n\nvar xhr, plugin;\n\nif (window.XMLHttpRequest) xhr = new window.XMLHttpRequest();\nif (xhr && ('upload' in xhr) && ('onprogress' in xhr.upload) && window.FileReader && window.FormData) {\n\t// yeap! this browser supports HTML5 ajax file upload!\n\tplugin = {\n\t\tajaxFileUpload : function(s) {\n\t\t\tvar xhr = new window.XMLHttpRequest(), reader = new FileReader(), $file, file, xml={};\n\n\t\t\t// import global settings\n\t\t\ts = $.extend({}, $.ajaxSettings, s);\n\n\t\t\t// get a file object\n\t\t\t$file = $('#' + s.fileElementId);\n\t\t\tfile  = $file[0].files[0];\n\n\t\t\treader.onload = function(event){\n\t\t\t\tvar data = new FormData();\n\n\t\t\t\tdata.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n\t\t\t\tdata.append($file.attr('name'), file);\n\n\t\t\t\tvar settings = {\n\t\t\t\t\turl   : s.url,\n\t\t\t\t\ttype  : 'POST',\n\t\t\t\t\tdata  : data,\n\t\t\t\t\tasync : true,\n\t\t\t\t\tcache : false,\n\t\t\t\t\tprocessData : false,\n\t\t\t\t\tcontentType : false,\n\t\t\t\t\tsuccess  : s.success || $.noop,\n\t\t\t\t\terror    : s.error || $.noop,\n\t\t\t\t\tcomplete : s.complete || $.noop,\n\t\t\t\t\txhr : function(){\n\t\t\t\t\t\tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\t\t\txhr.upload.onprogress = function(event){\n\t\t\t\t\t\t\tvar percent = 0, pos = event.loaded || event.position, total = event.total;\n\t\t\t\t\t\t\tif (event.lengthComputable) {\n\t\t\t\t\t\t\t\tpercent = Math.ceil(pos / total * 100);\n\t\t\t\t\t\t\t\t(s.progress || $.noop)(percent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn xhr;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (s.dataType) settings.dataType = s.dataType;\n\n\t\t\t\t$.ajax(settings);\n\t\t\t};\n\t\t\treader.onerror = function(){\n\t\t\t\tif (s.error) s.error();\n\t\t\t\tif (s.complete) s.complete();\n\t\t\t};\n\t\t\treader.readAsArrayBuffer(file);\n\t\t}\n\t};\n} else {\n\t// for old browser\n\tplugin = {\n\t\tcreateUploadIframe: function(id, uri) {\n\t\t\t//create frame\n\t\t\tvar frameId = 'jUploadFrame' + id, $io;\n\n\t\t\t$io = $('<iframe id=\"' + frameId + '\" name=\"' + frameId + '\" />');\n\n\t\t\tif(window.ActiveXObject) {\n\t\t\t\tif(typeof uri== 'boolean'){\n\t\t\t\t\t$io[0].src = 'javascript:false';\n\t\t\t\t} else if(typeof uri == 'string'){\n\t\t\t\t\t$io[0].src = uri;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$io.css({position:'absolute',top:-1000,left:-1000}).appendTo('body');\n\n\t\t\treturn $io;\n\t\t},\n\t\tcreateUploadForm: function(id, fileElementId) {\n\t\t\t//create form\n\t\t\tvar formId = 'jUploadForm' + id, fileId = 'jUploadFile' + id, csrfId = 'jUploadCSRF' + id;\n\t\t\tvar $form = $('<form  action=\"\" method=\"POST\" name=\"' + formId + '\" id=\"' + formId + '\" enctype=\"multipart/form-data\"></form>');\n\t\t\tvar $oldFile = $('#' + fileElementId), $newFile = $oldFile.clone(true);\n\n\t\t\t$oldFile.attr('id', fileId).before($newFile).appendTo($form);\n\n\t\t\t// CSRF \n\t\t\tvar $inputHidden = $('#'+csrfId);\n\t\t\tif (!$inputHidden.length) {\n\t\t\t\t$inputHidden = $('<input type=\"hidden\" id=\"'+csrfId+'\" name=\"csrfmiddlewaretoken\">').appendTo($form);\n\t\t\t}\n\t\t\t$inputHidden.val( getCookie('csrftoken') );\n\n\t\t\t// remove the previous form and add new form\n\t\t\t$form.css({position:'absolute',top:-1000,left:-1000}).appendTo('body');\n\n\t\t\treturn $form;\n\t\t},\n\n\t\tajaxFileUpload: function(s) {\n\t\t\t// TODO introduce global settings, allowing the client to modify them for all requests, not only timeout\n\t\t\ts = $.extend({}, $.ajaxSettings, s);\n\n\t\t\tvar id = new Date().getTime();\n\t\t\tvar frameId = 'jUploadFrame' + id, formId = 'jUploadForm' + id;\n\t\t\tvar $form = $.createUploadForm(id, s.fileElementId);\n\t\t\tvar $io = $.createUploadIframe(id, s.secureuri);\n\n\t\t\t// Watch for a new set of requests\n\t\t\tif ( s.global && ! $.active++ ) {\n\t\t\t\t$.event.trigger( \"ajaxStart\" );\n\t\t\t}\n\n\t\t\tvar requestDone = false, xml = {};\n\t\t\t// Create the request object\n\t\t\tif ( s.global ) $.event.trigger(\"ajaxSend\", [xml, s]);\n\n\t\t\t// Wait for a response to come back\n\t\t\tvar uploadCallback = function(isTimeout) {\n\t\t\t\tvar io = document.getElementById(frameId);\n\t\t\t\ttry {\n\t\t\t\t\tif(io.contentWindow) {\n\t\t\t\t\t\t xml.responseText = io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null;\n\t\t\t\t\t\t xml.responseXML = io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document;\n\n\t\t\t\t\t} else if(io.contentDocument) {\n\t\t\t\t\t\t xml.responseText = io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null;\n\t\t\t\t\t\txml.responseXML = io.contentDocument.document.XMLDocument?io.contentDocument.document.XMLDocument:io.contentDocument.document;\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t\t$.handleError(s, xml, null, e);\n\t\t\t\t}\n\n\t\t\t\tif ( xml || isTimeout == \"timeout\")\n\t\t\t\t{\n\t\t\t\t\trequestDone = true;\n\n\t\t\t\t\tvar status;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tstatus = isTimeout != \"timeout\" ? \"success\" : \"error\";\n\n\t\t\t\t\t\t// Make sure that the request was successful or notmodified\n\t\t\t\t\t\tif ( status != \"error\" ) {\n\t\t\t\t\t\t\t// process the data (runs the xml through httpData regardless of callback)\n\t\t\t\t\t\t\tvar data = $.uploadHttpData( xml, s.dataType );\n\n\t\t\t\t\t\t\t// If a local callback was specified, fire it and pass it the data\n\t\t\t\t\t\t\tif ( s.success ) s.success( data, status );\n\n\t\t\t\t\t\t\t// Fire the global callback\n\t\t\t\t\t\t\tif( s.global ) $.event.trigger( \"ajaxSuccess\", [xml, s] );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$.handleError(s, xml, status);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tstatus = \"error\";\n\t\t\t\t\t\t$.handleError(s, xml, status, e);\n\t\t\t\t\t}\n\n\t\t\t\t\t// The request was completed\n\t\t\t\t\tif( s.global ) $.event.trigger( \"ajaxComplete\", [xml, s] );\n\n\t\t\t\t\t// Handle the global AJAX counter\n\t\t\t\t\tif ( s.global && ! --jQuery.active ) $.event.trigger( \"ajaxStop\" );\n\n\t\t\t\t\t// Process result\n\t\t\t\t\tif ( s.complete ) s.complete(xml, status);\n\n\t\t\t\t\t$io.off();\n\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t$io.remove();\n\t\t\t\t\t\t\t$form.remove();\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t$.handleError(s, xml, null, e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100);\n\n\t\t\t\t\txml = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Timeout checker\n\t\t\tif ( s.timeout > 0 ) {\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t// Check to see if the request is still happening\n\t\t\t\t\tif( !requestDone ) uploadCallback( \"timeout\" );\n\t\t\t\t}, s.timeout);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar enctype = 'multipart/form-data';\n\t\t\t\t$form.attr({action:s.url, method:'POST', target : frameId, enctype : enctype}).submit();\n\t\t\t} catch(e) {\n\t\t\t\t$.handleError(s, xml, null, e);\n\t\t\t}\n\n\t\t\tif (window.attachEvent) {\n\t\t\t\tdocument.getElementById(frameId).attachEvent('onload', uploadCallback);\n\t\t\t} else {\n\t\t\t\tdocument.getElementById(frameId).addEventListener('load', uploadCallback, false);\n\t\t\t}\n\n\t\t\treturn {abort: function () {}};\n\t\t},\n\t\tuploadHttpData: function( r, type ) {\n\t\t\tvar data = (!type || type == \"xml\") ? r.responseXML : r.responseText;\n\n\t\t\t// If the type is \"script\", eval it in global context\n\t\t\tif ( type == \"script\" ) $.globalEval( data );\n\t\t\t// Get the JavaScript object, if JSON is used.\n\t\t\tif ( type == \"json\" ) data = $.parseJSON($(r.responseText).text());\n\t\t\t// evaluate scripts within html\n\t\t\tif ( type == \"html\" ) $(\"<div>\").html(data).evalScripts();\n\n\t\t\treturn data;\n\t\t}\n\t};\n}\n\njQuery.extend(plugin);\n\nif (!jQuery.handleError) {\n\tjQuery.extend({\n\t\thandleError : function(s, xhr, status, e) {\n\t\t\tif (s.error) {\n\t\t\t\ts.error.call(s.context || window, xhr, status, e);\n\t\t\t}\n\n\t\t\tif (s.global) {\n\t\t\t\t(s.context ? $(s.context) : $.event).trigger('ajaxError', [xhr, s, e]);\n\t\t\t}\n\t\t}\n\t});\n}\n\n})(window.jQuery);\n\nfunction getCookie(name) {\n    var regex = new RegExp('(^|[ ;])'+name+'\\\\s*=\\\\s*([^\\\\s;]+)');\n    return regex.test(document.cookie)?unescape(RegExp.$2):null;\n}\n","import React, { Component } from \"react\";\nimport { Display } from \"fancymixin\";\nimport { didClickOn, eitherFancy, getFancyDepsRoot, xmlUtil } from \"fancyutils\";\n\n// 'yy-mm-dd H:i:s';\nfunction formatISODate(date) {\n    return date ? removeISOString(date.toISOString()) : \"\";\n}\n\nfunction removeISOString(dateTimeString) {\n    return dateTimeString.replace(/T/, \" \").split(\".\")[0];\n}\n\nfunction handleInput(stateKey, component) {\n    return function InputHandler(event) {\n        const el = event.target;\n        const key = el.type === \"checkbox\" ? \"checked\" : \"value\";\n        component.setState({ [stateKey]: el[key] });\n    };\n}\n\nexport default class Admin extends Component {\n    state = {\n        showOnHomepage: null,\n        showOnHomepageChecked: null,\n        showInSearch: null,\n        datePublished: null,\n        datePublishedIntermediate: \"\",\n        salesShowInNewest: null,\n        salesExcludeFromPopular: null,\n        salesEditorPicked: null,\n        salesEditorPickedIntermediate: \"\",\n        salesEditorPickedChecked: null,\n        salesVideoFeatured: null,\n        thingVideoUrl: \"\",\n        collapse: false\n    };\n\n    loading = false;\n\n    constructor(props) {\n        super(props);\n        this.changeOwnerInputRef = element => {\n            this.changeOwnerInput = element;\n        }\n        this.reassignInputRef = element => {\n            this.reassignInput = element;\n        }\n    }\n\n    setThingAdminState = (thing) => {\n        const datePublished = new Date(thing.date_published) || new Date();\n        const salesEditorPicked =\n            thing.sales && (thing.sales.editor_picked ? new Date(thing.sales.editor_picked) : new Date());\n        this.setState({\n            showOnHomepage: thing.show_on_homepage,\n            showOnHomepageChecked: thing.show_on_homepage == true,\n            datePublished,\n            datePublishedIntermediate: formatISODate(datePublished),\n            salesShowInNewest: thing.sales && thing.sales.show_in_newest,\n            showInSearch: thing.show_in_search,\n\t    salesExcludeFromPopular: thing.exclude_from_popular,\n            salesEditorPicked,\n            salesEditorPickedIntermediate: salesEditorPicked instanceof Date ? formatISODate(salesEditorPicked) : \"\",\n            thingVideoUrl: thing.metadata && thing.metadata.video_url ? thing.metadata.video_url : \"\",\n            salesEditorPickedChecked: (thing.sales && thing.sales.editor_picked) != null,\n            salesVideoFeatured: thing.sales && thing.sales.video && thing.sales.video.featured\n        });\n    }\n\n    handleReassign = () => {\n        const { thing } = this.props;\n        var thing_id = thing.id;\n        var user_id = thing.user.id;\n        var new_thing_id = thing.ntid;\n        var reassign_thing_id = $(this.reassignInput)\n            .val()\n            .trim();\n\n        if (!Number.isInteger(Number(reassign_thing_id))) {\n            alert(\"Please enter thing_id\");\n            return false;\n        }\n        if (thing_id == reassign_thing_id) {\n            alert(\"Please check thing_id. You can't merge this to itself.\");\n            return false;\n        }\n        if (this.loading) {\n            return false;\n        }\n        if (window.confirm(`sure to delete the current thing and reassign to thing_id: ${reassign_thing_id}?`)) {\n            if (this.loading) {\n                return false;\n            }\n            this.loading = true;\n            $.post(\n                \"/merge_duplicate_things.xml\",\n                {\n                    reassign_thing_id,\n                    thing_id,\n                    new_thing_id,\n                    user_id\n                },\n                function(xml) {\n                    if (xmlUtil.isSuccess(xml)) {\n                        alert(\"done\");\n                        location.href = $(xml)\n                            .find(\"url\")\n                            .text();\n                    } else if (xmlUtil.isFail(xml)) {\n                        var msg = $(xml)\n                            .find(\"message\")\n                            .text();\n                        alert(msg);\n                    }\n                },\n                \"xml\"\n            )\n                .fail(() => {\n                    alert(\"There was an error.\");\n                })\n                .always(() => {\n                    this.loading = false;\n                });\n        }\n        return false;\n    }\n\n    handleOwnerChange = () => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n        const { thing } = this.props;\n        var thing_id = thing.id;\n        var old_user_id = thing.user.id;\n        var new_thing_id = thing.ntid;\n\n        var new_owner_name = $(this.changeOwnerInput)\n            .val()\n            .trim();\n        if (thing.user.username === new_owner_name) {\n            alert(\"The thing is already owned by the user.\");\n            this.loading = false;\n            return false;\n        }\n        var placeholder_str = $(this.changeOwnerInput)\n            .attr(\"placeholder\")\n            .trim();\n        if (new_owner_name == placeholder_str || new_owner_name.length === 0) {\n            alert(\"Please enter new username.\");\n            this.loading = false;\n            return false;\n        }\n\n        if (window.confirm(`sure to owner of the current thing to username: ${new_owner_name}?`)) {\n            $.ajax({\n                type: \"post\",\n                url: \"/change_new_thing_owner.xml\",\n                data: {\n                    new_owner_name,\n                    thing_id,\n                    new_thing_id,\n                    old_user_id\n                },\n                dataType: \"xml\"\n            })\n                .done(xml => {\n                    if (xmlUtil.isSuccess(xml)) {\n                        alert(\"done\");\n                        eitherFancy(\"Shared\", ({ reloadCurrentThing }) => {\n                            reloadCurrentThing();\n                        });\n                    } else if (xmlUtil.isFail(xml)) {\n                        alert(\n                            $(xml)\n                                .find(\"message\")\n                                .text()\n                        );\n                    }\n                })\n                .fail(() => {\n                    alert(\"There was an error.\");\n                })\n                .always(() => {\n                    this.loading = false;\n                });\n        } else {\n            this.loading = false;\n        }\n        return false;\n    }\n\n    handleFeaturedVideo = (event) => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n        const salesVideoFeatured = event.target.checked;\n        this.setState({ salesVideoFeatured }, () => {\n            const { thing } = this.props;\n            var thing_id = thing.id;\n            var user_id = thing.user.id;\n            var new_thing_id = thing.ntid;\n            var show_on_homepage = salesVideoFeatured;\n\n            $.post(\n                \"/set_show_video_on_homepage.xml\",\n                {\n                    thing_id,\n                    new_thing_id,\n                    user_id,\n                    show_on_homepage\n                },\n                function(xml) {\n                    if (xmlUtil.isSuccess(xml)) {\n                        alert(\"Video Setting saved\");\n                        eitherFancy(\"Shared\", ({ cache }) =>\n                            cache.update(thing_id, undefined, \"show_on_homepage\", show_on_homepage)\n                        );\n                    } else if (xmlUtil.isFail(xml)) {\n                        alert(\n                            $(xml)\n                                .find(\"message\")\n                                .text()\n                        );\n                    }\n                },\n                \"xml\"\n            )\n                .fail(() => {\n                    alert(\"There was an error.\");\n                })\n                .always(() => {\n                    this.loading = false;\n                });\n            return false;\n        });\n    }\n\n    handlePublishedDateChange = (nextState) => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n        const { thing } = this.props;\n        const { datePublishedIntermediate } = this.state;\n        let showOnHomepageChecked = (nextState && nextState.showOnHomepageChecked);\n        if (showOnHomepageChecked == null) {\n            showOnHomepageChecked = this.state.showOnHomepageChecked;\n        }\n\n        var date_published;\n        if (showOnHomepageChecked) {\n            let inputDate = new Date(datePublishedIntermediate);\n            if (Number.isNaN(inputDate)) {\n                alert(\"illformatted date - please put ISO date (i.e. 2020-01-01 10:10:10)\");\n                return false;\n            }\n            inputDate = new Date(inputDate.getTime() - inputDate.getTimezoneOffset() * 60000); // utc date\n            inputDate = new Date(inputDate.getTime() - inputDate.getTimezoneOffset() * 60000); // apply timezone offset\n            date_published = formatISODate(inputDate);\n        }\n        \n        var show_on_homepage = showOnHomepageChecked ? 1 : 0;\n\n        var thing_id = thing.id;\n        var user_id = thing.user.id;\n        var new_thing_id = thing.ntid;\n        var payload = {\n            new_thing_id,\n            thing_id,\n            show_on_homepage,\n            user_id\n        }\n        if (date_published) {\n            payload.date_published = date_published\n        }\n\n        $.post(\n            \"/set_show_on_homepage.xml\",\n            payload,\n            function(xml) {\n                if (xmlUtil.isSuccess(xml)) {\n                    alert(\"publish option set\");\n                } else if (xmlUtil.isFail(xml)) {\n                    alert(\n                        $(xml)\n                            .find(\"message\")\n                            .text()\n                    );\n                }\n            },\n            \"xml\"\n        )\n            .fail(() => {\n                alert(\"There was an error.\");\n            })\n            .always(() => {\n                this.loading = false;\n            });\n\n        return false;\n    }\n\n    handleShowNewest = (event) => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n\n        const salesShowInNewest = event.target.checked;\n        this.setState({ salesShowInNewest }, () => {\n            const { thing } = this.props;\n            const { salesShowInNewest } = this.state;\n            const sale_item_id = thing.sales && thing.sales.id;\n            $.post(\n                \"/set_show_in_newest.xml\",\n                {\n                    sale_item_id,\n                    show_in_newest: salesShowInNewest ? \"true\" : \"false\"\n                },\n                function(xml) {\n                    if (xmlUtil.isSuccess(xml)) {\n                        alert(\"show in newest set\");\n                    } else if (xmlUtil.isFail(xml)) {\n                        alert(\n                            $(xml)\n                                .find(\"message\")\n                                .text()\n                        );\n                    }\n                },\n                \"xml\"\n            )\n                .fail(() => {\n                    alert(\"There was an error.\");\n                })\n                .always(() => {\n                    this.loading = false;\n                });\n        });\n    }\n\n    handleShowInSearch = (event) => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n\n        const showInSearch = event.target.checked;\n        this.setState({ showInSearch }, () => {\n            const { thing } = this.props;\n            const { showInSearch } = this.state;\n            const thing_id = thing.id;\n\n            $.post(\n                \"/set_show_in_search.json\",\n                {\n                    thing_id,\n                    show_in_search: showInSearch ? \"true\" : \"false\"\n                },\n                function(json) {\n                    if (json.success) {\n                        alert(\"show_in_search set\");\n                    }\n                },\n                \"json\"\n            )\n                .fail(() => {\n                    alert(\"There was an error.\");\n                })\n                .always(() => {\n                    this.loading = false;\n                });\n        });\n    }\n\n\n    handleExcludePopular = (event) => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n\n        const salesExcludeFromPopular = event.target.checked;\n        this.setState({ salesExcludeFromPopular }, () => {\n            const { thing } = this.props;\n            const { salesExcludeFromPopular } = this.state;\n            const thing_id = thing.id;\n            $.post(\n                \"/set_exclude_from_popular.json\",\n                {\n                    thing_id,\n                    exclude_from_popular: salesExcludeFromPopular ? \"true\" : \"false\"\n                },\n                function(json) {\n                    if (json.success) {\n                        alert(\"exclude_from_popular set\");\n                    }\n                },\n                \"json\"\n            )\n                .fail(() => {\n                    alert(\"There was an error.\");\n                })\n                .always(() => {\n                    this.loading = false;\n                });\n        });\n    }\n\n    handleEditorPickChange = () => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n        const { thing } = this.props;\n        const { salesEditorPickedIntermediate, salesEditorPickedChecked } = this.state;\n\n        var inputDate = new Date(salesEditorPickedIntermediate);\n        if (Number.isNaN(inputDate)) {\n            alert(\"illformatted date - please put ISO date (i.e. 2016-03-11 02:48:44)\");\n            return false;\n        }\n        inputDate = new Date(inputDate.getTime() - inputDate.getTimezoneOffset() * 60000);\n        var thing_id = thing.id;\n        var user_id = thing.user.id;\n        var new_thing_id = thing.ntid;\n        var editor_picked = salesEditorPickedChecked ? formatISODate(inputDate) : \"\";\n\n        $.post(\n            \"/set_editor_picked.xml\",\n            {\n                editor_picked,\n                thing_id,\n                new_thing_id,\n                user_id\n            },\n            function(xml) {\n                if (xmlUtil.isSuccess(xml)) {\n                    alert(\"editors picked set\");\n                } else if (xmlUtil.isFail(xml)) {\n                    alert(\n                        $(xml)\n                            .find(\"message\")\n                            .text()\n                    );\n                }\n            },\n            \"xml\"\n        )\n            .fail(() => {\n                alert(\"There was an error.\");\n            })\n            .always(() => {\n                this.loading = false;\n            });\n        return false;\n    }\n\n    handleThingVideoUrl = () => {\n        if (this.loading) {\n            return false;\n        }\n        this.loading = true;\n        const { thing } = this.props;\n        const { thingVideoUrl } = this.state;\n        const thing_id = thing.id;\n        const user_id = thing.user.id;\n        $.post(\n            \"/set_thing_video_url.xml\",\n            {\n                thing_id,\n                user_id,\n                video_url: thingVideoUrl\n            },\n            function(xml) {\n                if (xmlUtil.isSuccess(xml)) {\n                    alert(\"video url set\");\n                } else if (xmlUtil.isFail(xml)) {\n                    alert(\n                        $(xml)\n                            .find(\"message\")\n                            .text()\n                    );\n                }\n            },\n            \"xml\"\n        )\n            .fail(() => {\n                alert(\"There was an error.\");\n            })\n            .always(() => {\n                this.loading = false;\n            });\n    }\n\n    handleCollapseClick = () => {\n        this.setState({ collapse: !this.state.collapse });\n    }\n\n    componentDidUpdate(prevProps) {\n        const { thing } = this.props;\n        if (\n            prevProps.appContext.lastFullyRenderedThingID !== this.props.appContext.lastFullyRenderedThingID &&\n            thing.fromServer\n        ) {\n            this.setThingAdminState(thing);\n        }\n    }\n\n    componentDidMount() {\n        const adminForm = $(\".admin-user-frm\");\n        if (adminForm.length > 0) {\n            adminForm.draggable({ handle: \".stit\" });\n        }\n        const { thing } = this.props;\n        if (thing.fromServer) {\n            this.setThingAdminState(thing);\n        }\n    }\n\n    render() {\n        const { appContext: { viewer }, thing, thing: { sales } } = this.props;\n\n        const {\n            datePublishedIntermediate,\n            showOnHomepageChecked,\n            salesShowInNewest,\n\t    showInSearch,\n\t    salesExcludeFromPopular,\n            salesEditorPickedChecked,\n            salesEditorPickedIntermediate,\n            salesVideoFeatured,\n            thingVideoUrl,\n            collapse\n        } = this.state;\n\n        const canSeeOrder = sales && !thing.is_fancybox && !thing.is_vanity_number_thing;\n        const canSeeCart = viewer.is_admin_senior && !viewer.is_admin_manager;\n\n        return (\n            <div className={`wrapper admin-user-frm ${collapse ? \"show\" : \"\"}`}>\n                <h3 className=\"stit\">Admin</h3>\n                <a onClick={this.handleCollapseClick} className=\"collapse\" />\n                <form>\n                    <ul>\n                        {canSeeOrder && (\n                            <li>\n                                <a href={`/admin/view-sale-orders-by-thing-id?thing_id=${thing.id}`}>View Orders</a>\n                            </li>\n                        )}\n                        {canSeeOrder &&\n                            canSeeCart && (\n                                <li>\n                                    <a href={`/admin/view-users-by-cart-item?sale_id=${sales.id}`}>View Carts</a>\n                                </li>\n                            )}\n                        <li>\n                            <a href={`/view-edit-new-thing?ntid=${thing.ntid}&ooid=${thing.user && thing.user.id}`}>\n                                Edit Directory Entries\n                            </a>\n                        </li>\n                        <li>\n                            Fancy'd: {thing.fancyd_count}\n                        </li>\n                    </ul>\n                </form>\n                <dl>\n                    <dt>Change owner</dt>\n                    <dd className=\"change-owner\">\n                        <input\n                            type=\"text\"\n                            className=\"text full\"\n                            ref={this.changeOwnerInputRef}\n                            placeholder=\"Enter new username\"\n                        />\n                        <button className=\"btns-blue-embo btn-owner\" onClick={this.handleOwnerChange}>\n                            Submit\n                        </button>\n                    </dd>\n                </dl>\n                <dl className=\"show-on-homepage\">\n                    <dt>Show on homepage</dt>\n                    <dd className=\"after\">\n                        <p className=\"left\">\n                            <input\n                                type=\"checkbox\"\n                                id=\"homepage_y\"\n                                name=\"homepage\"\n                                checked={showOnHomepageChecked}\n                                onChange={(e) => {\n                                    handleInput(\"showOnHomepageChecked\", this)(e);\n                                    if (!e.target.checked) {\n                                        this.handlePublishedDateChange({ showOnHomepageChecked: false })\n                                    }\n                                }}\n                            />\n                            <label htmlFor=\"homepage_y\">Show</label>\n                        </p>\n                        <div className=\"left\">\n                            <input\n                                type=\"text\"\n                                id=\"time_date_published\"\n                                className=\"text\"\n                                value={datePublishedIntermediate}\n                                onChange={handleInput(\"datePublishedIntermediate\", this)}\n                                style={Display.NoneIf(!showOnHomepageChecked)}\n                            />\n                            <button\n                                className=\"btns-blue-embo btn-date-published\"\n                                onClick={this.handlePublishedDateChange}>\n                                Submit\n                            </button>\n                        </div>\n                    </dd>\n                </dl>\n                <form>\n                    <ul className=\"showon\">\n                        <li className=\"exclude_pop\" key=\"exclude_pop\">\n                            <label>Exclude from Popular</label>\n                                <input\n                                    type=\"checkbox\"\n                                    id=\"exclude_from_pop\"\n                                    name=\"exclude_from_pop\"\n                                    checked={salesExcludeFromPopular}\n                                    onChange={this.handleExcludePopular}\n                                />\n                        </li>\n                        <li className=\"show_in_search\" key=\"show_in_search\">\n                            <label>Show in Search</label>\n                                <input\n                                    type=\"checkbox\"\n                                    id=\"show_in_search\"\n                                    name=\"show_in_search\"\n                                    checked={showInSearch}\n                                    onChange={this.handleShowInSearch}\n                                />\n                        </li>\n                        {sales &&\n                            sales.video &&\n                            sales.video.is_ready && (\n                                <li\n                                    className=\"after\"\n                                    id=\"homepage_video\">\n                                    <input\n                                        type=\"checkbox\"\n                                        id=\"homepage_video_y\"\n                                        name=\"homepage_video\"\n                                        checked={salesVideoFeatured}\n                                        onChange={this.handleFeaturedVideo}\n                                    />\n                                    <label htmlFor=\"homepage_video_y\">Show video on Timeline</label>\n                                </li>\n                            )}\n                            {sales && [\n                                <li className=\"feature_item_on\" key=\"feature_item_on\">\n                                    <label>Show on Editor's Picks</label>\n                                    <input\n                                        type=\"checkbox\"\n                                        id=\"feature_item_epick\"\n                                        name=\"feature_item\"\n                                        checked={salesEditorPickedChecked}\n                                        onChange={handleInput(\"salesEditorPickedChecked\", this)}\n                                    />\n                                    <p className=\"time-date-epicks\" style={Display.NoneIf(!salesEditorPickedChecked)}>\n                                        <input\n                                            type=\"text\"\n                                            id=\"time_date_epicks\"\n                                            className=\"text\"\n                                            value={salesEditorPickedIntermediate}\n                                            onChange={handleInput(\"salesEditorPickedIntermediate\", this)}\n                                        />\n                                        <button \n                                            className=\"btns-blue-embo time_date_epicks\"\n                                            onClick={this.handleEditorPickChange}>\n                                            Submit\n                                        </button>\n                                    </p>\n                                </li>,\n                                <li className=\"show_newest\" key=\"show_newest\">\n                                    <label>Show on Newest</label>\n                                    <input\n                                        type=\"checkbox\"\n                                        id=\"show_in_newest\"\n                                        name=\"show_in_newest\"\n                                        checked={salesShowInNewest}\n                                        onChange={this.handleShowNewest}\n                                    />\n                                </li>\n                            ]}\n                    </ul>\n                </form>\n                <dl className=\"reassign\">\n                    <dt>Reassign</dt>\n                    <dd>\n                        <input ref={this.reassignInputRef} type=\"text\" className=\"text full\" placeholder=\"Enter Thing_ID\" />\n                        <button className=\"btns-blue-embo btn-reassign\" onClick={this.handleReassign}>\n                            Submit\n                        </button>\n                    </dd>\n                </dl>\n                <dl className=\"videourl\">\n                    <dt>Video URL Override</dt>\n                    <dd>\n                        <input\n                            type=\"text\"\n                            className=\"text full\"\n                            placeholder=\"Enter mp4 URL\"\n                            value={thingVideoUrl}\n                            onChange={handleInput(\"thingVideoUrl\", this)}\n                        />\n                        <button className=\"btns-blue-embo btn-videourl\" onClick={this.handleThingVideoUrl}>\n                            Submit\n                        </button>\n                    </dd>\n                </dl>\n            </div>\n        );\n    }\n}\n\nconst sharedState = {\n    /* mutable */ draggingAdmin: false\n};\n\n$(document).ready(() => {\n    $(document.body).on(\"mousedown\", \"#overlay-thing .popup.overlay-thing\", function(event) {\n        const clickedOn = didClickOn($(event.target), \".thing-detail-container .admin-user-frm\");\n        sharedState.draggingAdmin = clickedOn;\n    });\n});\n\ngetFancyDepsRoot().Admin = {\n    sharedState\n};\n","import React from 'react';\n\n\nconst AdminSimple = ({ thing }) =>\n    <div className=\"wrapper admin-user-frm\">\n        <h3 className=\"stit\">Admin</h3>\n        <dl>\n            <dt>Date published</dt>\n            <dd>\n                <label>{thing.date_published}</label>\n            </dd>\n        </dl>\n    </div>;\n\nexport default AdminSimple;\n"],"sourceRoot":""}