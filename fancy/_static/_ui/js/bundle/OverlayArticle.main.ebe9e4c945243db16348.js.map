{"version":3,"sources":["webpack://fancy/./_static/modules/ui/overlay-article/Shortcode.js","webpack://fancy/./_static/modules/ui/overlay-article/SyncedContext.js","webpack://fancy/./_static/modules/ui/overlay-article/action/action-constants.js","webpack://fancy/./_static/modules/ui/overlay-article/action/action-helpers.js","webpack://fancy/./_static/modules/ui/overlay-article/action/actions.js","webpack://fancy/./_static/modules/ui/overlay-article/appstate.js","webpack://fancy/./_static/modules/ui/overlay-article/cache.js","webpack://fancy/./_static/modules/ui/overlay-article/components/ArticleCard.js","webpack://fancy/./_static/modules/ui/overlay-article/components/ArticleFancydUsers.js","webpack://fancy/./_static/modules/ui/overlay-article/components/ArticleWidgets.js","webpack://fancy/./_static/modules/ui/overlay-article/components/ThingCard.js","webpack://fancy/./_static/modules/ui/overlay-article/components/ThingFancydUsers.js","webpack://fancy/./_static/modules/ui/overlay-article/components/article.js","webpack://fancy/./_static/modules/ui/overlay-article/components/map.js","webpack://fancy/./_static/modules/ui/overlay-article/config.js","webpack://fancy/./_static/modules/ui/overlay-article/container/app.js","webpack://fancy/./_static/modules/ui/overlay-article/container/entry-events.js","webpack://fancy/./_static/modules/ui/overlay-article/container/history.js","webpack://fancy/./_static/modules/ui/overlay-article/container/routeutils.js","webpack://fancy/./_static/modules/ui/overlay-article/index.js","webpack://fancy/./_static/modules/ui/overlay-article/reducers.js","webpack://fancy/./_static/modules/ui/overlay-article/shared.js","webpack://fancy/./_static/modules/ui/overlay-article/store/configure-store.js","webpack://fancy/./_static/modules/ui/overlay-article/store/initial-store.js","webpack://fancy/./_static/modules/ui/overlay-article/store/store.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/map.cart.ts","webpack://fancy/webpack/bootstrap","webpack://fancy/webpack/runtime/amd options","webpack://fancy/webpack/runtime/compat get default export","webpack://fancy/webpack/runtime/define property getters","webpack://fancy/webpack/runtime/ensure chunk","webpack://fancy/webpack/runtime/get javascript chunk filename","webpack://fancy/webpack/runtime/global","webpack://fancy/webpack/runtime/harmony module decorator","webpack://fancy/webpack/runtime/hasOwnProperty shorthand","webpack://fancy/webpack/runtime/load script","webpack://fancy/webpack/runtime/make namespace object","webpack://fancy/webpack/runtime/publicPath","webpack://fancy/webpack/runtime/jsonp chunk loading","webpack://fancy/webpack/startup"],"names":["ImageModes","Full","Normal","Quoted","Grid","getRandomId","String","Math","random","substr","getJumper","$element","_id","attr","$","jQueryPromiseAll","arrayOfPromises","jQuery","when","apply","then","Array","prototype","slice","call","arguments","getProductContext","products","callback","length","filter","e","map","sid","dfd","Deferred","get","thing","resolve","fail","xhr","status","alertify","alert","console","warn","promise","done","things","ctx","items","image_fit_to_bounds","image","src","sales","images","fit_to_bounds","title","emojified_name","price","retail_price","id","getTemplateByImageMode","imageMode","ShortCodeTransformers","options","$shortcode","tagline","markup","window","isWhitelabelV2","$next","_","template","find","wrap","append","replaceWith","prop","html","reduce","prev","mode","getIsolatedShortcodeElement","next","getWrappedSingleNode","target","convertShortcode","content","$wrapped","$disposable","mountToDisposable","each","i","shortcode","$sc","data","JSON","parse","name","remove","convertArticleShortcode","unmountedDOM","document","body","eq","empty","style","appendTo","findFancyButton","domCache","thingsDomCache","$query","containers","dedupeArray","closest","toArray","$btn","findArticleFancyButton","toggleFancyButton","fancyd","removeClass","addClass","replaceFancyCount","fc","text","toLowerCase","indexOf","onFancyButtonUpdate","onArticleFancyButtonUpdate","constantGen","keys","C","shouldOpenArticle","state","appContext","visible","shouldFetchArticle","articleID","article","ID","isFetching","closeOverlay","dispatch","isStaticPage","closeModal","historyData","history","stripPathname","closeArticle","off","trigger","fetchArticle","type","ArticleCache","killCache","queryString","getState","openArticle","cache","cac","loadArticle","onLoadArticle","isCrawled","requestArticle","saved_users_top","raw_content","include_viewer","getLocationArgPairs","preview","failureXHR","requestArticleFail","location","href","MPArgs","article_id","currentLocationArgPair","utm","MP","___D","store","pendingID","OPEN_ARTICLE","updateAppContext","contextObject","context","viewer","updateState","k","v","ignoreCralwed","existence","ARTICLES","getCrawled","count","selector","value","t","index","ArticleCard","props","event","stopPropagation","isPlainLeftClick","preventDefault","html_url","transition","LinkTypes","handleLinkClick","throttle","unmounted","cover_image","url","backgroundImage","Component","handleProfileMouseOver","$profile","currentTarget","css","width","FancydUser","user","display","isViewer","classnames","_viewer","image_url","profile_image_url","fullname","full_name","bgXPosSequence","isUserEqual","a","b","_handleFancydStateOnLoadArticle","slug","save_count","stateSetter","getConciseNumberString","loading","fancyStatus","FancyStatus","Idle","getFancyStatus","nextFancydState","getCompletionIdleStatus","currentFancyState","prevFancyState","getNextFancydCount","nextFancyd","currentFancydCount","toggleFancy","currentState","nextFancydCount","ajax","action","json","saved","undefined","FancydUsers","fancyAnimation","frame","animateFancyBG","xPos","fancyBGAnimation","setTimeout","setState","totalLength","first","last","Display","indexLimit","ns","loggedIn","require_login","_getInitialState","fancyBGAnimationRef","element","handleFancydStateOnLoadArticle","prevProps","np","saved_users","fancydUsers","concat","fancydUser","fancydUserAnimClass","userCountSufficiency","handleFancyClick","getFancydCountString","getFancyduserDisplay","ThingList","showShare","LogExposed","forEach","addLog","response","convertThingsV1ToRest","article_items","isWhitelabel","logExposed","updateThingList","lastarticleID","nextProps","idCopy","hasPagination","thingsHeader","item_header","idx","handleDelete","MaybePaginationWindow","page","minPage","max","maxPage","floor","min","children","transform","stream","handlePrevClick","handleNextClick","ArticleList","articles","$this","hasClass","left","lastPageNum","CardWidth","CardMargin","CardContainerWidth","CardContainerPadding","updateArticleList","ceil","prevDisabled","nextDisabled","getLeftOffset","AdminHeader","self","message","original_labels","labels","set","ok","cancel","confirm","yes","is_active","post","error","open","handleEditArticleClick","handleLiveClick","initGallery","container","c","d","j","f","isArray","g","hasOwnProperty","h","Error","stack","replace","log","Object","create","constructor","_super","la","oa","l","m","q","addEventListener","n","removeEventListener","o","parentNode","p","trim","split","r","s","push","sort","u","toUpperCase","ma","ua","w","ownerDocument","defaultView","parentWindow","x","manager","inputTarget","domHandler","enable","handler","init","y","inputClass","xa","M","ya","P","wa","R","L","z","pointers","changedPointers","Ea","Ga","Ha","isFirst","isFinal","session","eventType","A","emit","recognize","prevInput","firstInput","D","firstMultiple","center","E","timeStamp","ra","deltaTime","angle","I","distance","H","B","offsetDirection","G","deltaX","deltaY","F","overallVelocityX","overallVelocityY","overallVelocity","qa","scale","K","rotation","J","maxPointers","srcEvent","offsetDelta","prevDelta","lastInterval","Da","velocity","velocityX","velocityY","direction","clientX","pa","clientY","Ia","Ja","Ka","La","Ma","Qa","sqrt","atan2","PI","Ra","evEl","Ta","evWin","Ua","pressed","Xa","Ya","pointerEvents","N","evTarget","$a","_a","started","O","touches","changedTouches","bb","targetIds","Q","Fa","identifier","touch","mouse","primaryTouch","lastTouches","S","T","splice","cb","U","abs","db","V","W","jb","kb","lb","ib","hb","X","fb","CSS","supports","Y","defaults","nb","simultaneous","requireFail","Z","sb","qb","pb","ob","aa","ba","pX","pY","ca","da","_timer","_input","ea","fa","ga","pTime","pCenter","ha","recognizers","preset","ia","handlers","oldCssProps","input","touchAction","ja","add","recognizeWith","requireFailure","cssProps","ka","createEvent","initEvent","gesture","dispatchEvent","na","createElement","round","Date","now","assign","TypeError","sa","ta","va","test","navigator","userAgent","za","Aa","Ba","Ca","Na","Oa","Pa","destroy","Sa","mousedown","mousemove","mouseup","button","which","pointerType","Va","pointerdown","pointermove","pointerup","pointercancel","pointerout","Wa","MSPointerEvent","PointerEvent","pointerId","Za","touchstart","touchmove","touchend","touchcancel","ab","sourceCapabilities","firesTouchEvents","eb","gb","mb","compute","actions","update","getTouchAction","join","preventDefaults","prevented","preventSrc","rb","tb","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","process","reset","attrTest","threshold","directionTest","time","clearTimeout","taps","interval","posThreshold","failTimeout","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","ub","vb","stop","stopped","curRecognizer","on","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","Manager","Input","TouchAction","TouchInput","MouseInput","PointerEventInput","TouchMouseInput","SingleTouchInput","Recognizer","AttrRecognizer","Tap","Pan","Swipe","Pinch","Rotate","Press","merge","extend","inherit","bindFn","prefixed","wb","Hammer","define","module","exports","totalW","click","itemTraits","section","via","similar","recently","ThingCard","fancydCount","quantity","optionID","showCart","popupOpened","addToCart","saleAvailable","isSaleAvailable","saleOptionExists","isSaleOptionExists","sales_available","getSales","option","has_options","getSaleOption","available_for_sale","isNumber","fancyd_count","diff","isSaleOptionAvailable","range","parseInt","thing_id","status_code","onDelete","OaContainer","appState","params","sale_item_id","sale_id","waiting","getWaiting","dataType","itemType","isNaN","gettext","param","seller_id","seller","option_id","traits","getThingName","salesID","saleOptionID","logAddCartMixpanel","discounting","discount_percentage","meta","deal_price","brand_name","addItemToCart","thumb_image_url_310","thumb_image_url_558","itemIdx","showDelete","saleOptionAvailable","showFrom","max_price","min_price","__Config","new_card","active","toggled","username","handleShowSomething","opened","handleCartAddition","handleTrickClick","handleOptionChange","numberFormat","handleOptionQuantityChange","getQuantityRange","subscribed","handleNotifySoldout","getSafeNameProp","handleRecentlyDelete","handleQuickCartToggle","user_square_image_small","_handleFancydStateOnLoadThing","thingID","bigContainerStyle","bigContainer","handleFancydStateOnLoadThing","fancyd_users","mapStateToProps","Lightbox","lazy","OverlayArticle","applyProductSlide","fn","fitVids","customSelector","ignore","getElementById","head","getElementsByTagName","innerHTML","appendChild","childNodes","not","parents","tagName","parent","height","_count","removeAttr","Zepto","pt","ct","isStaticArticlePage","focus","is_admin_senior","connect","Article","lightboxImages","lightboxOpen","is","$gallery","$paging","len","galleryNth","indexSelector","incdec","end","position","$slide","productSlide","itemPerSlide","handleGalleryClick","prepareLightboxOpen","prepareProductSlide","lightboxCurrentImage","hide","ReactDOM","lastFullyRenderedArticleID","video","coverImgUrl","Video","videoProps","object","autoplay","cover_video","lastFullyRenderedObjectID","poster","coverImage","author","authors","__html","date_created","dateFormat","action_button","isString","link","handleContentClick","handleClickPrev","handleClickNext","handleClose","handleClickThumbnail","getDescription","description","formatPrice","amount","newPrice","toFixed","regex","numberType","dangerouslySetInnerHTML","salesAvailable","isEmpty","Addition","Removal","AfterAddition","AfterRemoval","commonWrapperSelector","Selectors","HomepageWrapper","App","handleCloseArticle","handleOverlayArticleKeyEvents","KEYS","conditionalTransition","aElement","isHomepage","has","getAttribute","oneshotEventAttached","attachEntryEvents","__INIT_ARTICLE_ANCHOR","getObjectTypeFromUrl","getPathname","$targ","didClickOn","isStatic","getDynamic","getStatic","scrollToTop","parentElement","scrollTop","initialArticlePageID","extractMetaFromArticleURL","pathname","initialPageIsArticlePage","initialPath","preservedHref","initialTitle","locationIsArticlePage","overlayIsOn","runOverlay","articleURLType","requestIdleCallback","stopOverlay","historyHook","search","Dynamic","Static","Timeline","Internal","Number","redirect","destination","onLoad","require","thingRegex","articleRegex","initialHref","match","reload","overlayArticleContainer","selectOrCreate","$overlayArticleContainer","render","readyState","isLoggedIn","loaded","getInitialStoreState","updateShallow","userCountry","current_country_code","populateArticleContext","articleData","fromServer","URLMeta","extractMetaFromURL","owner","rootReducer","combineReducers","getFancyDepsRoot","Shared","getStore","middleware","thunk","configureStore","initialState","createStore","applyMiddleware","contextName","contexts","getAllInitialStoreState","contextKey","Fancy","track_event","dataLayer","from_sds_page","TrackingEvents","product_id","products_info","revenue","brand","variant","args","itemcode","itemname","cart_id","fancy_price","FANCY_PRICE","Cart","addItem","openPopup","always"],"mappings":"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;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA,E;;;;;WCVA,sF;;;;;WCAA;WACA;WACA;WACA;WACA,sBAAsB,4BAA4B,QAAQ;WAC1D;WACA;WACA;WACA,gBAAgB,oBAAoB;WACpC;WACA,kGAAkG,YAAY,OAAO;WACrH;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,kEAAkE,kCAAkC;WACpG;WACA;WACA;WACA,E;;;;;WCzCA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;WCNA,kD;;;;;WCAA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,gCAAgC;;WAEhC;WACA;WACA;WACA,IAAI;WACJ,cAAc;WACd;WACA;WACA;WACA,MAAM;WACN;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,KAAK;WACL;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA,eAAe,4BAA4B;WAC3C;WACA;WACA,gBAAgB,2BAA2B;WAC3C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,eAAe,+BAA+B;WAC9C;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,oBAAoB;WAC1B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;WACA,+C;;;;UCjIA;UACA","file":"OverlayArticle.main.ebe9e4c945243db16348.js","sourcesContent":["/* BEWARE: this code is directly imported via mobile article.new.html, use ES5 */\nvar ImageModes = {\n    Full: 'Full',\n    Normal: 'Normal',\n    Quoted: 'Quoted',\n    Grid: 'Grid',\n};\n\nfunction getRandomId() {\n    return 'shortcode-' + String(Math.random()).substr(2)\n}\n\nfunction getJumper($element) {\n    var _id = getRandomId();\n    $element.attr('id', _id);\n    return function () {\n        return $('#' + _id)\n    }\n}\n\nfunction jQueryPromiseAll(arrayOfPromises) {\n    return jQuery.when.apply(jQuery, arrayOfPromises).then(function() {\n        return Array.prototype.slice.call(arguments, 0);\n    });\n}\nfunction getProductContext(products, callback) {\n    if (products.length > 0) {\n        jQueryPromiseAll(products.filter(function(e){ return e }).map(function(sid) {\n            var dfd = $.Deferred()\n            $.get('/rest-api/v1/things/' + sid + '?sales=true&include_every_image=true')\n                .then(function(thing) {\n                    dfd.resolve(thing);\n                })\n                .fail(function(xhr) {\n                    if (xhr.status === 404) {\n                        alertify.alert('Product id ' + sid + 'not found.');\n                    } else {\n                        console.warn('There was an error whiel fetching sid:', sid, xhr)\n                    }\n                    dfd.resolve(null);\n                });\n            return dfd.promise()\n        }))\n        .done(function(things) {\n            var ctx = {\n                items: things.map(function(thing){\n                    var image_fit_to_bounds = false;\n                    var image = thing.image.src;\n                    try {\n                        image_fit_to_bounds = thing.sales.images[0].fit_to_bounds;\n                        image = thing.sales.images[0].src;\n                    } catch(e) {}\n                    return thing.sales && { title: thing.sales.emojified_name, price: thing.sales.price, retail_price: thing.sales.retail_price, image: image, image_fit_to_bounds: image_fit_to_bounds, id: thing.sales.id }\n                }).filter(function(e){ return e })\n            };\n            callback(ctx);\n        })\n    } else {\n        console.warn('[ShortCodeTransformers]: Error - product does not exist');\n    }\n}\n\nfunction getTemplateByImageMode(imageMode) {\n    switch (imageMode) {\n        case ImageModes.Grid:\n            return (\n                '<div class=\"grid\"><img src=\"/_ui/images/common/blank.gif\"  alt=\"<%= image.caption %>\" class=\"\" style=\"background-image:url(\\'<%= image.src %>\\');\" data-src=\"<%= image.src %>\"><% if (image.caption) { %><figcaption class=\"text-placeholder\"><%= image.caption %></figcaption><% } %></div>'\n            )\n        case ImageModes.Full:\n            return (\n                '<figure class=\"mode-full\"><img src=\"<%= image.src %>\" alt=\"<%= image.caption %>\"></figure>'\n            );\n        case ImageModes.Quoted:\n            return (\n                '<figure class=\"mode-quoted\"><p><img src=\"<%= image.src %>\" alt=\"<%= image.caption %>\"></p><p class=\"textarea\"><%= image.caption %></p></figure>'\n            );\n        case ImageModes.Normal:\n        default:\n            return (\n                '<figure class=\"mode-normal\"><img src=\"<%= image.src %>\" alt=\"<%= image.caption %>\"></figure>'\n            );\n    }\n}\n\nvar ShortCodeTransformers = {};\n/* \n<% {\"name\": fancy-article-gallery,\n    \"images\": [{ src: \"https://img-address-1\", caption: \"An image caption\", uiid: 1 }, ... ],\n    \"title\": \"a gallery title\",\n    \"tagline\": \"a gallery tagline\"} %>\n*/\nShortCodeTransformers['fancy-article-gallery'] = function(options, $shortcode) {\n    var images  = options.images;\n    var title   = options.title;\n    var tagline = options.tagline;\n    var markup = '';\n        markup += '<div class=\"gallery\">'\n        markup +=   '<h3><span><%= title %></span><small class=\"tagline\"><span><%= tagline %></span></small></h3>'\n        markup +=   '<ul class=\"photo-list\">'\n        markup +=     '<% _.each(images, function(image, idx) { %>'\n        markup +=       '<li class=\"<%= idx === 0 ? \\'active\\' : \\'\\' %>\"><a href=\"<%= image.link %>\" <%= image.link ? \"rel=\\'noopener\\' target=\\'_blank\\' class=\\'linked\\'\" : \"onclick=\\'return false;\\'\" %>><img src=\"<%= image.src %>\"></a><span><%= image.caption %></span></li>'\n        markup +=     '<% }) %>'\n        markup +=   '</ul>'\n        markup +=   '<div class=\"paging\">'\n    if (window.isWhitelabelV2) {\n        markup +=     '<div class=\"btn\"><a class=\"prev\"></a><a class=\"next\"></a></div>'\n    }\n        markup +=     '<% _.each(images, function(e, idx) { %> '\n        markup +=       '<a href=\"#\" class=\"<%= idx === 0 ? \\'current\\' : \\'\\' %> pager\"><%= idx + 1 %></a>'\n        markup +=     '<% }) %>'\n        markup +=   '</div>'\n        markup += '</div>'\n\n    var $next = $(_.template(markup)({ images: images, title: title, tagline: tagline }));\n    if (window.isWhitelabelV2) {\n        $next.find('img').wrap('<span class=\"figure\" />');\n        $next = $('<div class=\"gallery-container\" />').append($next);\n    }\n    $shortcode.replaceWith($next.prop('outerHTML'));\n};\n/*\n<% {\"name\": \"fancy-article-img\",\n    \"images\": [{\n        \"mode\": \"Quoted\",\n        \"src\": \"https://img-address\",\n        \"caption\": \"A image caption\",\n    }]\n   } %>\n*/\nShortCodeTransformers['fancy-article-img'] = function(options, $shortcode) {\n    var images = options.images;\n    var html = images.reduce(function(prev, image) {\n        return prev + _.template(getTemplateByImageMode(image.mode))({ image: image });\n    }, '');\n    if (images[0] && images[0].mode === ImageModes.Grid) {\n        html = ('<figure class=\"mode-grid\">' + html + '</figure>')\n    }\n    $shortcode.replaceWith(html);\n};\n\nShortCodeTransformers['fancy-article-product'] = function(options, $shortcode) {\n    var items  = options.products;\n    const getIsolatedShortcodeElement = getJumper($shortcode)\n    getProductContext(items, function (ctx) {\n    var markup = '';\n        markup += '<ul class=\"itemList product\">'\n        markup += '<% items.forEach(function(item) { %>'\n        markup +=   '<li class=\"itemListElement\" data-id=\"<%= item.id %>\">'\n        markup +=     '<a href=\"<%= item.html_url %>?utm=article\">'\n        markup +=     '<span class=\"figure <% if (item.image_fit_to_bounds) { %>fit<% } %>\">'\n        markup +=       '<img src=\"/_ui/images/common/blank.gif\" style=\"background-image:url(<%= item.image %>)\">'\n        markup +=     '</span>'\n        markup +=     '<span class=\"figcaption\">'\n        markup +=       '<span class=\"title\"><%= item.title %></span>'\n        markup +=       '<% if (item.retail_price != null) { %><b class=\"price sales\">$<%= item.price %> <small class=\"before\">$<%= item.retail_price %></small></b><% } else { %><b class=\"price\">$<%= item.price %></b><% } %>'\n        markup +=     '</span>'\n        markup +=   '</li>'\n        markup += '<% }); %>'\n        markup += '</ul>'\n        var next = _.template(markup)(ctx);\n        getIsolatedShortcodeElement().replaceWith(next);\n    });\n};\n\nShortCodeTransformers['fancy-article-product-slideshow'] = function(options, $shortcode) {\n    var items  = options.products;\n    const getIsolatedShortcodeElement = getJumper($shortcode)\n    getProductContext(items, function(ctx) {\n    var markup = '';\n        markup += '<div class=\"itemSlide product\">'\n        markup +=   '<div class=\"itemSlideWrap\">'\n        markup +=     '<ul class=\"stream after\">'\n        markup +=       '<% items.forEach(function(item) { %>'\n        markup +=       '<li class=\"itemSlideElement\">'\n        markup +=         '<div class=\"figure-item\">'\n        markup +=           '<figure <% if (item.image_fit_to_bounds) { %>class=\"fit\"<% } %>><a href=\"<% if (item.html_url) { %><%= item.html_url %><% } else { %>/sales/<%= item.id %>?utm=article<% } %>?utm=article\">'\n        markup +=             '<span class=\"back\"></span>'\n        markup +=             '<img class=\"figure\" src=\"/_ui/images/common/blank.gif\"'\n        markup +=                  'style=\"background-image: url(<%= item.image %>);\">'\n        markup +=           '</a></figure>'\n        markup +=           '<figcaption>'\n        markup +=             '<span class=\"show_cart\">'\n        markup +=               '<button class=\"btn-cart nopopup soldout\">'\n        markup +=                 '<% if (item.retail_price != null) { %><b class=\"price sales\">$<%= item.price %> <small class=\"before\">$<%= item.retail_price %></small></b><% } else { %><b class=\"price\">$<%= item.price %></b><% } %>'\n        markup +=               '</button>'\n        markup +=             '</span>'\n        markup +=             '<a href=\"<%= item.html_url %>?utm=article\" class=\"title\"><%= item.title %></a>'\n        markup +=           '</figcaption>'\n        markup +=         '</div>'\n        markup +=       '</li>'\n        markup +=       '<% }); %>'\n        markup +=     '</ul>'\n        markup +=   '</div>'\n        markup +=   '<a href=\"#\" class=\"prev\">Prev</a>'\n        markup +=   '<a href=\"#\" class=\"next\">Next</a>'\n        markup += '</div>'\n\n        var next = _.template(markup)(ctx);\n        getIsolatedShortcodeElement().replaceWith(next);\n    });\n};\n\nfunction getWrappedSingleNode(target) {\n    return $('<div class=\"singlenode-wrapper\">' + target + '</div>');\n}\n\nfunction convertShortcode(content) {\n    var $wrapped = getWrappedSingleNode(content);\n    var $disposable = mountToDisposable($wrapped);\n\n    $wrapped.find('p.shortcode').each(function(i, shortcode) {\n        var $sc = $(shortcode);\n        try {\n            var data = JSON.parse($sc.attr('data-internal'));\n            ShortCodeTransformers[data.name](data, $sc);\n        } catch(e) { console.warn(e) }\n    });\n\n    $disposable.remove();\n    return $wrapped.html();\n}\nwindow.convertArticleShortcode = convertShortcode;\n\nfunction mountToDisposable(unmountedDOM) {\n    // Create/Select disposable mounting DIV to correctly modify a element.\n    let $disposable = $(document.body).find('.disposable');\n    if ($disposable.length > 0) {\n        $disposable = $disposable.eq(0).empty();\n    } else {\n        $disposable = $('<div />', { id: 'disposable', style: 'display:none;'}).appendTo(document.body);\n    }\n\n    if (unmountedDOM) {\n        // Append unmounted DOM if exists\n        $disposable.append(unmountedDOM);\n    }\n    // return disposable DOM\n    return $disposable;\n}\n","// This module deals with outside of React context (mostly raw DOM) with observing DOM structure and \n// do sub'd actions when React-context actions fires.\nimport { dedupeArray } from 'fancyutils';\n\n/*\nif (process.env.NODE_ENV !== 'production') {\n    window.__assert = true;\n}\n\nfunction assert(a,b) {\n    if (window.__assert) console.assert(a,b)\n}\n*/\n\nfunction findFancyButton(id)/*:jQuery?*/ {\n    if (typeof id === 'string') {\n        const domCache = thingsDomCache[id];\n        if (typeof domCache === 'object') {\n            return $(domCache);\n        } else if (domCache === false) {\n            // NOOP\n        } else {\n            const $query = $(`#container-wrapper a[href^=\"/things/${id}\"]:visible`);\n            if ($query.length > 0) {\n                const containers = dedupeArray(\n                    $query.map((i, e) => {\n                        return $(e).closest('div.figure-item').get(0)\n                    }).toArray()\n                );\n                if (containers && containers.length > 0) {\n                    const $btn = $(containers[0]).find('button.fancy, button.fancyd, a.fancyd, a.fancy');\n                    if ($btn.length > 0) {\n                        thingsDomCache[id] = $btn[0];\n                        return $btn;\n                    }\n                }\n            }\n            // If not returned\n            thingsDomCache[id] = false;\n        }\n    }\n}\n\nfunction findArticleFancyButton(id)/*:jQuery?*/ {\n    if (typeof id === 'string') {\n        const domCache = thingsDomCache[id];\n        if (typeof domCache === 'object') {\n            return $(domCache);\n        } else if (domCache === false) {\n            // NOOP\n        } else {\n            const $query = $(`#container-wrapper a[href^=\"/articles/${id}\"]:visible`);\n            if ($query.length > 0) {\n                const containers = dedupeArray(\n                    $query.map((i, e) => {\n                        return $(e).closest('div.article_item').get(0)\n                    }).toArray()\n                );\n                if (containers && containers.length > 0) {\n                    const $btn = $(containers[0]).find('button.fancy, button.fancyd, a.fancyd, a.fancy');\n                    if ($btn.length > 0) {\n                        thingsDomCache[id] = $btn[0];\n                        return $btn;\n                    }\n                }\n            }\n            // If not returned\n            thingsDomCache[id] = false;\n        }\n    }\n}\n\n// via thing id \nconst thingsDomCache = {};\n\nfunction toggleFancyButton($btn, fancyd) {\n    $btn.removeClass('fancy').removeClass('fancyd');\n    $btn.addClass(fancyd ? 'fancyd' : 'fancy');\n}\n\nfunction replaceFancyCount($btn, fancyd, fc) {\n    // Fancy | Fancy'd\n    if ($btn.text().toLowerCase().indexOf('fancy') >= 0) {\n        $btn.html(`<span><i></i></span> ${fancyd ? 'Fancy\\'d' : 'Fancy'}`);\n    // Fancy count\n    } else {\n        $btn.html(`<span><i></i></span> ${fc}`);\n    }\n}\n\nexport function onFancyButtonUpdate(id/*:string*/, fancyd/*:boolean*/, fc/*:string*/) {\n    const $btn = findFancyButton(id);\n    if ($btn && $btn.length > 0) {\n        toggleFancyButton($btn, fancyd);\n        replaceFancyCount($btn, fancyd, fc);\n    }\n}\n\nexport function onArticleFancyButtonUpdate(id/*:string*/, fancyd/*:boolean*/, fc/*:string*/) {\n    const $btn = findArticleFancyButton(id);\n    if ($btn && $btn.length > 0) {\n        toggleFancyButton($btn, fancyd);\n        replaceFancyCount($btn, fancyd, fc);\n    }\n}\n","// Generate `key: String(key)` structure by given string key arguments\nfunction constantGen() {\n    var keys = [].slice.call(arguments);\n    return keys.reduce((prev, next) => {\n        prev[next] = next;\n        return prev;\n    }, {});\n}\n\nvar C = constantGen(\n  'UPDATE_APP_CONTEXT',\n  // Loading\n  'REQUEST_ARTICLE',\n  'REQUEST_ARTICLE_FAILURE',\n  'LOAD_ARTICLE',\n\n  // UI Actions\n  'OPEN_ARTICLE',\n  'CLOSE_ARTICLE',\n\n);\n\nexport default C;\n","import { MP, getLocationArgPairs, isStaticPage, stripPathname } from 'fancyutils';\n\nimport { historyData } from '../container/history';\nimport store from '../store/store';\nimport { closeModal } from '../container/routeutils';\nimport {\n    closeArticle,\n    openArticle,\n    loadArticle,\n    requestArticle,\n    requestArticleFail,\n} from './actions';\nimport { ArticleCache, cache } from '../cache';\nimport { history } from 'common-components';\n\n\nfunction shouldOpenArticle(state) {\n    return state.appContext.visible !== true;\n}\n\n// Blocks illegal requests\nfunction shouldFetchArticle(state, articleID) {\n    if (state.article.ID === articleID || state.article.isFetching) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\nexport function closeOverlay() {\n    return dispatch => {\n        if (isStaticPage()) {\n            return;\n        }\n        closeModal();\n        historyData.overlayIsOn = false;\n        history.push(stripPathname(historyData.preservedHref), null);\n        document.title = historyData.initialTitle;\n\n        dispatch(closeArticle());\n        $(document).off('keydown.overlayArticle');\n        $(window).trigger('scroll');\n    }\n}\n\nexport function fetchArticle(articleID, type = ArticleCache.ARTICLES, killCache = false, queryString = '') {\n    return (dispatch, getState) => {\n        if (articleID == null) {\n            console.warn('fetchArticle(): articleID was null.');\n            return;\n        }\n        var state = getState();\n        if (shouldOpenArticle(state)) {\n            dispatch(openArticle());\n        }\n        if (killCache) {\n            cache.remove(articleID, type);\n            delete state.article;\n        }\n\n        if (killCache || shouldFetchArticle(state, articleID)) {\n            if (cache.exists(articleID, type)) {\n                const cac = cache.get(articleID, type);\n                dispatch(loadArticle(articleID, cac));\n                onLoadArticle(cac);\n                // if cache is crawled one, request should continue\n                if (!(cac.isCrawled)) {\n                    return;\n                }\n            }\n            dispatch(requestArticle(articleID));\n            const options = { saved_users_top:10, raw_content: 'true', include_viewer: 'true'};\n            if (getLocationArgPairs('preview')) {\n                options.preview = true;\n            }\n            $.get(`/rest-api/v1/articles/${articleID}${queryString}`, options)\n                .then(article => {\n                    cache.add(articleID, article, type);\n                    dispatch(loadArticle(articleID, article));\n                    onLoadArticle(article);\n                })\n                .fail(failureXHR => {\n                    // FIXME: This error handling only happens when there's server-side error -\n                    //        can't handle client-side ones\n                    dispatch(requestArticleFail(articleID));\n                    if (failureXHR.status === 404) {\n                        alertify.alert(\"This page is not available. Please try again later.\");\n                    // } else if (failureXHR.status >= 500) {\n                    } else {\n                        alertify.alert(\"There was an error while opening the page.<br> Please try again or contact <a mailto=\\\"cs@fancy.com\\\">cs@fancy.com</a>.\");\n                    }\n\n                    if (historyData.initialPageIsArticlePage) {\n                        location.href = '/';\n                    } else {\n                        dispatch(closeOverlay());\n                    }\n                });\n        }\n    };\n}\n\n// TODO: make unified eventemitter interface after all\nfunction onLoadArticle(article) {\n    const MPArgs = { article_id: article.id };\n    const currentLocationArgPair = getLocationArgPairs('utm');\n    if (currentLocationArgPair) {\n        MPArgs.utm = currentLocationArgPair[1];\n    }\n    MP('View Article Detail', MPArgs);\n}\n\nwindow.___D = () => {\n    return store.getState();\n};\n","    import C from './action-constants';\n\n\n// Action on requesting article starts\nexport function requestArticle(pendingID) {\n    return {\n        type: C.REQUEST_ARTICLE,\n        status: 'request',\n        pendingID\n    };\n}\n\n// Action on requesting article fails\nexport function requestArticleFail(/*lastRequestFailedArticleID*/) {\n    return {\n        type: C.REQUEST_ARTICLE_FAILURE,\n        status: 'failed'\n    };\n}\n\n// action on loading request result\nexport function loadArticle(ID, data) {\n    // FIXME: should we do this here?\n    const title = data.name;\n    if (title) {\n        document.title = `Fancy | ${title}`;\n    }\n\n    return {\n        type: C.LOAD_ARTICLE,\n        status: 'idle',\n        ID,\n        data\n    };\n}\n\n// Action on close overlay\nexport function openArticle() {\n    return {\n        type: C.OPEN_ARTICLE\n    };\n}\n\n// Action on close overlay\nexport function closeArticle() {\n    return {\n        type: C.CLOSE_ARTICLE,\n        ID: null,\n        pendingID: null,\n        article: null\n    };\n}\n\nexport function updateAppContext(contextObject) {\n    return {\n        type: C.UPDATE_APP_CONTEXT,\n        context: contextObject\n    };\n}\n","// App state that does not usually change during app lifecycle. (i.e. Login state)\n// import assign from 'object-assign';\n\n// module-level login state object and setter\nconst state = { viewer: {} };\nexport default state;\n\n/*\nexport function statify(config) {\n    assign(state, config);\n    state.loginNeededAttr = config.loggedIn ? {} : {'data-require_login': \"true\"};\n}\n*/\n\nexport function updateState(k, v) {\n    state[k] = v;\n}\n","import { index } from 'fancyutils';\n\n// Cache bucket\nexport class ArticleCache {\n    articles = {};\n    count = 0;\n    static ARTICLES = 'articles';\n\n    exists = (id, type, ignoreCralwed) => {\n        const cac = this.get(id, type);\n        var existence = cac != null && typeof cac === 'object';\n        if (ignoreCralwed) {\n            existence = existence && cac.isCrawled !== true;\n        }\n        return existence;\n    }\n\n    // resolver function\n    _get = (id) => {\n        return this[ArticleCache.ARTICLES][id] || null;\n    }\n\n    get = (id, type = ArticleCache.ARTICLES) => {\n        const cac = this[type][id] || this.getCrawled(id, type);\n        return cac;\n    }\n\n    getCrawled = (id, type) => {\n        const cac = this[type][id];\n        if (cac && cac.isCrawled) {\n            return cac;\n        } else {\n            return null;\n        }\n    }\n\n    add = (id, data, type) => {\n        // to add, cache should not be exist or crawled one\n        const cac = this[type][id];\n        if (\n            cac == null || \n            cac.isCrawled === true\n        ) {\n            this[type][id] = data;\n            this.count += 1;\n        } else {\n            console.warn('cache.add(): Cache overwrite');\n        }\n    }\n\n    remove = (id, type) => {\n        if (this[type][id]) {\n            delete this[type][id];\n            this.count -= 1;\n        } else {\n            console.warn('cache.remove(): Non-existing cache removal');\n        }\n    }\n\n    // selector = 'a.b.c'\n    update = (id, type = ArticleCache.ARTICLES, selector, value) => {\n        if (selector == null) {\n            console.warn('ArticleCache#update(): selector is empty');\n            return;\n        }\n        const t = this.get(id, type);\n        if (t) {\n            index(t, selector, value);\n        }\n    }\n\n    sweep() {\n        // TODO: should sweep cache if too many cache added by looking `cache.count`\n    }\n}\n\nexport const cache = new ArticleCache();\n","import React, { Component } from 'react';\nimport { isPlainLeftClick } from 'fancyutils';\n\nimport { LinkTypes, transition } from '../container/routeutils';\n\n\nexport default class ArticleCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n\n        this.handleLinkClick = _.throttle(this.handleLinkClick, 500);\n    }\n\n    handleLinkClick = (event) => {\n        event.stopPropagation();\n        if (isPlainLeftClick(event)) {\n            event.preventDefault();\n\n            const { html_url } = this.props;\n            transition(html_url, LinkTypes.Timeline);\n        }\n    }\n\n    componentWillUnmount() {\n        this.unmounted = true;\n    }\n\n    render() {\n        const { id, cover_image, title, url, tagline } = this.props;\n        \n        return (\n            <div className=\"article_item detail\">\n              <a href={url} >\n                <span className=\"cover\">\n                  { cover_image &&\n                  <img src=\"/_ui/images/common/blank.gif\" style={{backgroundImage: `url(${cover_image.url})`}}/>\n                  }\n                  { !cover_image &&\n                    <img src=\"/_ui/images/common/blank.gif\"/>\n                  }\n                </span>\n                <span className=\"title\">{title}</span>\n                <span className=\"description\">{tagline}</span>\n              </a>\n            </div>\n        );\n    }\n}","import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { MP, getConciseNumberString } from 'fancyutils';\nimport { Display } from 'fancymixin';\n\nimport { FancyStatus } from '../config';\nimport { cache } from '../cache';\nimport { onArticleFancyButtonUpdate } from '../SyncedContext';\n\nexport function handleProfileMouseOver(event) {\n    const $profile = $(event.currentTarget).find('em');\n    $profile.css('margin-left', `${-($profile.width() / 2) - 10}px`);\n}\n\nconst FancydUser = ({ user = {}, display, isViewer }) => (\n    <a href={user.html_url}\n       className={classnames(\"user\", { _viewer: isViewer })}\n       onMouseOver={handleProfileMouseOver}\n       style={display}>\n        <img src=\"/_ui/images/common/blank.gif\"\n             style={{ backgroundImage: `url(${user.image_url || user.profile_image_url})`}} />\n        <em>{user.fullname || user.full_name}</em>\n    </a>\n);\n\nconst bgXPosSequence = [0, -54, -108, -163, -218, -272, -327, -436, -490, -545, -599, -654, -708, -763, -817, -872, -926, -981, -1035, -1144, -1199, -1253, -1308, -1417, -1471];\n\nfunction isUserEqual(a, b) {\n    if (a == null || b == null) {\n        return false;\n    }\n    return a.id === b.id;\n}\n\nfunction _handleFancydStateOnLoadArticle(slug, { fancyd, save_count }, stateSetter = _ => _) {\n    onArticleFancyButtonUpdate(slug, fancyd, getConciseNumberString(save_count));\n    stateSetter({\n        fancyd,\n        save_count,\n        loading: false,\n        fancyStatus: FancyStatus.Idle,\n    })\n}\n\nfunction getFancyStatus(nextFancydState) {\n    return nextFancydState ? FancyStatus.Addition : FancyStatus.Removal;\n}\nfunction getCompletionIdleStatus(currentFancyState) {\n    const prevFancyState = !currentFancyState;\n    return prevFancyState ? FancyStatus.AfterRemoval : FancyStatus.AfterAddition;\n}\nfunction getNextFancydCount(nextFancyd, currentFancydCount) {\n    if (nextFancyd === true) {\n        return currentFancydCount + 1;\n    } else {\n        return currentFancydCount - 1;\n    }\n}\nfunction toggleFancy(article, currentState, stateSetter = _ => _) {\n    const { fancyd, save_count, loading } = currentState;\n    const nextFancyd = !fancyd;\n    const nextFancydCount = getNextFancydCount(nextFancyd, save_count);\n    \n    if (!loading) {\n        stateSetter({\n            fancyd: nextFancyd, loading: true, fancyStatus: getFancyStatus(nextFancyd)\n        });\n\n        $.ajax({\n            type: 'POST',\n            url: '/articles/save.json',\n            data: {\n                article_id: article.id,\n                action: nextFancyd ? 'save':'unsave',\n            }\n        })\n        .done(function(json){\n            if (json.article_id && json.saved === !fancyd) {\n                // Completing fancy\n                \n                cache.update(article.slug, undefined, 'saved', nextFancyd);\n                cache.update(article.slug, undefined, 'save_count', nextFancydCount);\n                onArticleFancyButtonUpdate(article.slug, nextFancyd, getConciseNumberString(nextFancydCount));\n                \n                stateSetter({\n                    loading: false, fancyd: nextFancyd, save_count: nextFancydCount, fancyStatus: getCompletionIdleStatus(nextFancyd)\n                });\n            } else {\n                // cancelling fancy\n                stateSetter({ loading: false, fancyd, save_count, fancyStatus: getFancyStatus(fancyd) });\n            }\n        })\n        .fail(function() {\n            // cancelling fancy\n            stateSetter({ loading: false, fancyd, save_count, fancyStatus: getFancyStatus(fancyd) });\n        });\n    }\n}\n\nexport class FancydUsers extends Component {\n    _getInitialState() {\n        return {\n            fancyAnimation: false,\n            // button state\n            fancyd: null,\n            loading: false,\n            save_count: null,\n            fancyStatus: FancyStatus.Idle, // fancyStatus = 'Idle', { Idle | Addition | Removal | After- } - Fancy'd status for animation control\n        };\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = this._getInitialState();\n        this.fancyBGAnimationRef = element => {\n            this.fancyBGAnimation = element;\n        }\n    }\n\n    getFancydCountString = () => {\n        const { save_count } = this.state;\n        return save_count != null ? getConciseNumberString(save_count, 0) : '0';\n    }\n\n    animateFancyBG = (frame) => {\n        if (frame === undefined) {\n            this.animateFancyBG(0);\n        } else if (frame < bgXPosSequence.length) {\n            // Special branching due to misposition in background\n            var xPos = bgXPosSequence[frame];\n            $(this.fancyBGAnimation).css('background-position-x', `${xPos}px`);\n            setTimeout(() => { this.animateFancyBG(frame + 1) }, 10);\n        } else if (frame >= bgXPosSequence.length) {\n            this.setState({ fancyAnimation: false });\n        }\n    }\n\n    getFancyduserDisplay = (user, index, totalLength) => {\n        const {\n            appContext: { viewer },\n        } = this.props;\n        const {\n            fancyd,\n            fancyStatus,\n        } = this.state;\n\n        const first = index === 0;\n        const last = index === totalLength - 1;\n\n        var display;\n        if (fancyStatus === FancyStatus.AfterAddition || fancyStatus === FancyStatus.Addition) {\n            // designer satisfaction 1)\n            if (totalLength <= 8) {\n                display = Display.Inline;\n            } else {\n                if (first) {\n                    display = Display.Inline;\n                } \n            }\n        } else if (fancyStatus === FancyStatus.AfterRemoval || fancyStatus === FancyStatus.Removal) {\n            if (first) {\n                display = Display.None;\n            } else if (last) {\n                display = Display.Inline;\n            }\n        }\n        // designer satisfaction 2) https://app.asana.com/0/86925821949642/161445424426526\n        const indexLimit = 8;\n        if (\n            (fancyStatus === FancyStatus.AfterAddition ||\n             fancyStatus === FancyStatus.Addition ||\n             (fancyd && fancyStatus === FancyStatus.Idle)\n            ) &&\n            index > indexLimit\n        ) {\n            display = Display.None;\n        }else if (\n            fancyStatus === FancyStatus.Removal \n            &&\n            index >= indexLimit\n        ) {\n            display = Display.None;\n        }\n\n        if (fancyStatus === FancyStatus.Idle &&\n            !fancyd &&\n            isUserEqual(user, viewer)\n        ) {\n            display = Display.None;\n        }\n\n        return display;\n    }\n\n    toggleFancy = () => {\n        toggleFancy(this.props.article, this.state, ns => { this.setState(ns) });\n    }\n\n    handleFancydStateOnLoadArticle = (article) => {\n        if (article == null) {\n            article = this.props.article;\n        }\n        _handleFancydStateOnLoadArticle(article.slug, { fancyd: article.saved, save_count: article.save_count  }, ns => { this.setState(ns); });\n    }\n\n    handleFancyClick = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const { article } = this.props;\n        if (!this.props.appContext.loggedIn) {\n            window.require_login && window.require_login(null, 'fancy_article', article.id);\n            return;\n        }\n        const { fancyAnimation, fancyd, loading } = this.state;\n        if (loading) {\n            return;\n        }\n        if (!fancyd && !fancyAnimation) {\n            this.setState({ fancyAnimation: true }, _ => { this.animateFancyBG(); });\n        }\n\n        if (!fancyd) {\n            MP('Fancy', { article_id: article.id });\n        } else {\n            MP('Unfancy', { article_id: article.id });\n        }\n\n        this.toggleFancy();\n    }\n\n    componentDidMount() {\n        this.handleFancydStateOnLoadArticle();\n    }\n\n    componentDidUpdate(prevProps) {\n        const { article } = prevProps;\n        const np = this.props\n        // Thing has been updated.\n        if (article.id !== np.article.id || article.isCrawled !== np.article.isCrawled) {\n            this.handleFancydStateOnLoadArticle(article);\n        }\n    }\n\n    render() {\n        const {\n            appContext: { loggedIn, viewer },\n            article: { saved_users, user },\n        } = this.props;\n        const {\n            fancyd,\n            fancyAnimation,\n            fancyStatus,\n        } = this.state;\n\n        const fancydUsers = [\n            loggedIn && viewer,\n            loggedIn && !isUserEqual(viewer, user) && user\n        ]\n        .concat(\n            saved_users &&\n            saved_users.filter(fancydUser => !isUserEqual(fancydUser, user) &&\n                                              !isUserEqual(fancydUser, viewer))\n        )\n        .filter(e => e);\n\n        var fancydUserAnimClass;\n        if (fancyStatus === FancyStatus.Addition) {\n            fancydUserAnimClass = \"add\";\n        } else if (fancyStatus === FancyStatus.Removal) {\n            fancydUserAnimClass = \"remove\";\n        }\n\n        // designer satisfaction 1)\n        // If user is less than 2 we need to apply special class.\n        // In this way dont owner profile dont get 'consumed': https://app.asana.com/0/86925821949642/173945332708784\n        const userCountSufficiency = fancydUsers.length <= 2 ? '_insuff' : '_suff';\n\n        return (\n            <div className=\"like\">\n                <span className=\"count\">\n                    <a onClick={this.handleFancyClick}\n                       className={classnames(\"button button-static fancy _count\", { fancyd, loading: fancyAnimation })}>\n                        <span ref={this.fancyBGAnimationRef}>\n                            <i />\n                        </span>{this.getFancydCountString()}\n                    </a>\n                    <span className=\"_fancyd\" />\n                </span>\n                <span className={classnames(\"fancyd_user\", fancydUserAnimClass, userCountSufficiency)}>\n                    {fancydUsers.map((user, index) => {\n                        const isViewer = isUserEqual(user, viewer);\n                        return (\n                            <FancydUser key={index}\n                                        user={user}\n                                        display={this.getFancyduserDisplay(user, index, fancydUsers.length)}\n                                        isViewer={isViewer} />\n                        );\n                    })}\n                </span>\n            </div>\n        );\n    }\n}\n","import React, { Component } from \"react\";\nimport { convertThingsV1ToRest } from \"fancyutils\";\n\nimport ThingCard from \"./ThingCard\";\nimport ArticleCard from \"./ArticleCard\";\nimport { cache } from \"../cache\";\n\n\nexport class ThingList extends Component {\n    lastarticleID = null;\n    state = {\n        showShare: false,\n        things: []\n    };\n\n    componentDidMount() {\n        // Initial loading\n        this.updateThingList(this.props.article.id, true);\n        const things = convertThingsV1ToRest(this.props.article.things);\n        this.setState({ things: things });\n\n        this.lastarticleID = this.props.article.id;\n    }\n\n    componentDidUpdate() {\n        const nextProps = this.props\n        // Article has changed, reset things.\n        if (this.lastarticleID !== nextProps.article.id) {\n            const idCopy = nextProps.article.id;\n            this.lastarticleID = idCopy;\n            this.updateThingList(nextProps.article.id, true);\n            const things = convertThingsV1ToRest(nextProps.article.things);\n            this.setState({ things: things });\n        }\n    }\n\n    componentWillUnmount() {\n        this.unmounted = true;\n    }\n\n    logExposed = (things) => {\n        if (typeof window.LogExposed == \"undefined\") return;\n        things.forEach(thing => {\n            window.LogExposed.addLog(thing.id + \"\", \"article\");\n        });\n    }\n\n    updateThingList = (articleID) => {\n        if (articleID == null) {\n            return;\n        }\n        $.ajax({\n            type: \"get\",\n            url: `/rest-api/v1/articles/${articleID}/items`,\n        })\n            .done(response => {\n                if (!this.unmounted) {\n                    const things = convertThingsV1ToRest(response.article_items).map(t => {\n                        if (window.isWhitelabel && t.sales) {\n                            const url = `${t.html_url}`\n                            t.url = url\n                            t.html_url = url\n                        }\n                        return t\n                    })\n                    this.logExposed(things);\n                    this.setState({ things: things });\n                }\n            })\n            .fail(function(xhr) {\n                console.warn(\"updateThingList():\", xhr);\n            });\n    }\n\n    render() {\n        const { article, appContext, appContext: { loggedIn }, hasPagination } = this.props;\n        const { things } = this.state;\n\n        const thingsHeader = (article.options && article.options.item_header) || null;\n\n        return (\n            <div id=\"content\" className={`content ${things.length === 0 ? \"_empty\" : \"\"}`}>\n                {thingsHeader && <h3>{thingsHeader}</h3>}\n                {things.length > 0 ? (\n                    <MaybePaginationWindow hasPagination={hasPagination} length={things.length}>\n                        {things &&\n                            things.map((thing, idx) => (\n                                <ThingCard\n                                    itemIdx={idx}\n                                    itemType={\"article\"}\n                                    loggedIn={loggedIn}\n                                    key={`timeline-recently-${idx}`}\n                                    onDelete={this.handleDelete}\n                                    viewer={this.props.appContext.viewer}\n                                    appContext={appContext}\n                                    showDelete={false}\n                                    {...thing}\n                                />\n                            ))}\n                    </MaybePaginationWindow>\n                ) : null}\n            </div>\n        );\n    }\n}\n\nexport class MaybePaginationWindow extends Component {\n    state = {\n        page: 0\n    }\n\n    handlePrevClick = (e) => {\n        e.preventDefault();\n        const minPage = 0;\n        this.setState({ page: Math.max(this.state.page - 1, minPage) });\n    }\n\n    handleNextClick = (e) => {\n        e.preventDefault();\n        const maxPage = Math.floor(this.props.length / 4) - 1;\n        this.setState({ page: Math.min(this.state.page + 1, maxPage) });\n    }\n\n    render() {\n        const { hasPagination, children } = this.props;\n        const style = {};\n        if (hasPagination) {\n            style.transform = `translateX(${ -101 * this.state.page }%)`;\n        }\n        const stream = (\n            <ol className=\"stream after\" style={style}>{children}</ol>\n        );\n\n        if (hasPagination) {\n            return (\n                <div className=\"itemSlide\">\n                    <div className=\"itemSlideWrap\">\n                        {stream}\n                    </div>\n                    <a href=\"#\" className=\"prev\" onClick={this.handlePrevClick}>Prev</a>\n                    <a href=\"#\" className=\"next\" onClick={this.handleNextClick}>Next</a>\n                </div>\n            );\n        } else {\n            return stream;\n        }\n    }\n}\n    \n\nexport class ArticleList extends Component {\n    lastarticleID = null;\n    state = {\n        articles: [],\n        page: 1\n    };\n\n    componentDidMount() {\n        // Initial loading\n        this.updateArticleList(this.props.article.id);\n        this.lastarticleID = this.props.article.id;\n    }\n\n    componentDidUpdate() {\n        const nextProps = this.props;\n        // Article has changed, reset articles.\n        if (this.lastarticleID !== nextProps.article.id) {\n            const idCopy = nextProps.article.id;\n            this.lastarticleID = idCopy;\n            this.updateArticleList(nextProps.article.id, true);\n        }\n    }\n\n    componentWillUnmount() {\n        this.unmounted = true;\n    }\n\n    updateArticleList = (articleID) => {\n        if (articleID == null) {\n            return;\n        }\n        $.ajax({\n            type: \"get\",\n            url: window.isWhitelabel ? \"/rest-api/v1/articles?limit=4&concise=true\" : \"/rest-api/v1/articles?featured\"\n        })\n            .done(response => {\n                if (!this.unmounted) {\n                    var articles = response.articles.filter(article => article.id !== articleID);\n                    this.setState({ articles: articles });\n                }\n            })\n            .fail(function(xhr) {\n                console.warn(\"updateArticleList():\", xhr);\n            });\n    }\n\n    handlePrevClick = (event) => {\n        event.preventDefault();\n        var $this = $(event.target);\n        if ($this.hasClass(\"disabled\")) return;\n        this.setState({ page: this.state.page - 1 });\n    }\n\n    handleNextClick = (event) => {\n        event.preventDefault();\n        var $this = $(event.target);\n        if ($this.hasClass(\"disabled\")) return;\n        this.setState({ page: this.state.page + 1 });\n    }\n\n    getLeftOffset = () => {\n        const { articles, page } = this.state;\n        const left = (page - 1) * -860 - (page > 1 ? 4 : 0);\n        const lastPageNum = ((articles.length / 4) | 0) + ((articles.length % 4) > 0 ? 1 : 0)\n        if (articles.length > 4 && page >= lastPageNum) {\n            const CardWidth = 205\n            const CardMargin = 10\n            const CardContainerWidth = 970;\n            const CardContainerPadding = 14;\n            const max = ((articles.length - 1) * CardMargin + articles.length * CardWidth) - CardContainerWidth + (CardContainerPadding * 2);\n    \n            return `${Math.max(left, -max)}px`;\n        } else {\n            return left;\n        }\n    }\n\n    render() {\n        const { appContext } = this.props;\n        const { articles, page } = this.state;\n        var maxPage = Math.ceil(articles.length / 4);\n        var prevDisabled = page == 1;\n        var nextDisabled = page == maxPage;\n\n        return (\n            <div id=\"sidebar\">\n                <div className=\"wrapper recommend-article\">\n                    <h3 className=\"stit\">MORE ARTICLES</h3>\n                    {articles.length ? (\n                        <div className=\"article_wrap\" style={{ left: this.getLeftOffset() }}>\n                            {articles &&\n                                articles.map((article, idx) => (\n                                    <ArticleCard key={article.id} itemIdx={idx} appContext={appContext} {...article} />\n                                ))}\n                        </div>\n                    ) : (\n                        <div />\n                    )}\n                    {articles.length > 4 && (\n                        <div className=\"paging\">\n                            <a\n                                href=\"#\"\n                                className={`${prevDisabled ? \"disabled\" : \"\"} prev`}\n                                onClick={this.handlePrevClick}>\n                                Prev\n                            </a>\n                            <a\n                                href=\"#\"\n                                className={`${nextDisabled ? \"disabled\" : \"\"} next`}\n                                onClick={this.handleNextClick}>\n                                Next\n                            </a>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport class AdminHeader extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            is_active: props.article.is_active\n        };\n    }\n\n    handleLiveClick = event => {\n        event.preventDefault();\n        const self = this;\n        const $this = $(event.target);\n        const { article } = this.props;\n\n        let message = `Are you sure you want to set ${article.title} live on ${\n            window.isWhitelabel ? \"Gear\" : \"Fancy\"\n        }?`;\n        if ($this.hasClass(\"on\"))\n            message = `Are you sure you want to hide ${article.title} from ${window.isWhitelabel ? \"Gear\" : \"Fancy\"}?`;\n        const original_labels = window.alertify.labels;\n        window.alertify.set({ labels: { ok: $this.hasClass(\"on\") ? \"Hide\" : \"Set Live\", cancel: \"Cancel\" } });\n        window.alertify.confirm(message, function(yes) {\n            if (yes) {\n                var is_active = !$this.hasClass(\"on\");\n                $.post(\n                    \"/_admin/articles/update_active.json\",\n                    { article_id: article.id, is_active: is_active },\n                    function(json) {\n                        if (json.error) {\n                            window.alertify.alert(json.error);\n                        } else {\n                            window.alertify.alert(is_active ? \"Activated\" : \"Deactivated\");\n                            self.setState({ is_active: is_active });\n                            cache.update(self.props.article.slug, undefined, \"is_active\", is_active);\n                        }\n                    }\n                );\n            }\n        });\n        window.alertify.set({ labels: original_labels })\n    };\n\n    handleEditArticleClick = (e) => {\n        e.preventDefault();\n        const { article } = this.props;\n        window.open(`/_admin/articles/edit?id=${article.id}`);\n    }\n\n\n    render() {\n        const { is_active } = this.state;\n\n        return (\n            <div className=\"admin-header\">\n                <div className=\"inner\">\n                    <h2>Admin Panel</h2>\n                    <a onClick={this.handleEditArticleClick}>\n                        Edit Article\n                    </a>\n                    <label>Live</label>\n                    <button className={`${is_active ? \"on\" : \"\"} btn-switch`} onClick={this.handleLiveClick} />\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport function initGallery(container) {\n\n    /*! Hammer.JS - v2.0.8 - 2016-04-23\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n!function(a,b,c,d){\"use strict\";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e=\"DEPRECATED METHOD: \"+c+\"\\n\"+d+\" AT \\n\";return function(){var c=new Error(\"get-stack-trace\"),d=c&&c.stack?c.stack.replace(/^[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+at\\s+/gm,\"\").replace(/^Object.<anonymous>\\s*\\(/gm,\"{anonymous}()@\"):\"Unknown Stack Trace\",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit(\"hammer.input\",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),\"identifier\",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),\"identifier\",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return[\"auto\",\"manipulation\",\"pan-y\",\"pan-x\",\"pan-x pan-y\",\"none\"].forEach(function(d){b[d]=c?a.CSS.supports(\"touch-action\",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?\"cancel\":a&qb?\"end\":a&pb?\"move\":a&ob?\"start\":\"\"}function $(a){return a==Ma?\"down\":a==La?\"up\":a==Ja?\"left\":a==Ka?\"right\":\"\"}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||\"\"}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent(\"Event\");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"],na=b.createElement(\"div\"),oa=\"function\",pa=Math.round,qa=Math.abs,ra=Date.now;la=\"function\"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError(\"Cannot convert undefined or null to object\");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},\"extend\",\"Use `assign`.\"),ta=h(function(a,b){return sa(a,b,!0)},\"merge\",\"Use `assign`.\"),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa=\"ontouchstart\"in a,xa=u(a,\"PointerEvent\")!==d,ya=wa&&va.test(navigator.userAgent),za=\"touch\",Aa=\"pen\",Ba=\"mouse\",Ca=\"kinect\",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=[\"x\",\"y\"],Ra=[\"clientX\",\"clientY\"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta=\"mousedown\",Ua=\"mousemove mouseup\";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa=\"pointerdown\",Ya=\"pointermove pointerup pointercancel\";a.MSPointerEvent&&!a.PointerEvent&&(Xa=\"MSPointerDown\",Ya=\"MSPointerMove MSPointerUp MSPointerCancel\"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace(\"ms\",\"\"),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,\"pointerId\");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a=\"touchstart\",_a=\"touchstart touchmove touchend touchcancel\";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb=\"touchstart touchmove touchend touchcancel\";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,\"touchAction\"),fb=eb!==d,gb=\"compute\",hb=\"auto\",ib=\"manipulation\",jb=\"none\",kb=\"pan-x\",lb=\"pan-y\",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(\" \"))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,\"recognizeWith\",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,\"dropRecognizeWith\",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,\"requireFailure\",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,\"dropRequireFailure\",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?\"in\":\"out\";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:\"press\",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+\"up\",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:\"swipe\",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION=\"2.0.8\",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},[\"rotate\"]],[fa,{direction:Na}],[ba,{direction:Na},[\"swipe\"]],[ga],[ga,{event:\"doubletap\",taps:2},[\"tap\"]],[da]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,\"add\",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,\"remove\",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb=\"undefined\"!=typeof a?a:\"undefined\"!=typeof self?self:{};wb.Hammer=ha,\"function\"==typeof define&&define.amd?define(function(){return ha}):\"undefined\"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,\"Hammer\");\n\n    const $this = $(container);\n    $this.find(\".description .gallery li:first-child\").addClass(\"active\");\n    $this.find(\".description .gallery .paging a:first-child\").addClass(\"current\");\n    $this.find(\".description .gallery img\").on('load', () => {\n        let totalW = 104;\n        for (let i = 0; i < $this.find(\".description .gallery li\").length; i++) {\n            totalW = totalW + $this.find(\".description .gallery li:eq(\" + i + \") img\").width() + 20;\n            $this.find(\".description .gallery .photo-list\").width(totalW);\n        }\n    });\n    $this.find(\".description .gallery\").each((i, e) => {\n        const { Hammer } = window;\n        (new Hammer(e)).on('swipe', function({ type, direction }) {\n            console.log(arguments[0])\n            if (type === 'swipe') {\n                if (direction === Hammer.DIRECTION_LEFT) {\n                    $(e).find('.paging .prev')[0].click();\n                } else if (direction === Hammer.DIRECTION_RIGHT) {\n                    $(e).find('.paging .next')[0].click();\n                }\n            }\n        })\n    });\n}\n","import React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport { numberFormat, isPlainLeftClick } from \"fancyutils\";\nimport { MoreShare, MoreShareFacade } from \"common-components\";\n\nimport appState from \"../appstate\";\nimport { addItemToCart, logAddCartMixpanel } from \"../../overlay-thing/components/map.cart\";\nimport { getSafeNameProp, getThingName } from \"./map\";\nimport { LinkTypes, transition } from \"../container/routeutils\";\nimport { FancydUsers } from \"./ThingFancydUsers\";\nimport { OaContainer } from \"../container/entry-events\";\n\nconst itemTraits = {\n    article: {\n        utm: \"article\",\n        section: \"items\",\n        via: \"article\",\n    },\n    similar: {\n        section: \"recommended\",\n        utm: \"rec\",\n        via: \"thing more\",\n    },\n    recently: {\n        section: \"recently viewed\",\n        utm: \"rv\",\n        via: \"thing more\",\n    },\n};\n\nexport default class ThingCard extends Component {\n    static defaultProps = {\n        showDelete: true,\n    };\n\n    state = {\n        fancydCount: 0,\n        quantity: 1,\n        optionID: null,\n        showCart: false,\n        popupOpened: false,\n    };\n\n    constructor(props) {\n        super(props);\n        this.handleLinkClick = _.throttle(this.handleLinkClick, 500);\n    }\n\n    componentDidMount() {\n        this.setState({ fancydCount: this.props.fancyd_count || 0 });\n    }\n\n    componentWillUnmount() {\n        this.unmounted = true;\n    }\n\n    handleCartAddition = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.addToCart();\n    };\n\n    addToCart() {\n        if (!appState.loggedIn) {\n            window.require_login && window.require_login();\n            return;\n        }\n        const { id, itemType } = this.props;\n        const { quantity } = this.state;\n\n        const sales = this.getSales();\n        const saleAvailable = this.isSaleAvailable();\n        const saleOptionExists = this.isSaleOptionExists();\n        const option = this.getSaleOption();\n\n        if (!saleAvailable || this.state.loading) {\n            return;\n        }\n        if (isNaN(quantity) || quantity <= 0) {\n            alert(gettext(\"Please select a valid quantity.\"));\n            return;\n        }\n\n        const param = {\n            seller_id: sales.seller.id, // sisi\n            thing_id: id, // tid\n            sale_item_id: sales.sale_id, // sii\n            quantity,\n        };\n        if (saleOptionExists && option) {\n            param.option_id = option.id;\n        }\n\n        const traits = itemTraits[itemType];\n        const title = getThingName(this.props);\n        this.setState({ loading: true }, () => {\n            const log = {\n                salesID: sales.sale_id,\n                utm: traits.utm,\n                section: traits.section,\n                via: traits.via,\n            };\n            if (option) {\n                log.saleOptionID = option.id;\n            }\n            logAddCartMixpanel(log);\n            // ga shit\n            const discounting = sales && sales.discount_percentage !== \"0\";\n            const meta = {\n                title,\n                price: discounting ? sales.retail_price : sales.deal_price,\n                brand_name: sales.seller.brand_name,\n            };\n            addItemToCart(\n                param,\n                () => {\n                    if (!this.unmounted) {\n                        this.setState({ loading: false });\n                    }\n                },\n                meta\n            );\n        });\n    }\n\n    handleQuickCartToggle = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const saleAvailable = this.isSaleAvailable();\n        const saleOptionExists = this.isSaleOptionExists();\n        if (saleAvailable) {\n            if (saleOptionExists) {\n                this.setState({ showCart: !this.state.showCart });\n            } else {\n                this.addToCart();\n            }\n        } else {\n            this.setState({ showCart: !this.state.showCart });\n        }\n    };\n\n    isSaleAvailable = () => {\n        const { sales_available } = this.props;\n        const sales = this.getSales();\n        if (sales) {\n            return sales_available && sales.quantity !== 0;\n        } else {\n            return false;\n        }\n    };\n\n    getSaleOption = () => {\n        const saleOptionExists = this.isSaleOptionExists();\n        const sales = this.getSales();\n        if (sales && saleOptionExists) {\n            const optionID = this.state.optionID || sales.options[0].id;\n            const option = sales.options.filter((option) => option.id === optionID)[0] || null;\n            return option;\n        } else {\n            return null;\n        }\n    };\n\n    isSaleOptionExists = () => {\n        const sales = this.getSales();\n        if (sales) {\n            return sales.has_options === true;\n        } else {\n            return false;\n        }\n    };\n\n    isSaleOptionAvailable = () => {\n        const option = this.getSaleOption();\n        if (option) {\n            return option.available_for_sale === true && option.quantity !== 0;\n        } else {\n            return false;\n        }\n    };\n\n    getSales = () => {\n        return this.props.sales;\n    };\n\n    getFancydCount = () => {\n        return _.isNumber(this.state.fancydCount) ? this.state.fancydCount : this.props.fancyd_count;\n    };\n\n    handleFancydCount = (diff) => {\n        this.setState({\n            fancydCount: this.state.fancydCount + diff,\n        });\n    };\n\n    getQuantityRange = () => {\n        const saleOptionExists = this.isSaleOptionExists();\n        var max;\n        if (saleOptionExists && this.isSaleOptionAvailable()) {\n            max = this.getSaleOption().quantity;\n        } else if (this.isSaleAvailable()) {\n            max = this.getSales().quantity;\n        }\n        return max == null ? [\"1\"] : _.range(1, Math.min(10, max + 1));\n    };\n\n    handleOptionChange = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setState({ optionID: parseInt(event.target.value, 10), quantity: 1 });\n    };\n\n    handleOptionQuantityChange = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setState({ quantity: parseInt(event.target.value, 10) });\n    };\n\n    handleTrickClick = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setState({ showCart: false });\n    };\n\n    handleRecentlyDelete = () => {\n        $.post(\"/remove_recently_viewed_thing\", { thing_id: this.props.id }, (json) => {\n            if (!json || json.status_code !== 1) {\n                window.alertify.alert(`Sorry, failed to remove \"${this.props.name}\". Please retry.`);\n            } else {\n                this.props.onDelete(this.props);\n            }\n        }).fail(() => {\n            window.alertify.alert(`Sorry, failed to remove \"${this.props.name}\". Please retry.`);\n        });\n    };\n\n    handleLinkClick = (event) => {\n        event.stopPropagation();\n        if (isPlainLeftClick(event)) {\n            event.preventDefault();\n\n            if (!window.isWhitelabel) OaContainer.scrollToTop();\n\n            transition(this.html_url(), LinkTypes.Timeline);\n        }\n    };\n\n    handleShowSomething = (popupOpened) => {\n        this.setState({ popupOpened });\n    };\n\n    handleNotifySoldout = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!appState.loggedIn) {\n            window.require_login && window.require_login();\n            return;\n        }\n        const sales = this.getSales();\n        const params = { sale_item_id: sales.sale_id };\n        const waiting = this.getWaiting(sales);\n        if (waiting) {\n            params.remove = 1;\n        }\n\n        $.ajax({\n            type: \"post\",\n            url: \"/wait_for_product.json\",\n            data: params,\n            dataType: \"json\",\n        })\n            .done((json) => {\n                if (!json || json.status_code == null) {\n                    return;\n                }\n                if (json.status_code == 0 && json.message) {\n                    window.alertify.alert(json.message);\n                    return;\n                }\n                const waiting = params.remove ? false : true;\n                this.setState({ waiting });\n            })\n            .fail(function (json) {\n                if (json && json.message) {\n                    window.alertify.alert(json.message);\n                } else {\n                    window.alertify.alert(\"There was an error while processing your request. Please try again later.\");\n                }\n            });\n    };\n\n    getWaiting = () => {\n        const sales = this.getSales();\n        if (sales) {\n            if (this.state.waiting == null) {\n                return sales.waiting;\n            } else {\n                return this.state.waiting;\n            }\n        } else {\n            return false;\n        }\n    };\n\n    html_url = () => {\n        const { utm } = itemTraits[this.props.itemType] || {};\n        return `${this.props.html_url}${utm ? \"?utm=\" + utm : \"\"}`;\n    };\n\n    render() {\n        const { id, thumb_image_url_310, thumb_image_url_558, itemIdx, loggedIn, viewer, showDelete } = this.props;\n        const { showCart, loading, popupOpened } = this.state;\n        const html_url = this.html_url();\n\n        const sales = this.getSales();\n        const discounting = sales && sales.discount_percentage !== \"0\";\n        const waiting = this.getWaiting();\n\n        const saleAvailable = this.isSaleAvailable();\n        const saleOptionExists = this.isSaleOptionExists();\n        const saleOptionAvailable = this.isSaleOptionAvailable();\n\n        const showFrom =\n            sales && sales.max_price !== null && sales.min_price !== null && sales.max_price > sales.min_price;\n\n        return __Config.new_card ? (\n            <li className={classnames({ \"quick-cart\": loading, active: popupOpened || showCart })}>\n                <div className={classnames(\"figure-item new\", { toggled: showCart })}>\n                    <figure>\n                        <a\n                            href={html_url}\n                            rel={`thing-${id}`}\n                            onClick={this.handleLinkClick}\n                            data-prevent-overlay=\"true\">\n                            <span className=\"figure\">\n                                <img\n                                    src=\"/_ui/images/common/blank.gif\"\n                                    style={{ backgroundImage: `url(${thumb_image_url_558 || thumb_image_url_310})` }}\n                                />\n                            </span>\n                        </a>\n                        <div className=\"buttons\">\n                            <FancydUsers\n                                thing={this.props}\n                                appContext={this.props.appContext}\n                                displayCount={6}\n                                showFancydUser={false}\n                            />\n                            <MoreShareFacade\n                                objectType=\"thing\"\n                                objectId={id}\n                                loggedIn={loggedIn}\n                                title={getThingName(this.props)}\n                                viewerUsername={viewer.username}\n                                onShowSomething={this.handleShowSomething}\n                            />\n                        </div>\n                        <div\n                            className={classnames(\"show_cart\", { opened: showCart })}\n                            style={!sales ? { display: \"none\" } : undefined}>\n                            {sales && (\n                                <button\n                                    className=\"btn-cart nopopup\"\n                                    onClick={this.handleCartAddition}\n                                    disabled={!saleOptionAvailable}>\n                                    <em>Add to Cart</em>\n                                </button>\n                            )}\n                            <em className=\"sale-item-input\">\n                                <small\n                                    className=\"trick\"\n                                    style={{ display: showCart ? \"block\" : undefined }}\n                                    onClick={this.handleTrickClick}\n                                />\n                                {saleAvailable ? (\n                                    <span className=\"frm\">\n                                        {saleOptionExists && (\n                                            <select\n                                                name=\"option_id\"\n                                                id={`${id}-option_id`}\n                                                onChange={this.handleOptionChange}>\n                                                {sales.options.map((option, i) => (\n                                                    <option\n                                                        key={`other-item-${itemIdx}-saleoption-${i}`}\n                                                        value={option.id}>\n                                                        {option.option} -{\" \"}\n                                                        {!option.available_for_sale || option.quantity === 0\n                                                            ? gettext(\"Sold out\")\n                                                            : `$${numberFormat(option.deal_price, 0)}`}\n                                                    </option>\n                                                ))}\n                                            </select>\n                                        )}\n                                        <select\n                                            className=\"option\"\n                                            id={`${id}-quantity`}\n                                            name=\"quantity\"\n                                            disabled={!saleOptionAvailable}\n                                            onChange={this.handleOptionQuantityChange}>\n                                            {this.getQuantityRange().map((e, i) => (\n                                                <option key={`other-item-${itemIdx}-quantityOption-${i}`} value={e}>\n                                                    {e}\n                                                </option>\n                                            ))}\n                                        </select>\n                                        <button\n                                            className=\"add_to_cart btns-green-embo\"\n                                            onClick={this.handleCartAddition}\n                                            disabled={!saleOptionAvailable}>\n                                            {gettext(\"Add to Cart\")}\n                                        </button>\n                                    </span>\n                                ) : (\n                                    <span className=\"frm\">\n                                        <span className=\"notify-soldout\">Sorry, this item has sold out</span>\n                                        <button\n                                            className={classnames(\"btns-green-embo btn-notify\", {\n                                                subscribed: waiting,\n                                            })}\n                                            onClick={this.handleNotifySoldout}>\n                                            {waiting ? \"Subscribed\" : \"Notify me when available\"}\n                                        </button>\n                                    </span>\n                                )}\n                            </em>\n                        </div>\n                    </figure>\n                    <figcaption>\n                        <a\n                            href={html_url}\n                            className=\"title\"\n                            rel={`thing-${id}`}\n                            onClick={this.handleLinkClick}\n                            data-prevent-overlay=\"true\">\n                            <b className=\"title\" {...getSafeNameProp(this.props)} />\n                            {sales && (\n                                <span\n                                    className={`price ${discounting ? \"sales\" : \"\"} ${saleAvailable ? \"\" : \"soldout\"}`}>\n                                    {discounting && (\n                                        <small key=\"ThingCard2-price-deal\">\n                                            ${numberFormat(sales.retail_price, 0)}\n                                        </small>\n                                    )}\n                                    {showFrom ? (\n                                        <React.Fragment>\n                                            <em className=\"from\">from </em> ${numberFormat(sales.min_price, 0)}\n                                        </React.Fragment>\n                                    ) : (\n                                        `$\n                                        ${numberFormat(sales.deal_price, 0)}`\n                                    )}\n                                </span>\n                            )}\n                        </a>\n                    </figcaption>\n                    <a className=\"delete\" onClick={this.handleRecentlyDelete} />\n                </div>\n            </li>\n        ) : (\n            <li className={classnames({ \"quick-cart\": loading, active: popupOpened || showCart })}>\n                <div className={classnames(\"figure-item\", { toggled: showCart })}>\n                    <figure>\n                        <a href={html_url} rel={`thing-${id}`} onClick={this.handleLinkClick}>\n                            <span className=\"back\" />\n                            <img\n                                className=\"figure\"\n                                style={{ backgroundImage: `url(${thumb_image_url_310})` }}\n                                src=\"/_ui/images/common/blank.gif\"\n                            />\n                        </a>\n                    </figure>\n                    <figcaption>\n                        <span\n                            className={classnames(\"show_cart\", { opened: showCart })}\n                            style={{ display: sales ? null : \"none\" }}>\n                            {sales && (\n                                <button\n                                    className={`btn-cart nopopup ${discounting ? \"sales\" : \"\"} ${\n                                        saleAvailable ? \"\" : \"soldout\"\n                                    }`}\n                                    onClick={this.handleQuickCartToggle}>\n                                    <em>\n                                        {discounting\n                                            ? [\n                                                  <small key=\"ThingCard2-price-deal\">\n                                                      ${numberFormat(sales.retail_price, 0)}\n                                                  </small>,\n                                                  `$${numberFormat(sales.deal_price, 0)}`,\n                                              ]\n                                            : `$${numberFormat(sales.deal_price, 0)}`}\n                                    </em>\n                                </button>\n                            )}\n                            <em className=\"sale-item-input\">\n                                <small\n                                    className=\"trick\"\n                                    style={{ display: showCart ? \"block\" : null }}\n                                    onClick={this.handleTrickClick}\n                                />\n                                {saleAvailable ? (\n                                    <span className=\"frm\">\n                                        {saleOptionExists && (\n                                            <select\n                                                name=\"option_id\"\n                                                id={`${id}-option_id`}\n                                                onChange={this.handleOptionChange}>\n                                                {sales.options.map((option, i) => (\n                                                    <option\n                                                        key={`other-item-${itemIdx}-saleoption-${i}`}\n                                                        value={option.id}>\n                                                        {option.option} -{\" \"}\n                                                        {!option.available_for_sale || option.quantity === 0\n                                                            ? gettext(\"Sold out\")\n                                                            : `$${numberFormat(option.deal_price, 0)}`}\n                                                    </option>\n                                                ))}\n                                            </select>\n                                        )}\n                                        <select\n                                            className=\"option\"\n                                            id={`${id}-quantity`}\n                                            name=\"quantity\"\n                                            disabled={!saleOptionAvailable}\n                                            onChange={this.handleOptionQuantityChange}>\n                                            {this.getQuantityRange().map((e, i) => (\n                                                <option key={`other-item-${itemIdx}-quantityOption-${i}`} value={e}>\n                                                    {e}\n                                                </option>\n                                            ))}\n                                        </select>\n                                        <button\n                                            className=\"add_to_cart btns-green-embo\"\n                                            onClick={this.handleCartAddition}\n                                            disabled={!saleOptionAvailable}>\n                                            {gettext(\"Add to Cart\")}\n                                        </button>\n                                    </span>\n                                ) : (\n                                    <span className=\"frm\">\n                                        <span className=\"notify-soldout\">Sorry, this item has sold out</span>\n                                        <button\n                                            className={classnames(\"btns-green-embo btn-notify\", {\n                                                subscribed: waiting,\n                                            })}\n                                            onClick={this.handleNotifySoldout}>\n                                            {waiting ? \"Subscribed\" : \"Notify me when available\"}\n                                        </button>\n                                    </span>\n                                )}\n                            </em>\n                        </span>\n                        <a\n                            href={html_url}\n                            className=\"title\"\n                            rel={`thing-${id}`}\n                            onClick={this.handleLinkClick}\n                            {...getSafeNameProp(this.props)}\n                        />\n                        <span className={classnames(\"buttons\" /*, { 'no-cart': saleAvailable }*/)}>\n                            <FancydUsers thing={this.props} appContext={this.props.appContext} />\n                            <MoreShare\n                                objectType=\"thing\"\n                                objectId={id}\n                                loggedIn={loggedIn}\n                                title={getThingName(this.props)}\n                                viewerUsername={viewer.username}\n                                onShowSomething={this.handleShowSomething}\n                            />\n                        </span>\n                    </figcaption>\n                    {showDelete && <a className=\"delete\" onClick={this.handleRecentlyDelete} />}\n                </div>\n            </li>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { MP, getConciseNumberString } from 'fancyutils';\nimport { Display } from 'fancymixin';\n\nimport { FancyStatus } from '../config';\nimport { cache } from '../cache';\n\n\nexport function handleProfileMouseOver(event) {\n    const $profile = $(event.currentTarget).find('em');\n    $profile.css('margin-left', `${-($profile.width() / 2) - 10}px`);\n}\n\nconst FancydUser = ({ user = {}, display, isViewer }) => (\n    <a href={user.html_url}\n       className={classnames(\"user\", { _viewer: isViewer })}\n       onMouseOver={handleProfileMouseOver}\n       style={display}>\n        <img src=\"/_ui/images/common/blank.gif\"\n             style={{ backgroundImage: `url(${user.user_square_image_small || user.image_url})`}} />\n        <em>{user.full_name || user.fullname}</em>\n    </a>\n);\n\nfunction isUserEqual(a, b) {\n    if (a == null || b == null) {\n        return false;\n    }\n    return a.id === b.id;\n}\n\nconst bgXPosSequence = [0, -54, -108, -163, -218, -272, -327, -436, -490, -545, -599, -654, -708, -763, -817, -872, -926, -981, -1035, -1144, -1199, -1253, -1308, -1417, -1471];\n\nfunction _handleFancydStateOnLoadThing(thingID, { fancyd, fancyd_count }, stateSetter = _ => _) {\n    // onFancyButtonUpdate(thingID, fancyd, getConciseNumberString(fancyd_count));\n    stateSetter({\n        fancyd,\n        fancyd_count,\n        loading: false,\n        fancyStatus: FancyStatus.Idle,\n    })\n}\n\nfunction getFancyStatus(nextFancydState) {\n    return nextFancydState ? FancyStatus.Addition : FancyStatus.Removal;\n}\nfunction getCompletionIdleStatus(currentFancyState) {\n    const prevFancyState = !currentFancyState;\n    return prevFancyState ? FancyStatus.AfterRemoval : FancyStatus.AfterAddition;\n}\nfunction getNextFancydCount(nextFancyd, currentFancydCount) {\n    if (nextFancyd === true) {\n        return currentFancydCount + 1;\n    } else {\n        return currentFancydCount - 1;\n    }\n}\nfunction toggleFancy(thingID, currentState, stateSetter = _ => _) {\n    const { fancyd, fancyd_count, loading } = currentState;\n    const nextFancyd = !fancyd;\n    const nextFancydCount = getNextFancydCount(nextFancyd, fancyd_count);\n\n    if (!loading) {\n        stateSetter({\n            fancyd: nextFancyd, loading: true, fancyd_count: nextFancydCount, fancyStatus: getFancyStatus(nextFancyd)\n        });\n\n        $.ajax({\n            type: 'PUT',\n            url: `/rest-api/v1/things/${thingID}`,\n            data: {\n                fancyd: nextFancyd\n            }\n        })\n        .done(function(json){\n            if (json.id && json.fancyd === !fancyd) {\n                // Completing fancy\n                const nextFancydCount = (json.fancyd === true) ? (fancyd_count||0) + 1 : (fancyd_count||0) - 1;\n\n                cache.update(thingID, undefined, 'fancyd', nextFancyd);\n                cache.update(thingID, undefined, 'fancyd_count', nextFancydCount);\n                // onFancyButtonUpdate(thingID, nextFancyd, getConciseNumberString(nextFancydCount));\n\n                stateSetter({\n                    loading: false, fancyd: nextFancyd, fancyd_count: nextFancydCount, fancyStatus: getCompletionIdleStatus(nextFancyd)\n                });\n            } else {\n                // cancelling fancy\n                stateSetter({ loading: false, fancyd, fancyd_count, fancyStatus: getFancyStatus(fancyd) });\n            }\n        })\n        .fail(function() {\n            // cancelling fancy\n            stateSetter({ loading: false, fancyd, fancyd_count, fancyStatus: getFancyStatus(fancyd) });\n        });\n    }\n}\n\n// workaround for profile heads overflow on animation\nconst bigContainerStyle = { width: '285px' };\n\nexport class FancydUsers extends Component {\n    _getInitialState() {\n        return {\n            fancyAnimation: false,\n            // button state\n            fancyd: null,\n            loading: false,\n            fancyd_count: null,\n            fancyStatus: FancyStatus.Idle, // fancyStatus = 'Idle', { Idle | Addition | Removal | After- } - Fancy'd status for animation control\n        };\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = this._getInitialState();\n        this.fancyBGAnimationRef = element => {\n            this.fancyBGAnimation = element;\n        }\n    }\n\n    getFancydCountString = () => {\n        const { fancyd_count } = this.state;\n        return fancyd_count != null ? getConciseNumberString(fancyd_count, 0) : '0';\n    }\n\n    animateFancyBG = (frame) => {\n        if (frame === undefined) {\n            this.animateFancyBG(0);\n        } else if (frame < bgXPosSequence.length) {\n            // Special branching due to misposition in background\n            var xPos = bgXPosSequence[frame];\n            $(this.fancyBGAnimation).css('background-position-x', `${xPos}px`);\n            setTimeout(() => { this.animateFancyBG(frame + 1) }, 10);\n        } else if (frame >= bgXPosSequence.length) {\n            this.setState({ fancyAnimation: false });\n        }\n    }\n\n    getFancyduserDisplay = (user, index, totalLength) => {\n        const {\n            appContext: { viewer },\n            bigContainer,\n        } = this.props;\n        const {\n            fancyd,\n            fancyStatus,\n        } = this.state;\n\n        const first = index === 0;\n        const last = index === totalLength - 1;\n\n        var display;\n        if (fancyStatus === FancyStatus.AfterAddition || fancyStatus === FancyStatus.Addition) {\n            // designer satisfaction 1)\n            if (totalLength <= 2) {\n                display = Display.Inline;\n            } else {\n                if (first) {\n                    display = Display.Inline;\n                } \n            }\n        } else if (fancyStatus === FancyStatus.AfterRemoval || fancyStatus === FancyStatus.Removal) {\n            if (first) {\n                display = Display.None;\n            } else if (last) {\n                display = Display.Inline;\n            }\n        }\n        // designer satisfaction 2) https://app.asana.com/0/86925821949642/161445424426526\n        const indexLimit = bigContainer ? 6 : 5;\n        if (\n            (fancyStatus === FancyStatus.AfterAddition ||\n             fancyStatus === FancyStatus.Addition ||\n             fancyStatus === FancyStatus.Removal ||\n             (fancyd && fancyStatus === FancyStatus.Idle)\n            ) &&\n            index > indexLimit\n        ) {\n            display = Display.None;\n        }\n\n        if (fancyStatus === FancyStatus.Idle &&\n            !fancyd &&\n            isUserEqual(user, viewer)\n        ) {\n            display = Display.None;\n        }\n\n        return display;\n    }\n\n    toggleFancy = () => {\n        toggleFancy(this.props.thing.id, this.state, ns => { this.setState(ns) });\n    }\n\n    handleFancydStateOnLoadThing = (thing) => {\n        if (thing == null) {\n            thing = this.props.thing;\n        }\n        _handleFancydStateOnLoadThing(thing.id, { fancyd: thing.fancyd, fancyd_count: thing.fancyd_count }, ns => { this.setState(ns); });\n    }\n\n    handleFancyClick = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!this.props.appContext.loggedIn) {\n            window.require_login && window.require_login();\n            return;\n        }\n        const { thing } = this.props;\n        const { fancyAnimation, fancyd, loading } = this.state;\n        if (loading) {\n            return;\n        }\n        if (!fancyd && !fancyAnimation) {\n            this.setState({ fancyAnimation: true }, _ => { this.animateFancyBG(); });\n        }\n\n        if (!fancyd) {\n            MP('Fancy', { thing_id: thing.id });\n        } else {\n            MP('Unfancy', { thing_id: thing.id });\n        }\n\n        this.toggleFancy();\n    }\n\n    componentDidMount() {\n        this.handleFancydStateOnLoadThing();\n    }\n\n    componentDidUpdate({ thing }) {\n        // Thing has been updated.\n        if (thing.id !== this.props.thing.id || thing.isCrawled !== this.props.thing.isCrawled) {\n            this.handleFancydStateOnLoadThing(thing);\n        }\n    }\n\n    render() {\n        const {\n            appContext: { loggedIn, viewer },\n            thing: { fancyd_users, user },\n            bigContainer,\n        } = this.props;\n        const {\n            fancyd,\n            fancyAnimation,\n            fancyStatus,\n        } = this.state;\n\n        const fancydUsers = [\n            loggedIn && viewer,\n            loggedIn && !isUserEqual(viewer, user) && user\n        ]\n        .concat(\n            fancyd_users &&\n            fancyd_users.filter(fancydUser => !isUserEqual(fancydUser, user) &&\n                                              !isUserEqual(fancydUser, viewer))\n        )\n        .filter(e => e);\n\n        var fancydUserAnimClass;\n        if (fancyStatus === FancyStatus.Addition) {\n            fancydUserAnimClass = \"add\";\n        } else if (fancyStatus === FancyStatus.Removal) {\n            fancydUserAnimClass = \"remove\";\n        }\n        // designer satisfaction 1)\n        // If user is less than 2 we need to apply special class.\n        // In this way dont owner profile dont get 'consumed': https://app.asana.com/0/86925821949642/173945332708784\n        const userCountSufficiency = fancydUsers.length <= 2 ? '_insuff' : '_suff';\n\n        return (\n            <span style={bigContainer && bigContainerStyle} className=\"fancyd_users-wrap\">\n                <span className=\"count\">\n                    <a onClick={this.handleFancyClick}\n                       className={classnames(\"button button-static fancy _count\", { fancyd, loading: fancyAnimation })}>\n                        <span ref={this.fancyBGAnimationRef}>\n                            <i />\n                        </span>{this.getFancydCountString()}\n                    </a>\n                    <span className=\"_fancyd\" />\n                </span>\n                <span className={classnames(\"fancyd_user\", fancydUserAnimClass, userCountSufficiency)}>\n                    {fancydUsers.map((user, index) => {\n                        const isViewer = isUserEqual(user, viewer);\n                        return (\n                            <FancydUser key={index}\n                                        user={user}\n                                        display={this.getFancyduserDisplay(user, index, fancydUsers.length)}\n                                        isViewer={isViewer} />\n                        );\n                    })}\n                </span>\n            </span>\n        );\n    }\n}\n","import React, { Component, lazy, Suspense } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { connect } from \"react-redux\";\nimport { MoreShare, Video } from \"common-components\";\nimport { isStaticArticlePage } from \"fancyutils\";\nimport dateFormat from 'date-fns/format';\n\nimport { historyData } from \"../container/history\";\nimport { FancydUsers } from \"./ArticleFancydUsers\";\nimport { OaContainer } from \"../container/entry-events\";\nimport { AdminHeader, ArticleList, ThingList, initGallery } from \"./ArticleWidgets\";\nimport \"../Shortcode\";\nimport { applyProductSlide } from 'common-components';\n\n\nfunction mapStateToProps(state) {\n    var { appContext, article: { data, isFetching, status } } = state;\n\n    if (data && data.content && window.convertArticleShortcode) {\n        data.content = window.convertArticleShortcode(data.content);\n    }\n\n    return {\n        appContext,\n        status,\n        article: data,\n        isFetching\n    };\n}\nconst Lightbox = lazy(() => import(/* webpackChunkName: \"OverlayArticle\" */'react-images'));\n\n// Container class for overlayed article detail.\nexport class OverlayArticle extends Component {\n    componentDidMount() {\n        OaContainer.scrollToTop();\n        applyProductSlide();\n\n        // fitvids 1.2.0\n        !function(t){t.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById(\"fit-vids-style\")){var r=document.head||document.getElementsByTagName(\"head\")[0],a=\".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}\",d=document.createElement(\"div\");d.innerHTML='<p>x</p><style id=\"fit-vids-style\">'+a+\"</style>\",r.appendChild(d.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=['iframe[src*=\"player.vimeo.com\"]','iframe[src*=\"youtube.com\"]','iframe[src*=\"youtube-nocookie.com\"]','iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\"object\",\"embed\"];i.customSelector&&e.push(i.customSelector);var r=\".fitvidsignore\";i.ignore&&(r=r+\", \"+i.ignore);var a=t(this).find(e.join(\",\"));a=a.not(\"object object\"),a=a.not(r),a.each(function(){var e=t(this);if(!(e.parents(r).length>0||\"embed\"===this.tagName.toLowerCase()&&e.parent(\"object\").length||e.parent(\".fluid-width-video-wrapper\").length)){e.css(\"height\")||e.css(\"width\")||!isNaN(e.attr(\"height\"))&&!isNaN(e.attr(\"width\"))||(e.attr(\"height\",9),e.attr(\"width\",16));var i=\"object\"===this.tagName.toLowerCase()||e.attr(\"height\")&&!isNaN(parseInt(e.attr(\"height\"),10))?parseInt(e.attr(\"height\"),10):e.height(),a=isNaN(parseInt(e.attr(\"width\"),10))?e.width():parseInt(e.attr(\"width\"),10),d=i/a;if(!e.attr(\"name\")){var o=\"fitvid\"+t.fn.fitVids._count;e.attr(\"name\",o),t.fn.fitVids._count++}e.wrap('<div class=\"fluid-width-video-wrapper\"></div>').parent(\".fluid-width-video-wrapper\").css(\"padding-top\",100*d+\"%\"),e.removeAttr(\"height\").removeAttr(\"width\")}})})},t.fn.fitVids._count=0}(window.jQuery||window.Zepto);\n\n        $('.media-youtube').fitVids();\n    }\n\n    componentDidUpdate(prevProps) {\n        const pt = prevProps.article;\n        const ct = this.props.article;\n\n        if (ct != null) {\n            if (!pt || pt.id !== ct.id) {\n                if (!isStaticArticlePage()) {\n                    $(\"#overlay-article > .popup\").attr(\"tabindex\", -1).focus();\n                }\n                OaContainer.scrollToTop();\n            }\n\n            if (this.props.appContext.viewer.is_admin_senior) {\n                $(\"body\").addClass(\"admin\");\n            } else {\n                $(\"body\").removeClass(\"admin\");\n            }\n        }\n    }\n\n    render() {\n        const { article, appContext: { viewer } } = this.props;\n\n        var display = null;\n        if (historyData.locationIsArticlePage) {\n            if (article != null) {\n                display = (\n                    <div>\n                        {viewer.is_admin_senior && <AdminHeader {...this.props} />}\n                        <Article {...this.props} />\n                        <div className={\"container\"}>\n                            <ThingList {...this.props} hasPagination={window.isWhitelabel} />\n                            <ArticleList {...this.props} />\n                        </div>\n                    </div>\n                );\n            } else {\n                display = <div />;\n            }\n        } else {\n            display = <div />;\n        }\n\n        return display;\n    }\n}\n\nexport default connect(mapStateToProps)(OverlayArticle);\n\nclass Article extends Component {\n    state = {\n        lightboxImages: [],\n        lightboxOpen: false,\n    }\n    constructor(props) {\n        super(props);\n        if ($(\"#article-fonts\").length === 0) {\n            $(document.head).append(\n                '<link rel=\"stylesheet\" id=\"article-fonts\" href=\"//fonts.googleapis.com/css?family=Merriweather:300,300i,400,400i,700,700i,900,900i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i|Merriweather+Sans:300,300i,400,400i,700,700i,800,800i\" type=\"text/css\" />'\n            );\n\n            if ($(\"body\").is(\".static-article\")) {\n                $(\"#container-wrapper #scroll-to-top\").hide();\n            }\n        }\n    }\n\n    componentDidMount() {\n        // Initial loading\n        initGallery(ReactDOM.findDOMNode(this));\n        if (window.isWhitelabelV2) {\n            setTimeout(() => {\n                $('.itemSlide.product').productSlide({ itemPerSlide: 4, center: true });\n            }, 2500);\n        }\n    }\n\n    handleGalleryClick = (event) => {\n        var $this = $(event.target);\n        if (window.isWhitelabelV2) {\n            if ($this.is(\".gallery .paging a\")) {\n                event.preventDefault();\n                const $gallery = $this.closest(\".gallery\");\n                const $paging = $gallery.find(\".paging\");\n                const len = $gallery.find('.paging a.pager').length;\n                const galleryNth = $('.gallery').index($this.closest(\".gallery\"));\n                const indexSelector = `.gallery:eq(${galleryNth}) .paging a.pager`\n\n                let idx;\n                let incdec = 0\n                if ($this.is(\".btn .prev\")) {\n                    idx = $gallery.find('.paging a.pager.current').index(indexSelector);\n                    incdec = -1\n                } else if ($this.is(\".btn .next\")) {\n                    idx = $gallery.find('.paging a.pager.current').index(indexSelector);\n                    incdec = +1\n                } else {\n                    idx = $this.index(indexSelector);\n                }\n                idx += incdec;\n                if (idx < 0) {\n                    idx = len - 1\n                } else if (idx >= len - 1) {\n                    idx = 0\n                }\n                $paging\n                    .find(\"a.current\").removeClass(\"current\").end()\n                    .find(`a.pager:eq(${idx})`).addClass(\"current\");\n                $gallery\n                    .find(\"li.active\").removeClass(\"active\").end()\n                    .find(`li:eq(${idx})`).addClass(\"active\");\n            } \n        } else {\n            if ($this.is(\".gallery .paging a, .gallery li *\")) {\n                if ($this.is(\":not(.gallery li a.linked, .gallery li a.linked *)\")) {\n                    event.preventDefault();\n                }\n                if ($this.is(\".gallery li *\")) {\n                    $this = $this.closest(\"li\");\n                }\n    \n                var $gallery = $this.closest(\".gallery\");\n                var $paging = $gallery.find(\".paging\");\n    \n                var idx = $this.index();\n                $paging.find(\"a.current\").removeClass(\"current\").end().find(\"a:eq(\" + idx + \")\").addClass(\"current\");\n                $gallery.find(\"li.active\").removeClass(\"active\").end().find(\"li:eq(\" + idx + \")\").addClass(\"active\");\n                var left = 0;\n                if (idx == 0) {\n                    left = 0;\n                } else if (idx == $gallery.find(\"li\").length - 1) {\n                    left = $gallery.width() - $gallery.find(\".photo-list\").width();\n                } else {\n                    left =\n                        ($gallery.width() - $gallery.find(\"li:eq(\" + idx + \")\").width()) / 2 -\n                        $gallery.find(\"li:eq(\" + idx + \")\").position().left;\n                }\n                $gallery.find(\".photo-list\").css(\"left\", left + \"px\");\n            }\n        }\n    }\n\n    prepareProductSlide = (event, $this) => {\n        var $slide = $this.closest('.product');\n        if ($slide.data('slideInit')) {\n            event.preventDefault();\n        } else {\n            $slide.productSlide({ itemPerSlide: 4, center: true })\n            setTimeout(() => {\n                $this.click();\n            }, 500);\n        }\n    }\n\n    handleContentClick = (event) => {\n        var $this = $(event.target);\n        if ($this.is(\".gallery *\")) {\n            this.handleGalleryClick(event);\n        } else if ($this.is(\".description .grid\")) {\n            this.prepareLightboxOpen();\n        } else if ($this.is('.itemSlide .prev, .itemSlide .next')) {\n            this.prepareProductSlide(event, $this);\n        }\n    }\n\n    // lightbox stuff\n    prepareLightboxOpen() {\n        this.setState({\n            lightboxOpen: true,\n            lightboxCurrentImage: 0,\n            lightboxImages: $('.grid img').toArray().map((e) => ({ src: $(e).data('src')}) ),\n        });\n    }\n\n    handleClickPrev = () => {\n        this.setState({ lightboxCurrentImage: Math.max(this.state.lightboxCurrentImage - 1, 0) });\n    }\n\n    handleClickNext = () => {\n        this.setState({ lightboxCurrentImage: Math.min(this.state.lightboxCurrentImage + 1, this.state.lightboxImages.length - 1) });\n    }\n\n    handleClose = () => {\n        this.setState({ lightboxOpen: false });\n    }\n\n    handleClickThumbnail = (idx) => {\n        this.setState({ lightboxCurrentImage: idx })\n    }\n\n    render() {\n        const { appContext: { lastFullyRenderedArticleID, viewer, loggedIn }, article } = this.props;\n\n        let video;\n        let coverImgUrl = '';\n        if (article.cover_image) {\n            coverImgUrl = article.cover_image.url;\n        }\n        if (Video.isVideoAvailableForArticle(article)) {\n            const videoProps = {\n                object: article,\n                display: true,\n                autoplay: article.cover_video.autoplay || false,\n                lastFullyRenderedObjectID: lastFullyRenderedArticleID,\n            };\n            if (coverImgUrl) {\n                videoProps.poster = coverImgUrl;\n            }\n            video = <Video {...videoProps} />;\n        }\n\n        const coverImage = (\n            <div className=\"inner-wrapper\">\n                <div id=\"coverImage\" className=\"cover image purple\">\n                    {video}\n                    {!video &&\n                        <div className=\"image\">\n                            <img id=\"coverImg\" src={coverImgUrl} />\n                        </div>}\n                </div>\n            </div>\n        );\n\n        const author = (\n            article.options &&\n            article.options.authors &&\n            <div className=\"author\" dangerouslySetInnerHTML={{ __html: article.options.authors }} />\n        );\n\n        return (\n            <div id=\"summary\" className=\"wrapper article-wrapper\">\n                {!window.isWhitelabelV2 && coverImage}\n                {/*floatingVideo*/}\n                <div className=\"info\">\n                    <h1 className=\"title\"><b>{article.title}</b> <small>{article.tagline}</small></h1>\n                    {window.isWhitelabelV2 && author}\n                    {window.isWhitelabelV2 && article.date_created &&\n                        <div className=\"date text-placeholder\">{\n                            dateFormat(article.date_created || new Date, 'MMMM DD, YYYY')\n                        }</div>\n                    }\n                    {window.isWhitelabel ? null : <FancydUsers {...this.props} />}\n                    <div className=\"interaction\">\n                        <MoreShare objectType=\"article\" objectId={article.id} loggedIn={loggedIn} title={article.title}\n                                       viewerUsername={viewer.username} showShortcuts={true} fromThingSidebar={true} />\n                        {article.options &&\n                            article.options.action_button &&\n                            (_.isString(article.options.action_button.text) &&\n                                article.options.action_button.text.trim()) &&\n                            <a href={`${article.options.action_button.link}`} className=\"btn-shop\">\n                                {article.options.action_button.text}\n                            </a>}\n                        {window.isWhitelabel ? <FancydUsers {...this.props} /> : null}\n                    </div>\n                </div>\n                {window.isWhitelabelV2 && coverImage}\n                <div className=\"description more\">\n                    {!window.isWhitelabelV2 && author}\n                    <div dangerouslySetInnerHTML={{ __html: article.content }} onClick={this.handleContentClick} />\n                </div>\n                {window.isWhitelabelV2 && \n                    <Suspense fallback={<div />}>\n                        <Lightbox \n                            fallback={<div />}\n                            images={this.state.lightboxImages}\n                            isOpen={this.state.lightboxOpen}\n                            preventScroll={true}\n                            showThumbnails={true}\n                            currentImage={this.state.lightboxCurrentImage}\n                            onClickPrev={this.handleClickPrev}\n                            onClickNext={this.handleClickNext}\n                            onClose={this.handleClose}\n                            onClickThumbnail={this.handleClickThumbnail}\n                        />\n                    </Suspense>\n                }\n            </div>\n        );\n    }\n}\n","import { isEmpty } from 'fancyutils';\n\n\nexport function getDescription(article) {\n    return article.description;\n}\n\nexport function formatPrice(amount) {\n    var newPrice = amount.toFixed(2) + '';\n    var regex = /(\\d)(\\d{3})([,\\.]|$)/;\n    while (regex.test(newPrice)) {\n        newPrice = newPrice.replace(regex, '$1,$2$3');\n    }\n    if (window.numberType === 2) {\n        newPrice = newPrice.replace(/,/g, ' ').replace(/\\./g, ',');\n    }\n    return newPrice;\n}\n\nexport function getSafeNameProp({ emojified_name, name }) {\n    if (emojified_name) {\n        return { dangerouslySetInnerHTML: { __html: emojified_name } };\n    } else {\n        return { children: name };\n    }\n}\n\nfunction salesAvailable(thing) {\n    if (!isEmpty(thing.sales)) {\n        return thing.sales_available;\n    }\n    return false;\n}\n\nexport function getThingName(thing) {\n    if (thing.type === 'giftcard') {\n        return gettext('Fancy Gift Card');\n    } else if (salesAvailable(thing)) {\n        return thing.sales.name;\n    } else {\n        return thing.name;\n    }\n}","\nexport const FancyStatus = {\n    Addition: 'Addition',\n    Removal: 'Removal',\n    AfterAddition: 'AfterAddition',\n    AfterRemoval: 'AfterRemoval',\n    Idle: 'Idle',\n};\n\nconst commonWrapperSelector = '#sidebar .wrapper.article';\nexport const Selectors = {\n    HomepageWrapper: commonWrapperSelector,\n};\n","import React, { Component } from 'react';\n\nimport { closeOverlay } from '../action/action-helpers';\nimport store from '../store/store';\nimport { historyHook } from './history';\n\n\nclass App extends Component {\n    handleCloseArticle(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        store.dispatch(closeOverlay());\n    }\n\n    render() {\n        return (\n            <div className={`popup article ${window.isWhitelabel ? 'whitelabel-article' : ''} ${window.isWhitelabelV2 ? 'whitelabel-article-v2' : ''}`} id=\"article-container\">\n                {this.props.children}\n                <a href=\"#\" className=\"ly-close\" onClick={this.handleCloseArticle}>Close</a>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import { KEYS, didClickOn, getObjectTypeFromUrl, getPathname, isPlainLeftClick, isHomepage } from \"fancyutils\";\n\nimport store from \"../store/store\";\nimport { Selectors } from \"../config\";\nimport { LinkTypes, transition } from \"./routeutils\";\nimport { closeOverlay } from \"../action/action-helpers\";\nimport { historyData } from './history';\n\n\nfunction handleOverlayArticleKeyEvents(event) {\n    if (event.target.tagName === \"TEXTAREA\" || event.target.tagName === \"INPUT\") {\n        return;\n    }\n\n    switch (event.which) {\n        case KEYS.ESC:\n            // If popup is not on\n            if ($(\"#popup_container:visible\").length === 0) {\n                store.dispatch(closeOverlay());\n            }\n            break;\n    }\n}\n\nfunction conditionalTransition(aElement) {\n    // Turn off video\n    $(\"#container-wrapper .btn-pause\")\n        .attr(\"scroll\", true)\n        .click();\n    // Ensure anchor is static (sticked to homepage timeline) or not.\n    if (isHomepage() && $(Selectors.HomepageWrapper).has(aElement)) {\n        transition(aElement.getAttribute(\"href\"), LinkTypes.Static);\n    } else {\n        transition(aElement.getAttribute(\"href\"));\n    }\n}\n\nvar oneshotEventAttached = false;\nexport function attachEntryEvents() {\n    if (oneshotEventAttached) {\n        return;\n    }\n    oneshotEventAttached = true;\n    // Remove pre-existing url event and start transition first\n    $(document.body).off(\"click.overlayArticleInit\");\n    if (window.__INIT_ARTICLE_ANCHOR != null) {\n        conditionalTransition(window.__INIT_ARTICLE_ANCHOR);\n        delete window.__INIT_ARTICLE_ANCHOR;\n    }\n    // TODO: replace to class-based event binding\n    $(document.body).on(\"click\", \"a\", function(event) {\n        if (\n            isPlainLeftClick(event) &&\n            this.getAttribute(\"data-prevent-overlay\") == null &&\n            getObjectTypeFromUrl(getPathname(this)) === \"Article\"\n        ) {\n            event.preventDefault();\n            // note: key event will be detached inside `closeOverlay()` call\n            $(document).on(\"keydown.overlayArticle\", handleOverlayArticleKeyEvents);\n            conditionalTransition(this);\n        }\n    });\n\n    $(\"#overlay-article\").on(\"click\", function(event) {\n        const $targ = $(event.target);\n        if (didClickOn($targ, \"#article-container\") || historyData.initialPageIsArticlePage) {\n            //pass\n        } else {\n            store.dispatch(closeOverlay());\n        }\n    });\n}\n\nexport const OaContainer = {\n    isStatic() {\n        return $(document.body).is(\".static-article\");\n    },\n    getDynamic() {\n        return $(\"#article-container\");\n    },\n    getStatic() {\n        return $(document);\n    },\n    get() {\n        return this.isStatic() ? this.getStatic() : this.getDynamic();\n    },\n    scrollToTop() {\n        if (this.isStatic()) {\n            $(document.body.parentElement).scrollTop(0);\n        } else {\n            this.getDynamic().scrollTop(0);\n        }\n    }\n};\n","import { extractMetaFromArticleURL, extractMetaFromURL } from 'fancyutils';\nimport { history } from 'common-components';\nimport store from '../store/store';\nimport { closeOverlay, fetchArticle } from '../action/action-helpers';\nimport {\n    closeArticle,\n} from '../action/actions';\n\n\nconst initialArticlePageID = extractMetaFromArticleURL(location.pathname).id;\nconst initialPageIsArticlePage = initialArticlePageID != null;\n\n// This stores initial static page history info that needs to be restored when modal get closed.\nexport const historyData = {\n    initialPath: location.pathname,\n    /* mut */preservedHref: location.href, // Preserved Href just before open, and to be returned when closed.\n    initialArticlePageID,\n    initialPageIsArticlePage,\n    initialTitle: document.title,\n    // This prop indicates current location is (static) article page. Mutable.\n    locationIsArticlePage: initialPageIsArticlePage,\n    overlayIsOn: false,\n};\n\nexport function runOverlay(articleID, articleURLType, killCache = false, queryString) {\n    if (!$(document.body).hasClass('error-page')) {\n        // Context needs to be isolated from hook: https://github.com/rackt/redux-router/issues/157\n        requestIdleCallback(() => {\n            $(document.body).addClass('article-overlay-on');\n            store.dispatch(fetchArticle(articleID, articleURLType, killCache, queryString));\n            historyData.overlayIsOn = true;\n        });\n    }\n}\n\nexport function stopOverlay() {\n    historyData.overlayIsOn = false;\n    store.dispatch(closeOverlay());\n}\n\nexport function historyHook({ pathname, search /*, action*/ }) {\n    const meta = extractMetaFromArticleURL(pathname);\n    const articleID = meta && meta.id;\n    // When initially (statically) renderred page is article page\n    // Moving to new article page\n    historyData.locationIsArticlePage = articleID != null;\n    if (historyData.locationIsArticlePage) {\n        runOverlay(articleID, meta.type, false, search);\n    } else if (historyData.overlayIsOn) {\n        stopOverlay();\n    }\n}\n\nhistory.listen(historyHook)\n","import { extractMetaFromArticleURL, getObjectTypeFromUrl, isStaticPage, stripPathname } from 'fancyutils';\nimport { history } from 'common-components';\n\nimport { historyData } from './history';\n\n\nexport const LinkTypes = {\n    Dynamic: 0,\n    Static: 1,\n    Timeline: 2,\n    Internal: 3, // no update needed\n};\n\n// `staticLink`: transition from statically attached links\nexport function transition(href) {\n    // ID-only\n    if (!_.isNaN(Number(href))) {\n        href = `/articles/${href}`;\n    }\n\n    if (getObjectTypeFromUrl(href) === 'Article') {\n        const meta = extractMetaFromArticleURL(href);\n        // Update URL to go back when overlay is closed\n        if (!historyData.overlayIsOn) {\n            historyData.preservedHref = location.href;\n        }\n        history.push(stripPathname(meta.href), null);\n\n    } else {\n        redirect(href);\n    }\n}\n\nexport function closeModal() {\n    if (isStaticPage()) {\n        return;\n    }\n    $(document.body).removeClass('article-overlay-on');\n}\n\nexport function redirect(destination) {\n    if (destination == null) {\n        return false;\n    } else {\n        location.href = destination;\n        return true;\n    }\n}\n","// This is entrypoint, which `React.render` takes place after DOM is ready.\nimport React from \"react\";\nimport { Route, Router, Switch } from \"react-router-dom\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { selectOrCreate } from \"fancyutils\";\nimport { history } from 'common-components';\n\nimport App from \"./container/app\";\nimport { attachEntryEvents } from \"./container/entry-events\";\nimport store from \"./store/store\";\nimport OverlayArticle from \"./components/article\";\nimport { historyHook } from \"./container/history\";\n\n\nconst onLoad = () => {\n    require(\"./shared\");\n\n    const thingRegex = /\\/(sales|things)\\/(\\d+)/;\n    const articleRegex = /\\/articles\\/(.+)/;\n    const initialHref = location.href;\n\n    $(window).on(\"popstate.overlay\", function(event) {\n        if (\n            location.href !== initialHref &&\n            !(location.pathname.match(thingRegex) || location.pathname.match(articleRegex))\n        ) {\n            event.preventDefault();\n            location.reload();\n        }\n    });\n\n    const overlayArticleContainer = selectOrCreate(\"#overlay-article\");\n    const $overlayArticleContainer = $(overlayArticleContainer);\n    if ($overlayArticleContainer.hasClass('seo')) {\n        $overlayArticleContainer.empty();\n        $overlayArticleContainer.removeClass('seo');\n    }\n    render(\n        <Provider store={store}>\n            <Router history={history}>\n                <App>\n                    <Switch>\n                        <Route path=\"/articles/*\" component={OverlayArticle} />\n                        <Route path=\"*\" component={() => null} />\n                    </Switch>\n                </App>\n            </Router>\n        </Provider>,\n        overlayArticleContainer,\n        () => {\n            history.listen(historyHook);\n            historyHook({ pathname: location.pathname, search: location.search }) // should init once\n            attachEntryEvents();\n        }\n    );\n}\n\nif (document.readyState !== \"loading\") {\n    onLoad();\n} else {\n    document.addEventListener(\"DOMContentLoaded\", onLoad);\n}\n","import { combineReducers } from 'redux';\nimport { extractMetaFromURL, update, updateShallow, isEmpty } from 'fancyutils';\n\nimport C from './action/action-constants';\nimport { getInitialStoreState } from './store/initial-store';\nimport { updateState } from './appstate';\n\n\nconst isLoggedIn = viewer => !isEmpty(viewer) && viewer.id != null;\n\nvar loaded = false;\nvar lastFullyRenderedArticleID = 0;\nfunction appContext(state = getInitialStoreState('appContext'), action) {\n    switch (action.type) {\n    case C.OPEN_ARTICLE:\n        return updateShallow(state, {\n            visible: true,\n        });\n    case C.CLOSE_ARTICLE:\n        lastFullyRenderedArticleID = 0;\n        loaded = false;\n        return updateShallow(state, {\n            visible: false,\n            lastFullyRenderedArticleID\n        });\n    case C.UPDATE_APP_CONTEXT:\n        return updateShallow(state, action.context);\n    case C.LOAD_ARTICLE: {\n        // Due to multi-stage rendering (cache -> from-server-data -> ...) \n        // it is unable to check state change correctly just by comparing ID;\n        // Therefore, we set internal state per every update cycle and check \n        // if state is fully updated.\n\n        // FIXME: when cached response exist, it marks as rendered before\n        if (\n            loaded === true &&\n            lastFullyRenderedArticleID !== action.data.id\n        ) {\n            lastFullyRenderedArticleID = action.data.id;\n        }\n        const viewer = action.data.viewer || window.viewer || {};\n        const loggedIn = isLoggedIn(viewer);\n        const userCountry = action.data.current_country_code || state.userCountry;\n\n        updateState('loggedIn', loggedIn);\n        updateState('viewer', viewer);\n        loaded = true;\n\n        return update(state, { lastFullyRenderedArticleID, loggedIn, viewer, userCountry });\n    }\n    default:\n        return state;\n    }\n}\n\nfunction populateArticleContext(articleData) {\n    articleData.loading = articleData.fromServer !== true;\n    articleData.URLMeta = extractMetaFromURL(location.href); // FIXME: provide current pathname\n    articleData.owner = articleData.user;\n}\n\n// Article context\nfunction article(state = getInitialStoreState('article'), action) {\n    switch (action.type) {\n    case C.LOAD_ARTICLE:\n        populateArticleContext(action.data)\n        return updateShallow(state, {\n            data: action.data,\n            status: action.status,\n            ID: action.ID,\n            pendingID: null,\n            isFetching: false\n        });\n    case C.REQUEST_ARTICLE:\n        return update(state, {\n            pendingID: action.pendingID,\n            status: action.status,\n            isFetching: true\n        });\n    case C.REQUEST_ARTICLE_FAILURE:\n        return update(state, {\n            status: action.status,\n            isFetching: false\n        });\n\n    // Reset state\n    case C.CLOSE_ARTICLE:\n        return updateShallow(getInitialStoreState('article'));\n    default:\n        return state;\n    }\n}\n\nconst rootReducer = combineReducers({\n    appContext,\n    article,\n});\n\nexport default rootReducer;\n","import { getFancyDepsRoot } from 'fancyutils';\n\nimport store from './store/store';\nimport { cache } from './cache';\nimport { transition } from './container/routeutils';\n// import { reloadCurrentArticle } from './container/history';\n\n\ngetFancyDepsRoot().Shared = {\n    getStore: () => store.getState(),\n    cache,\n    transition,\n    // reloadCurrentArticle,\n};\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from '../reducers';\n\n\nconst middleware = [thunk];\n\nexport const configureStore = (initialState) => (\n    createStore(rootReducer, initialState, applyMiddleware(...middleware))\n);\n","// Warning: objects has to be flat in each context\nexport function getInitialStoreState(contextName) {\n    switch(contextName) {\n    case 'appContext':\n        return {\n            visible: false,\n            viewer: {},\n            loggedIn: null,\n            userCountry: 'US',\n        };\n    case 'article':\n        return {\n            data: null,\n            ID: null,\n            pendingID: null,\n            isFetching: null,\n            status: 'idle' // { idle | request | failed }\n        };\n    default:\n        console.warn('`getInitialStoreState()`: Unknown context name ', contextName);\n    }\n};\n\nvar contexts = [\n    'article',\n    'appContext'\n];\n\nexport function getAllInitialStoreState() {\n    return contexts.reduce((state, contextKey) => {\n        state[contextKey] = getInitialStoreState(contextKey);\n        return state;\n    } , {});\n}\n","import { configureStore } from './configure-store';\nimport { getAllInitialStoreState } from './initial-store';\n\nconst store = configureStore(getAllInitialStoreState());\n\nexport default store;\n","import { getLocationArgPairs } from 'fancyutils';\nimport { GlobalFancySomething } from 'ftypes';\n\n\ndeclare global {\n    interface Window {\n        _: typeof import('underscore');\n        track_event: Function;\n        alertify: alertify.IAlertifyStatic;\n        dataLayer: Array<any>;\n        Fancy: GlobalFancySomething;\n        from_sds_page: boolean;\n        TrackingEvents: {\n            addToCart(_: any): any\n        }\n    }\n}\n\nconst { Fancy, track_event, dataLayer, from_sds_page, TrackingEvents } = window;\n\nexport function logAddCartMixpanel({\n    salesID,\n    saleOptionID,\n    utm,\n    section,\n    via,\n} : {\n    salesID: any;\n    saleOptionID: any;\n    utm: any;\n    section: any;\n    via: any;\n}) {\n    if (salesID == null) {\n        return;\n    }\n    if (utm == null) {\n        const currentLocationArgPair = getLocationArgPairs('utm');\n        if (currentLocationArgPair) {\n            utm = currentLocationArgPair[1];\n        }\n    }\n    const log = {\n        'sale id': salesID,\n        via: via || 'thing page',\n        utm: utm,\n    };\n    if (section) {\n        log.section = section;\n    }\n    if (saleOptionID && salesID !== saleOptionID) {\n        log['option id'] = saleOptionID;\n    }\n    try {\n        window.track_event && track_event('Add to Cart', log);\n    } catch (e) {}\n    return log;\n}\n\nexport function addItemToCart(param, callback, meta) {\n    // should be replaced by Fancy.CartAPI.addItem\n    param.from_sds_page = from_sds_page;\n    if (window.dataLayer) {\n        window.dataLayer.push({\n            event: 'Add_to_Cart_Button',\n            product_id: param['sale_item_id'],\n            option_id: param['option_id'],\n            products: undefined,\n            products_info: undefined,\n            revenue: undefined\n        });\n    }\n    return $.ajax({\n        type: 'POST',\n        url: '/add_item_to_cart.json',\n        data: param\n    })\n    .done(json => {\n        if (!json || json.status_code == null) {\n            return;\n        }\n        if (json.status_code === 1) {\n            if (meta) {\n                TrackingEvents.addToCart([{\n                    id: param.sale_item_id,\n                    brand: meta.brand_name,\n                    name: meta.title,\n                    quantity: param.quantity,\n                    price: meta.price,\n                    variant: json.option,\n                }]); // avoid NaN\n            }\n            var args: any = {\n                'THING_ID': param.thing_id,\n                'ITEMCODE': json.itemcode,\n                'THUMBNAIL_IMAGE_URL': json.image_url,\n                'ITEMNAME': json.itemname,\n                'QUANTITY':json.quantity,\n                'PRICE': json.price,\n                'OPTIONS': json.option,\n                'HTML_URL': json.html_url,\n                'CART_ID': json.cart_id,\n            };\n            if (json.fancy_price) {\n                args.FANCY_PRICE = json.fancy_price;\n            }\n            Fancy.Cart.addItem(args);\n            Fancy.Cart.openPopup();\n        } else if (json.status_code == 0) {\n            if(json.message) {\n                alert(json.message);\n            }\n        }\n    })\n    .always(function() { callback && callback(); });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + \"1b89fb23510b2bc8bd58\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","var inProgress = {};\nvar dataWebpackPrefix = \"fancy:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => fn(event));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/_static/_ui/js/bundle/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"OverlayArticle.main\": 0\n};\n\nvar deferredModules = [\n\t[\"./_static/modules/ui/overlay-article/index.js\",\"vendors\",\"libfancy\"]\n];\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n\t\t\t\t\t});\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = () => {\n\n};\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = () => {\n\n\t\t}\n\t}\n\treturn result;\n}\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = () => {\n\n\t}\n\tchunkLoadingGlobal = chunkLoadingGlobal.slice();\n\tfor(var i = 0; i < chunkLoadingGlobal.length; i++) webpackJsonpCallback(chunkLoadingGlobal[i]);\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tparentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfancy\"] = self[\"webpackChunkfancy\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = webpackJsonpCallback;","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}