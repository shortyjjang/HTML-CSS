{"version":3,"sources":["webpack://fancy/./_static/modules/ui/overlay-thing/components/FooterReviews.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/Review.tsx","webpack://fancy/./_static/modules/ui/overlay-thing/components/popup/ReviewsPopup.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/sidebar/heads/Giftcard.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/sidebar/heads/Hotel.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/sidebar/heads/LaunchApp.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/sidebar/heads/PlainThing.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/sidebar/heads/Vanity.js","webpack://fancy/./_static/modules/ui/overlay-thing/components/sidebar/owner.js"],"names":["FooterReviews","props","appContext","sales","thing","renderPopup","ReviewsPopup","this","className","reviews","map","review","i","key","length","onClick","handleMoreReviewsDisplay","Component","Votes","param","vote","Review","like","event","preventDefault","request","VoteType","lock","$","ajax","type","url","id","data","done","setState","always","voteup","votedown","toFixed","body","date_created","rating","title","user","viewer_can_vote","option","upPercentage","getUpPercentage","state","style","width","loggedIn","Display","handleLike","handleDislike","$ul","reviewsContainer","scrollTop","scrollHeight","endReached","height","loadReviews","cursor","_","last","loading","getParam","then","postProcessReviews","prevProps","datepicker","formatDate","Date","voted","viewer","review_rating","String","review_count","onScroll","handleLoading","ref","element","React","searchUser","query","trim","term","dataType","searchedUsers","showSearchedUsers","userType","FancyUserType","Giftcard","errorMessage","focusingEl","purchasing","alertify","alert","triggerEvent","stopPropagation","appState","window","require_login","cardValue","message","getUser","fullname","username","email","handlePurchaseError","recipientName","search","emailRegEx","post","v3","recipient_name","recipient_email","recipient_username","amount","status_code","redirect","searchInput","target","value","input","intermediateInputSlice","split","inputIsEmailType","setUserDetail","ExternalUserType","idx","additionalState","nextUserDetail","extend","nextUserType","nextState","currentTarget","getAttribute","setFancyUser","cursorIndex","fancyUser","externalUser","debounceUntilTimeout","Keys","gettext","printer","s","defaultValue","currentValue","options","giftcardPrices","onChange","handleCardValueChange","onFocus","handleInputFieldsFocus","name","handleEmailChange","placeholder","userList","searched","data-idx","handleListItemClick","src","backgroundImage","profile_image_url","handleRecipientNameChange","handleMessageChange","handlePurchase","Unsafe","children","Hotel","showDetail","location","href","hotel_search","lookupLoading","params","hotelId","hotel","arrivalDate","val","departureDate","adult","child","rooms","cache","json","EanWsError","BookingResultPopup","hotelID","roomlist","presentationMessage","fail","selectedOption","city","country","floatFormatMinusTwo","lowRate","HotelCheckin","onSelected","handleSelected","HotelCheckout","HotelPeople","handleLookupAvailability","disabled","isSubmitable","classnames","details","hotelPolicy","dangerouslySetInnerHTML","__html","roomInformation","faq_link","handleMoreDetail","selected","dateFormat","showOtherMonths","selectOtherMonths","dateText","inst","nextDate","selectedYear","selectedMonth","selectedDay","setDate","getDate","on","handleSelectCheckIn","readOnly","handleSelectCheckout","parseInt","handleSelectPeople","htmlFor","tabIndex","handlePeopleChange","handleChildrenChange","LaunchApp","displayAppList","external_app","MP","parameter1","app_type","parameter2","appType","appTypeOnly","ret","external_apps","metadata","getSafeNameProp","category","description","reduce","prev","next","nextAppLabel","getAppDownloadLabel","handleDownloadClick","handleAppListClick","display","handleAppDownloadClick","bind","PlainThing","Vanity","stateCode","AC","minPrice","maxPrice","keyword","VanityLearnMore","isVanityQueriable","VanitySearchResult","handleVanityLearnPopupOpen","onACChange","onMinPriceChange","onMaxPriceChange","onKeywordChange","label","handleVanitySearchPopupOpen","SidebarOwner","owner","dispatch","toggleFollow","user_id","followContext","followUser","following","sales_available","owner_recent_activity","ITEMS_COUNT","activityExists","isEmpty","isFollowingUser","html_url","schemeless","full_name","handleFollowToggle","filter","recentActivity","cdnUtils","image_path"],"mappings":"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","file":"OverlayThing.extras.18d2f3218e065c2de157.js","sourcesContent":["import React, { Component } from 'react';\nimport { renderPopup } from 'fancyutils';\n\nimport ReviewsPopup from './popup/ReviewsPopup';\nimport Review from './Review';\n\n\nexport default class FooterReviews extends Component {\n    handleMoreReviewsDisplay = () => {\n        const { appContext, thing: { sales } } = this.props;\n        renderPopup(ReviewsPopup, { appContext, sales });\n    };\n\n    render() {\n        const { appContext, thing: { sales } } = this.props;\n        return (\n            <div className=\"wrapper customer-review\">\n                <h3>Reviews</h3>\n                <ul>\n                    {sales.reviews.map((review, i) =>\n                        <Review key={i} review={review} appContext={appContext} sales={sales} />\n                    )}\n                </ul>\n                {sales.reviews.length > 3 &&\n                    <a onClick={this.handleMoreReviewsDisplay} className=\"more\">See {sales.reviews.length - 3} more reviews</a>\n                }\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport { Display } from 'fancymixin';\n\nconst Votes = {\n    Like: {\n        param: { vote: 1 },\n    },\n    Dislike: {\n        param: { vote: -1 },\n    }\n};\n\nexport default class Review extends Component {\n    state = {\n        like: null\n    };\n    lock = false;\n\n    request(VoteType) {\n        if (this.lock) {\n            return;\n        }\n        this.lock = true;\n        const { review, sales } = this.props;\n        $.ajax({\n            type:'PUT',\n            url: `/rest-api/v1/reviews/${sales.id}/${review.id}`,\n            data: VoteType.param,\n        })\n        .done(() => {\n            this.setState({ like: VoteType });\n        })\n        .always(() => {\n            this.lock = false;\n        });\n    }\n\n    handleLike = (event) => {\n        event.preventDefault();\n        this.request(Votes.Like);\n    };\n\n    handleDislike = (event) => {\n        event.preventDefault();\n        this.request(Votes.Like);\n    };\n\n    getUpPercentage (voteup, votedown) {\n        if (!voteup) {\n            return 0;\n        } else {\n            return (voteup / (voteup + votedown) * 100).toFixed(0);\n        }\n    }\n\n    render() {\n        const { review, appContext } = this.props;\n        const { body, date_created, voteup, votedown, rating, user, title, viewer_can_vote, option } = review;\n        const upPercentage = this.getUpPercentage(voteup, votedown);\n        const { like } = this.state;\n\n        return (\n            <li>\n                <p className=\"rating\">\n                    <span className=\"value\">\n                        <small style={{ width: `${rating * 10}%` }} />\n                    </span>\n                    {/*<span className=\"name\">{user.full_name || user.fullname}</span>*/}\n                    <span className=\"date\">{date_created}</span>\n                </p>\n                <div className=\"review\">\n                    <h4 className=\"title\">{title}</h4>\n                    <span className=\"option\">Option: {option || ''}</span>\n                    {(voteup > 0 || votedown > 0) ? \n                        <p className=\"precentage\">{voteup} of {voteup + votedown} people ({upPercentage}%) found this review helpful.</p>\n                        :\n                        ''\n                    }\n                    <div className=\"description\">{body}</div>\n                    {appContext.loggedIn &&\n                     viewer_can_vote &&\n                        [\n                            <p key=\"feedback\" className=\"survey\" style={Display.NoneIf(like != null)}>\n                                Was this review helpful? <a onClick={this.handleLike} className=\"like\">Like</a> ·\n                                                         <a onClick={this.handleDislike} className=\"unlike\">Unlike</a>\n                            </p>,\n                            <p key=\"feedback-response\" className=\"success\" style={Display.NoneIf(like == null)}>Thank you for your feedback.</p>\n                        ]\n                    }\n                </div>\n            </li>\n        );\n    }\n}\n","import React from 'react';\nimport { Display } from 'fancymixin';\n\nimport Review from '../Review';\n\n\nexport default class ReviewsPopup extends React.Component {\n    static popupName = 'customer-review';\n    state = {\n        reviews: [],\n    };\n    endReached = false;\n\n    componentDidMount() {\n        this.loadReviews();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.sales.id !== prevProps.sales.id) {\n            this.loadReviews();\n        }\n    }\n\n    handleLoading = () => {\n        const $ul = $(this.reviewsContainer);\n        var scrollTop = $ul.scrollTop();\n        var scrollHeight = $ul[0].scrollHeight;\n        if (\n            !this.endReached &&\n            (scrollTop > scrollHeight - $ul.height() - 200)\n        ) {\n            this.loadReviews();\n        }\n    }\n\n    getParam = () => {\n        if (this.state.reviews.length > 0) {\n            return { cursor: _.last(this.state.reviews).id - 1 };\n        } else {\n            return null;\n        }\n    }\n\n    loadReviews = () => {\n        if (this.loading || this.endReached) {\n            return;\n        }\n        this.loading = true;\n        this.setState({ loading: true }, () => {\n            const { sales } = this.props;\n            $.ajax({\n                type: 'GET',\n                url: `/rest-api/v1/reviews/${sales.id}`,\n                data: this.getParam()\n            })\n            .then(({ reviews }) => {\n                if (reviews.length) {\n                    this.setState({ reviews: this.postProcessReviews(reviews) })\n                } else {\n                    this.endReached = true;\n                }\n            })\n            .always(() => {\n                this.setState({ loading: false });\n                this.loading = false;\n            });\n        });\n    }\n\n    postProcessReviews(reviews) {\n        return reviews.map(review => {\n            review.date_created = $.datepicker.formatDate('MM d, yy', new Date(review.date_created));\n            review.viewer_can_vote = review.voted == 0 && review.user.id != this.props.appContext.viewer.id;\n            return review;\n        });\n    }\n\n    render() {\n        const { appContext, sales } = this.props;\n        const { reviews, loading } = this.state;\n\n        return (\n            <div>\n                <p className=\"ltit\">Customer reviews</p>\n                <p className=\"total-range\">\n                    <b>{\n                        sales.review_rating > 0 ?\n                        String((sales.review_rating / 2).toFixed(1))\n                        :\n                        '0'\n                    } stars</b> – {sales.review_count} customer reviews</p>\n                <ul onScroll={this.handleLoading} ref={(element) => {this.reviewsContainer = element;}}>\n                    {reviews.map((review, i) =>\n                        <Review key={i} review={review} appContext={appContext} sales={sales} />\n                    )}\n                    <li className=\"loading\" style={Display.NoneIf(!loading)} />\n                </ul>\n                <button className=\"ly-close\" title=\"Close\">\n                    <i className=\"ic-del-black\" />\n                </button>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport { Display } from 'fancymixin';\n\nimport appState from '../../../appstate';\nimport { debounceUntilTimeout, triggerEvent } from 'fancyutils';\nimport { redirect } from '../../../container/routeutils';\nimport ActionButtons from '../action-buttons';\nimport { Keys } from '../../Perf';\nimport { SelectBox } from './Mixin';\n\n\nfunction searchUser(query) {\n    if ($.trim(query) === '') {\n        return;\n    }\n    return $.ajax({\n        type : 'get',\n        url  : '/search-users.json',\n        data : { term: query },\n        dataType : 'json'\n    }).done(searchedUsers => {\n        if (searchedUsers && searchedUsers.length) {\n            this.setState({\n                showSearchedUsers: true,\n                userType: this.FancyUserType,\n                searchedUsers\n            });\n        } else {\n           this.setState({\n                showSearchedUsers: false,\n           });\n        }\n    });\n}\n\n\nexport default class Giftcard extends Component {\n    giftcardPrices = ['10', '25', '50', '100', '250', '500', '1000', '5000', '10000'];\n    FancyUserType = 'fancyUser';\n    ExternalUserType = 'externalUser';\n    prevQuery = '';\n    purchasing = false;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchedUsers: [],\n            cursorIndex: 0,   // where 'current item' is displayed on searched user list\n            showSearchedUsers: false,\n\n            cardValue: '50',\n            userType: this.FancyUserType,\n            fancyUser: {},\n            externalUser: {},\n        };\n        this.searchUser = debounceUntilTimeout(searchUser, 500, this);\n    }\n\n    handlePurchaseError = (errorMessage, focusingEl) => {\n        this.purchasing = false;\n        alertify.alert(errorMessage);\n        if (focusingEl) {\n            triggerEvent(focusingEl, 'focus');\n        }\n    }\n\n    handlePurchase = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!appState.loggedIn) {\n            return window.require_login();\n        }\n        if (this.purchasing) {\n            return;\n        }\n        this.purchasing = true;\n\n        const { cardValue, message } = this.state;\n        const { fullname, username, email } = this.getUser();\n\n        if ($.trim(fullname).length === 0) {\n            this.handlePurchaseError('Please enter recipient name', this.recipientName)\n            return false;\n        }\n\n        if (username && username !== email) {\n            this.handlePurchaseError('Please choose correct user.')\n            return false;\n        }\n\n        // see common/util.js to change emailRegEx\n        if (email.search(this.emailRegEx) === -1 && !username) {\n            this.handlePurchaseError('A valid email address is required', this.searchInput)\n            return false;\n        }\n\n        if ($.trim(message).length === 0) {\n            this.handlePurchaseError('Please enter personal message', this.message)\n            return false;\n        }\n\n        $.post(\"/create-gift-card.json\", {\n                v3: true,\n                recipient_name: fullname,\n                recipient_email: email,\n                recipient_username: username,\n                amount: cardValue,\n                message\n            }, null, \"json\")\n            .done(({ status_code, message }) => {\n                if (status_code != null) {\n                    if (status_code == 1) {\n                        redirect('/gift-card/checkout');\n                    } else if (status_code == 0) {\n                        if (message != null){\n                            alertify.alert(message);\n                        }\n                    }\n                }\n            })\n            .always(() => {\n                this.purchasing = false;\n            });\n    }\n\n    handleInputFieldsFocus = (event) => {\n        if (!appState.loggedIn) {\n            event.preventDefault();\n            event.stopPropagation();\n            return window.require_login();\n        }\n    }\n\n    handleEmailChange = (event) => {\n        if (!appState.loggedIn) {\n            event.target.value = '';\n            return window.require_login();\n        }\n\n        const input = $.trim(event.target.value);\n        const intermediateInputSlice = input.split('@');\n        const inputIsEmailType = input.length > 0 && intermediateInputSlice.length > 1 && intermediateInputSlice[0].length > 0;\n        if (input === '') {\n            this.setUserDetail(input, null, null, { showSearchedUsers: false });\n        } else if (inputIsEmailType) {\n            this.setUserDetail(input, null, null, { showSearchedUsers: false, userType: this.ExternalUserType });\n        } else {\n            this.searchUser(input);\n            this.setUserDetail(input);\n        }\n    }\n\n    getUser = () => {\n        return this.state[this.state.userType];\n    }\n\n    setFancyUser = (idx) => {\n        const { searchedUsers } = this.state;\n        if (idx != null && searchedUsers && searchedUsers.length) {\n            const { searchedUsers } = this.state;\n            const { username, fullname } = searchedUsers[idx];\n\n            this.setState({\n                userType: this.FancyUserType,\n                showSearchedUsers: false,\n                [this.FancyUserType]: {\n                    email: username,\n                    fullname,\n                    username,\n                },\n            });\n        }\n    }\n\n    setUserDetail = (email, fullname, username, additionalState) => {\n        // FIXME: improve\n        var nextUserDetail = {};\n        if (email != null) { nextUserDetail.email = email; }\n        if (fullname != null) { nextUserDetail.fullname = fullname; }\n        if (username != null) { nextUserDetail.username = username; }\n\n        // deleting\n        if (email === '') {\n            nextUserDetail.username = '';\n        }\n\n        nextUserDetail = _.extend({}, this.getUser(), nextUserDetail);\n        var nextUserType = this.state.userType;\n        // Switching user type\n        // FIXME: make vice-versa\n        if (additionalState &&\n            additionalState.userType &&\n            additionalState.userType === this.ExternalUserType\n        ) {\n            delete nextUserDetail.username;\n            nextUserType = additionalState.userType;\n        }\n\n        const nextState = _.extend(\n            { [nextUserType]: nextUserDetail },\n            additionalState\n        );\n        this.setState(nextState);\n    }\n\n    handleListItemClick = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const idx = event.currentTarget.getAttribute('data-idx');\n        this.setFancyUser(idx);\n    }\n\n    handleCardValueChange = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setState({ cardValue: event.currentTarget.value });\n    }\n\n    handleMessageChange = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setState({ message: event.currentTarget.value });\n    }\n\n    handleRecipientNameChange = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setUserDetail(null, event.currentTarget.value, null);\n    }\n\n    render() {\n        const {\n            cardValue,\n            cursorIndex,\n            searchedUsers,\n            showSearchedUsers,\n        } = this.state;\n        const user = this.getUser();\n\n        return (\n            <div key={Keys.Sidebar.Wrap}>\n                <div className=\"wrapper figure-info giftcard\" key={Keys.Sidebar.Body}>\n                    <h1 className=\"title\" key={Keys.Sidebar.Title}>{gettext(\"Fancy Gift Card\")}</h1>\n                    <div className=\"description\" key={Keys.Sidebar.Desc}>\n                        <p>{gettext(\"The perfect present for any occasion. Send a Fancy Gift Card today and let your friends choose what they love!\")}</p>\n                    </div>\n                    <div className=\"frm\" key={Keys.Sidebar.Form}>\n                        <fieldset className=\"sale-item-input\">\n                            <SelectBox printer={s => `$${s}`} defaultValue=\"50\" currentValue={cardValue}\n                                       id=\"value\" options={this.giftcardPrices} onChange={this.handleCardValueChange} onFocus={this.handleInputFieldsFocus}/>\n                            <div className=\"recipent\">\n                                <p>\n                                    <input type=\"text\" id=\"recipient-email\" name=\"recipient_email\"\n                                           className=\"text search-fancy-users-for-giftcard\"\n                                           onChange={this.handleEmailChange}\n                                           onFocus={this.handleInputFieldsFocus}\n                                           ref={(element) => {this.searchInput = element;}}\n                                           value={user.email}\n                                           placeholder={gettext(\"Recipient’s username or email address\")} />\n                                </p>\n                                <ul className=\"user-list\" ref={(element) => {this.userList = element;}} style={Display.BlockIf(showSearchedUsers)}>\n                                    {searchedUsers &&\n                                     searchedUsers.map((searched, idx) => {\n                                        return (\n                                            <li key={`giftcard-user-${idx}`} data-idx={idx}\n                                                onClick={this.handleListItemClick}\n                                                className={cursorIndex === idx ? 'on' : null}>\n                                                <img src=\"/_ui/images/common/blank.gif\"\n                                                     style={{ backgroundImage: `url(${searched.profile_image_url})` }} />\n                                                <b>{searched.name}</b>\n                                                <small>@{searched.username}</small>\n                                            </li>\n                                        );\n                                    })}\n                                </ul>\n                            </div>\n                            <p>\n                                <input type=\"text\" ref={(element) => {this.recipientName = element;}} id=\"recipient-name\"\n                                       name=\"recipient_name\" className=\"text\"\n                                       placeholder={gettext(\"Recipient’s name\")}\n                                       value={user.fullname}\n                                       onChange={this.handleRecipientNameChange} \n                                       onFocus={this.handleInputFieldsFocus}/>\n                            </p>\n                            <p>\n                                <textarea onChange={this.handleMessageChange}\n                                          onFocus={this.handleInputFieldsFocus}\n                                          name=\"message\" className=\"text\"\n                                          placeholder={gettext(\"Enter a personal message\")} />\n                            </p>\n                        </fieldset>\n                        <button className=\"btns-green-embo btn-cart create-gift-card\"\n                                onClick={this.handlePurchase}>{gettext(\"Buy Now\")}</button>\n                        <ActionButtons {...this.props} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { floatFormatMinusTwo, renderPopup } from 'fancyutils';\nimport { Display } from 'fancymixin';\n\nimport appState from '../../../appstate';\nimport ActionButtons from '../action-buttons';\nimport { Keys } from '../../Perf';\n\n// Unsafe DOM wrapper\n// - which means its DOM children will be modified by non-react script\n//   and not going to be updated via React.\nclass Unsafe extends Component {\n    shouldComponentUpdate() {\n        return false;\n    }\n\n    render() {\n        return this.props.children;\n    }\n}\n\nexport default class Hotel extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedOption: 'checkin',\n            showDetail: false,\n        };\n    }\n\n    handleMoreDetail = (event) => {\n        event.preventDefault();\n        this.setState({ showDetail: true });\n    }\n\n    handleSell = (event) => {\n        event.preventDefault();\n        if (!appState.loggedIn) {\n            return window.require_login();\n        }\n        const { thing } = this.props;\n        location.href = `/sales/create?ntid=${thing.id}&ntoid=${thing.user && thing.user.id || ''}`;\n    }\n\n    handleLookupAvailability = (event) => {\n        if (!appState.loggedIn) {\n            return window.require_login();\n        }\n        event.preventDefault();\n        const { thing: { hotel_search } } = this.props;\n\n        if (hotel_search == null || this.lookupLoading) {\n            return;\n        }\n        this.lookupLoading = true;\n\n        // check avail rooms\n        const params = {\n            hotelId       : hotel_search.hotel.hotelId,\n            arrivalDate   : $('#check-in').val(),\n            departureDate : $('#check-out').val(),\n        };\n\n        var adult = $('#adult-people').val();\n        var child = '';\n        for (let i=0; i < $('#child-people').val(); i++) {\n            child += \",10\";\n        }\n        params.rooms = adult + child;\n\n        $.ajax({\n            type     : 'post',\n            url      : '/ean/hotel/rooms/',\n            data     : params,\n            cache    : false,\n            dataType : 'json',\n        })\n            .then(json => {\n                if (json.EanWsError == null) {\n                    import(/* webpackChunkName: \"OverlayThing.popup\" */'../../popup/index')\n                        .then(({ BookingResultPopup }) => {\n                            renderPopup(BookingResultPopup, {\n                                hotelID: hotel_search.hotel.hotelId,\n                                roomlist: json.roomlist,\n                                arrivalDate: json.arrivalDate,\n                                departureDate: json.departureDate,\n                                rooms: params.rooms\n                            });\n                        })\n                } else {\n                    alertify.alert(json.EanWsError.presentationMessage);\n                }\n            })\n            .fail(() => { alertify.alert('An error occurred during request data.'); })\n            .always(() => { this.lookupLoading = false; });\n    }\n\n    handleSelected = (selectedOption) => {\n        this.setState({ selectedOption });\n    }\n\n    isSubmitable() {\n        return $('#check-in:visible').val() != null && $('#check-out:visible').val() != null;\n    }\n\n    render() {\n        var { thing: { hotel_search } } = this.props;\n        var { selectedOption, showDetail } = this.state;\n\n        return (\n            <div key={Keys.Sidebar.Wrap}>\n                <div className=\"wrapper figure-info hotel\" key={Keys.Sidebar.Body}>\n                    <h1 className=\"title\" key={Keys.Sidebar.Title}>{hotel_search.hotel.name}</h1>\n                    <p className=\"price\" key={Keys.Sidebar.Price}>\n                        {hotel_search.hotel.city}, {hotel_search.hotel.country}\n                        <big>{gettext('From')} <b>${floatFormatMinusTwo(hotel_search.hotel.lowRate)}</b> {gettext(\"/ Night\")}</big>\n                    </p>\n                    <div className=\"frm\" key={Keys.Sidebar.Form}>\n                        <fieldset>\n                            <HotelCheckin onSelected={this.handleSelected} selectedOption={selectedOption} />\n                            <HotelCheckout onSelected={this.handleSelected} selectedOption={selectedOption} />\n                            <HotelPeople onSelected={this.handleSelected} selectedOption={selectedOption} />\n                        </fieldset>\n                        <button onClick={this.handleLookupAvailability}\n                                className=\"btns-green-embo btn-check\"\n                                disabled={!this.isSubmitable()}>{gettext(\"See Availability\")}</button>\n                        <ActionButtons {...this.props} />\n                    </div>\n                </div>\n                <div className=\"wrapper hotel-description\">\n                    <h3 className=\"stit\">{gettext('Hotel Details')}</h3>\n                    <div className={classnames(\"description\", { 'show': showDetail })} key={Keys.Sidebar.Desc}>\n                        {hotel_search.details.hotelPolicy && <b>{gettext(\"General Policy\")}</b>}\n                        {hotel_search.details.hotelPolicy && <p dangerouslySetInnerHTML={{__html: hotel_search.details.hotelPolicy }} />}\n                        {hotel_search.details.roomInformation && <b>{gettext(\"Notifications and Fees\")}</b>}\n                        {hotel_search.details.roomInformation &&  <p dangerouslySetInnerHTML={{__html: hotel_search.details.roomInformation }} />}\n                        <b>{gettext(\"Frequently Asked Questions\")}</b>\n                        <p>\n                            <a href={hotel_search.faq_link} target=\"_blank\">\n                                {gettext(\"Read FAQs\")}\n                            </a>\n                        </p>\n                        <a className=\"more\" onClick={this.handleMoreDetail} style={Display.NoneIf(showDetail)}>\n                            <span>{gettext(\"more\")}</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass HotelCheckin extends Component {\n    state = { selected: false }\n    componentDidMount() {\n        $('#calendar-check-in')\n            .datepicker({dateFormat : 'MM d, yy', showOtherMonths: true, selectOtherMonths: true})\n            .datepicker('option', 'altField', '#check-in')\n            .datepicker('option', 'minDate', 1)\n            .datepicker('option', 'onSelect', (dateText, inst) => {\n                this.setState({ selected: true }, () => {\n                    var nextDate = new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay);\n                    nextDate.setDate(nextDate.getDate() + 1);\n                    $('#calendar-check-out').datepicker('option', 'minDate', nextDate);\n                    this.props.onSelected('checkout');\n                });\n            });\n    }\n\n    handleSelectCheckIn = () => {\n        this.props.onSelected('checkin');\n    }\n\n    render() {\n        const { selectedOption /*, checkinDate*/ } = this.props;\n        const { selected } = this.state;\n\n        return (\n            <dl className={classnames(\"calendar\", { on: selectedOption === 'checkin' })}\n                onClick={this.handleSelectCheckIn}>\n                <dt>\n                    <span>Check in</span>\n                    <input type=\"text\" id=\"check-in\" className=\"calendar checkin\" readOnly style={Display.NoneIf(!selected)} />\n                </dt>\n                <dd>\n                    <Unsafe>\n                        <div id=\"calendar-check-in\" className=\"calendar\" />\n                    </Unsafe>\n                </dd>\n            </dl>\n        );\n    }\n}\n\nclass HotelCheckout extends Component {\n    state = { selected: false }\n    componentDidMount() {\n        $('#calendar-check-out')\n            .datepicker({ dateFormat : 'MM d, yy', showOtherMonths: true, selectOtherMonths: true })\n            .datepicker('option', 'altField', '#check-out')\n            .datepicker('option', 'minDate', 2)\n            .datepicker('option', 'onSelect', () => {\n                this.setState({ selected: true }, () => {\n                    this.props.onSelected('people');\n                });\n            });\n    }\n\n    handleSelectCheckout = () => {\n        this.props.onSelected('checkout');\n    }\n\n    render() {\n        const { selectedOption } = this.props;\n        const { selected } = this.state;\n        return (\n            <dl className={classnames(\"calendar\", { on: selectedOption === 'checkout' })}\n                onClick={this.handleSelectCheckout}>\n                <dt>\n                    <span>{selected ? gettext('Check out') : gettext('Select check out date')}</span>\n                    <input type=\"text\" id=\"check-out\" className=\"calendar checkout\" readOnly style={Display.NoneIf(!selected)} />\n                </dt>\n                <dd>\n                    <Unsafe>\n                        <div id=\"calendar-check-out\" className=\"calendar\" />\n                    </Unsafe>\n                </dd>\n            </dl>\n        );\n    }\n}\n\nexport class HotelPeople extends Component {\n    state = {\n        adult: 1,\n        children: 0\n    };\n\n    handlePeopleChange = (event) => {\n        this.setState({ adult: parseInt(event.currentTarget.value, 10) });\n    }\n\n    handleChildrenChange = (event) => {\n        this.setState({ children: parseInt(event.currentTarget.value, 10) });\n    }\n\n    handleSelectPeople = () => {\n        this.props.onSelected('people');\n    }\n\n    render() {\n        const { selectedOption } = this.props;\n        const { adult, children } = this.state;\n        return (\n            <dl className={classnames(\"people\", { on: selectedOption === 'people' })} onClick={this.handleSelectPeople}>\n                <dt htmlFor=\"adult-people\">{adult} Adult, {children} {children === 1 ? 'Child' : 'Children'}</dt>\n                <dd className=\"after\">\n                    <p>\n                        <b>{gettext('Adult')}</b>\n                        <span className=\"trick-select adult-people\">\n                            <a className=\"selectBox\" tabIndex=\"1\">\n                                <span className=\"selectBox-label\">{adult}</span>\n                                <span className=\"selectBox-arrow\"></span>\n                            </a>\n                            <select id=\"adult-people\" className=\"things-select\" onChange={this.handlePeopleChange} value={adult}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                            </select>\n                        </span>\n                    </p>\n\n                    <p>\n                        <b>{gettext('Children')}</b>\n                        <span className=\"trick-select child-people\">\n                            <a className=\"selectBox\" tabIndex=\"1\">\n                                <span className=\"selectBox-label\">{children}</span>\n                                <span className=\"selectBox-arrow\"></span>\n                            </a>\n                            <select id=\"child-people\" className=\"things-select\" onChange={this.handleChildrenChange} value={children}>\n                                <option value=\"0\">0</option>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                            </select>\n                        </span>\n                    </p>\n                </dd>\n            </dl>\n        );\n    }\n}\n","import React, { Component } from \"react\";\nimport { MP } from \"fancyutils\";\n\nimport SidebarOwner from \"../owner\";\nimport ActionButtons from \"../action-buttons\";\nimport { getSafeNameProp } from \"../../map\";\nimport { Keys } from \"../../Perf\";\n\n\nexport default class LaunchApp extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { displayAppList: false };\n    }\n\n    handleAppListClick = () => {\n        this.setState({ displayAppList: false });\n    };\n\n    handleDownloadClick = () => {\n        this.setState({ displayAppList: true });\n    };\n\n    handleAppDownloadClick = external_app => {\n        MP(\"Download App\", {\n            \"thing id\": this.props.thing.id,\n            url: external_app.parameter1,\n            app_type: external_app.parameter2\n        });\n    };\n\n    getAppDownloadLabel(appType, appTypeOnly) {\n        var ret;\n        if (appTypeOnly) {\n            switch (appType) {\n                case \"ios\":\n                    ret = \"iOS\";\n                    break;\n                case \"itunes\":\n                    ret = \"iTunes\";\n                    break;\n                case \"google_play\":\n                    ret = \"Google Play\";\n                    break;\n                case \"android\":\n                    ret = \"Android\";\n                    break;\n                case \"windows\":\n                    ret = \"Windows Store\";\n                    break;\n                case \"windows_app\":\n                    ret = \"Windows Store\";\n                    break;\n                case \"mac_app\":\n                    ret = \"Mac App Store\";\n                    break;\n                case \"facebook_app\":\n                    ret = \"Facebook App\";\n                    break;\n                case \"web_app\":\n                    ret = \"Web App\";\n                    break;\n                default:\n                    ret = \"\";\n                    break;\n            }\n        } else {\n            appType;\n            switch (appType) {\n                case \"ios\":\n                    ret = \"Download on iOS\";\n                    break;\n                case \"itunes\":\n                    ret = \"Download from iTunes Store\";\n                    break;\n                case \"google_play\":\n                    ret = \"Download from Google Play\";\n                    break;\n                case \"android\":\n                    ret = \"Download on Android\";\n                    break;\n                case \"windows\":\n                    ret = \"Download from Windows Store\";\n                    break;\n                case \"windows_app\":\n                    ret = \"Download from Windows Store\";\n                    break;\n                case \"mac_app\":\n                    ret = \"Download from Mac App Store\";\n                    break;\n                case \"facebook_app\":\n                    ret = \"Launch App\";\n                    break;\n                case \"web_app\":\n                    ret = \"Launch App\";\n                    break;\n                default:\n                    ret = \"Download\";\n                    break;\n            }\n        }\n        return ret;\n    }\n\n    render() {\n        var { thing, thing: { external_apps, metadata } } = this.props;\n        var { displayAppList } = this.state;\n\n        return (\n            <div key={Keys.Sidebar.Wrap}>\n                <div className=\"wrapper figure-info\" key={Keys.Sidebar.Body}>\n                    <h1 key={Keys.Sidebar.Title} className=\"title\" {...getSafeNameProp(thing)} />\n                    {metadata.category && metadata.category !== \"Other\" && <p className=\"price\">{metadata.category}</p>}\n                    <div className=\"description\" key={Keys.Sidebar.Desc}>\n                        <div>\n                            {metadata.description && (\n                                <div>\n                                    {metadata.description}\n                                    <br />\n                                    <br />\n                                </div>\n                            )}\n                            <small>\n                                {gettext(\"Available on\") + ' ' + external_apps.reduce((prev, next) => {\n                                    var nextAppLabel = this.getAppDownloadLabel(next.parameter2, true);\n                                    if (prev.length) return `${prev}, ${nextAppLabel}`;\n                                    else return nextAppLabel;\n                                }, \"\")}\n                            </small>\n                        </div>\n                    </div>\n                    <div className=\"frm\" key={Keys.Sidebar.Form}>\n                        <button className=\"btns-blue-embo\" onClick={this.handleDownloadClick}>\n                            {gettext(\"Download Now\")}\n                        </button>\n                        <div\n                            className=\"app-list\"\n                            onClick={this.handleAppListClick}\n                            style={{ display: displayAppList ? \"block\" : \"none\" }}>\n                            <ul>\n                                {external_apps &&\n                                    external_apps.map((external_app, idx) => (\n                                        <li key={`external_app-${idx}`}>\n                                            <a\n                                                href={external_app.parameter1}\n                                                className={external_app.parameter2}\n                                                onClick={this.handleAppDownloadClick.bind(this, external_app)}\n                                                target=\"_blank\">\n                                                {this.getAppDownloadLabel(external_app.parameter2)}\n                                            </a>\n                                        </li>\n                                    ))}\n                            </ul>\n                        </div>\n                        <ActionButtons {...this.props} />\n                    </div>\n                </div>\n                <SidebarOwner key={Keys.Sidebar.Owner} {...this.props} />\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\nimport SidebarOwner from '../owner';\nimport ActionButtons from '../action-buttons';\nimport { getSafeNameProp } from '../../map';\nimport { Keys } from '../../Perf';\n\n\nexport default class PlainThing extends Component {\n    render() {\n        var { thing } = this.props;\n        return (\n            <div key={Keys.Sidebar.Wrap}>\n                <div className=\"wrapper figure-info\" key={Keys.Sidebar.Body}>\n                    <h1 key={Keys.Sidebar.Title} className=\"title\" {...getSafeNameProp(thing)} />\n                    <p>This item is no longer available.</p>\n                    <div className=\"frm\" key={Keys.Sidebar.Form}>\n                        <ActionButtons {...this.props} />\n                    </div>\n                </div>\n                <SidebarOwner key={Keys.Sidebar.Owner} {...this.props} />\n            </div>\n        );\n    }\n}\n","import React, { Component } from \"react\";\nimport { renderPopup } from \"fancyutils\";\n\nimport ActionButtons from \"../action-buttons\";\nimport { getSafeNameProp, isVanityQueriable } from \"../../map\";\nimport { Keys } from \"../../Perf\";\nimport { CartButton } from \"./Mixin\";\n\n\nexport default class Vanity extends Component {\n    state = {\n        stateCode: \"\",\n        AC: \"\",\n        minPrice: \"\",\n        maxPrice: \"\",\n        keyword: \"\"\n    };\n\n    handleVanityLearnPopupOpen = () => {\n        import(/* webpackChunkName: \"OverlayThing.popup\" */'../../popup/index')\n            .then(({ VanityLearnMore }) => {\n                renderPopup(VanityLearnMore, null);\n            });\n    };\n\n    handleVanitySearchPopupOpen = () => {\n        if (isVanityQueriable(this.state)) {\n            import(/* webpackChunkName: \"OverlayThing.popup\" */'../../popup/index')\n                .then(({ VanitySearchResult }) => {\n                    renderPopup(VanitySearchResult, this.state);\n                });\n        }\n    };\n\n    onACChange = event => {\n        event.preventDefault();\n        this.setState({ AC: event.target.value });\n    };\n    onKeywordChange = event => {\n        event.preventDefault();\n        this.setState({ keyword: event.target.value });\n    };\n    onMinPriceChange = event => {\n        event.preventDefault();\n        this.setState({ minPrice: event.target.value });\n    };\n    onMaxPriceChange = event => {\n        event.preventDefault();\n        this.setState({ maxPrice: event.target.value });\n    };\n\n    render() {\n        var { thing: { sales } } = this.props;\n\n        return (\n            <div key={Keys.Sidebar.Wrap}>\n                <div className=\"wrapper figure-info vanity\" key={Keys.Sidebar.Body}>\n                    <h1 key={Keys.Sidebar.Title} className=\"title\" {...getSafeNameProp(sales)} />\n                    <div className=\"description\" key={Keys.Sidebar.Desc}>\n                        <p>\n                            {gettext(\n                                \"Easy-to-remember vanity phone numbers for anyone and everyone, from private individuals to the biggest of companies.\"\n                            )}\n                        </p>\n                        <p>\n                            {gettext(\n                                \"All numbers are compatible with the following US Wireless Carriers: AT&T, Sprint, T-Mobile, and Verizon Wireless.\"\n                            )}\n                        </p>\n                        <p>\n                            <a onClick={this.handleVanityLearnPopupOpen}>{gettext(\"Learn more\")}</a>\n                        </p>\n                    </div>\n                    <div className=\"frm\" key={Keys.Sidebar.Form}>\n                        <fieldset className=\"sale-item-input\">\n                            <p>\n                                <label>{gettext(\"Area code\")}</label>\n                                <input\n                                    type=\"text\"\n                                    id=\"code\"\n                                    className=\"text code\"\n                                    placeholder=\"Area code\"\n                                    onChange={this.onACChange}\n                                    value={this.state.AC}\n                                />\n                            </p>\n                            <p className=\"_left\">\n                                <label>{gettext(\"Price min\")}</label>\n                                <input\n                                    type=\"text\"\n                                    id=\"price_min\"\n                                    className=\"text price\"\n                                    placeholder=\"$50\"\n                                    onChange={this.onMinPriceChange}\n                                    value={this.state.minPrice}\n                                />\n                                <span className=\"dash\">-</span>\n                            </p>\n                            <p>\n                                <label>{gettext(\"Price max\")}</label>\n                                <input\n                                    type=\"text\"\n                                    id=\"price_max\"\n                                    className=\"text price\"\n                                    placeholder=\"$10,000+\"\n                                    onChange={this.onMaxPriceChange}\n                                    value={this.state.maxPrice}\n                                />\n                            </p>\n                            <p>\n                                <label>{gettext(\"Search\")}</label>\n                                <input\n                                    type=\"text\"\n                                    id=\"search\"\n                                    className=\"text search\"\n                                    placeholder=\"Search by numbers or letters\"\n                                    onChange={this.onKeywordChange}\n                                    value={this.state.keyword}\n                                />\n                            </p>\n                            <CartButton\n                                className=\"btn-search btns-green-embo\"\n                                label={gettext(\"Search numbers\")}\n                                onClick={this.handleVanitySearchPopupOpen}\n                            />\n                        </fieldset>\n                        <ActionButtons {...this.props} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { isEmpty, cdnUtils } from 'fancyutils';\nimport { BGImage, Display } from 'fancymixin';\n\nimport appState from '../../appstate';\nimport { toggleFollow } from '../../action/action-helpers';\n\n\nexport default class SidebarOwner extends Component {\n    handleFollowToggle = (event) => {\n        event.preventDefault();\n        if (!appState.loggedIn) {\n            return window.require_login();\n        }\n        var { thing: { owner }, dispatch } = this.props;\n        dispatch(toggleFollow({ user_id: owner.id }));\n    }\n\n    isFollowingUser(followContext) {\n        return followContext && followContext.followUser.following === true;\n    }\n\n    render() {\n        const { appContext: { viewer }, thing, thing: { sales_available, owner, owner_recent_activity }, followContext } = this.props;\n\n        if (owner == null) {\n            return null;\n        }\n\n        // SaleThing owner goes below of the content, have more items\n        var ITEMS_COUNT = sales_available ? 8 : 5;\n        var activityExists = !isEmpty(owner_recent_activity);\n        var following = this.isFollowingUser(followContext);\n\n        return (\n            <div className={classnames(\"wrapper added-info thing-more\", { \"loading\": thing.loading })}>\n                <a href={owner.html_url} className=\"tit\">\n                    <BGImage url={owner.profile_image_url} schemeless />\n                    <small>{gettext('Added by')}</small>\n                    <b>{owner.full_name}</b>\n                </a>\n                <button className={classnames('btns-gray-embo btn-follow', following ? 'following' : 'follow')}\n                        style={Display.NoneIf(owner.id === viewer.id)}\n                        onClick={this.handleFollowToggle} />\n                {activityExists &&\n                    <ul className=\"after\">\n                        {owner_recent_activity\n                            .filter((_, idx) => idx < ITEMS_COUNT)\n                            .map((recentActivity, idx) => {\n                                recentActivity = recentActivity || { html_url: ''};\n                                return <li key={`owner_recent_activity-${idx}`}>\n                                    <a href={recentActivity.html_url}>\n                                        <BGImage url={cdnUtils.resizedSchemelessImage(recentActivity.image_path, 148, 'crop')} />\n                                    </a>\n                                </li>\n                            })\n                        }\n                    </ul>\n                }\n            </div>\n        );\n    }\n}\n"],"sourceRoot":""}