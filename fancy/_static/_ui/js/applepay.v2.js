"use strict";(function(){"use strict";var stripe;if(window.FancyApplePay){return}var StaticSelector="#container-wrapper .apple-pay-button, #container-wrapper .apple-pay-button-with-text, #wrap .apple-pay-button, #wrap .apple-pay-button-with-text";var RunningModes={Static:"Static",Dynamic:"Dynamic"};function didClickOn($targ,selector){return $targ.parents(selector).length>0||$targ.is(selector)}var FancyApplePay={stripeVersion:"v3",clicked:false,label:"Fancy",available:null,paymentRequest:null,afterAbort:function afterAbort(){this.clicked=false},init:function init(label){stripe=new window.Stripe(window.stripePublishableKey);if(label)this.label=label;this.paymentRequest=stripe.paymentRequest({country:"US",currency:"usd",total:{label:"Fancy",amount:10},requestPayerName:true,requestPayerPhone:true,requestShipping:true})},checkAvailability:function checkAvailability(callback,data){var _this=this;if(location.args.force_button){callback(true,true)}if(!data){console.warn("[v2]FancyApplePay.checkAvailability(): data is missing.");callback(false,false)}else{this.paymentRequest.update(data)}this.paymentRequest.canMakePayment().then(function(result){var available=(result&&result.applePay)===true;_this.available=available;callback(available,false)})},requestPurchase:function requestPurchase(mode,requestArgs){var _this2=this;if(this.available){this.paymentRequest.show()}else if(this.available===null){this.checkAvailability(function(available){_this2.available=available;_this2.paymentRequest.show()},{total:{label:requestArgs.title,amount:Number(requestArgs.price)*100|0}})}else{window.alertify.alert("Apple pay is not available.")}}};window.stripeOnload=function stripeOnload(){$(function(){if(window.stripePublishableKey){stripe=window.Stripe(window.stripePublishableKey)}FancyApplePay.init()})};if(window.Stripe){window.stripeOnload()}window.FancyApplePay=FancyApplePay})();
