!function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=48)}([function(e,t){e.exports=__F.React},function(e,t){e.exports=__F.FancyUtils},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i={Addition:"Addition",Removal:"Removal",AfterAddition:"AfterAddition",AfterRemoval:"AfterRemoval",Idle:"Idle"},r={HomepageWrapper:"#sidebar .wrapper.article"}},function(e,t){e.exports=__F.CommonComponents},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return f});var o=n(1),i=n(3),c=n(7),s=n(14),l=n(13),r=Object(o.extractMetaFromArticleURL)(location.pathname).id,a=null!=r,u={initialPath:location.pathname,preservedHref:location.href,initialArticlePageID:r,initialPageIsArticlePage:a,initialTitle:document.title,locationIsArticlePage:a,overlayIsOn:!1};function f(e){var t=e.pathname,n=e.search,i=Object(o.extractMetaFromArticleURL)(t),r=Object(o.extractMetaFromURL)(t),a=i&&i.id;u.locationIsArticlePage=null!=a,u.locationIsArticlePage?function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length?arguments[3]:void 0;$(document.body).hasClass("error-page")||requestIdleCallback(function(){$(document.body).addClass("article-overlay-on"),c.a.dispatch(Object(s.b)(e,t,n,i)),u.overlayIsOn=!0})}(a,i.type,!1,n):u.overlayIsOn&&(r&&r.id?(c.a.dispatch(Object(l.a)()),$(document.body).removeClass("article-overlay-on")):(u.overlayIsOn=!1,c.a.dispatch(Object(s.a)())))}i.history.listen(f)},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var c=n(1);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function o(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(this,"articles",{}),r(this,"count",0),r(this,"exists",function(e,t,n){var i=a.get(e,t),r=null!=i&&"object"===s(i);return n&&(r=r&&!0!==i.isCrawled),r}),r(this,"_get",function(e){return a[o.ARTICLES][e]||null}),r(this,"get",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.ARTICLES;return a[t][e]||a.getCrawled(e,t)}),r(this,"getCrawled",function(e,t){var n=a[t][e];return n&&n.isCrawled?n:null}),r(this,"add",function(e,t,n){var i=a[n][e];null==i||!0===i.isCrawled?(a[n][e]=t,a.count+=1):console.warn("cache.add(): Cache overwrite")}),r(this,"remove",function(e,t){a[t][e]?(delete a[t][e],a.count-=1):console.warn("cache.remove(): Non-existing cache removal")}),r(this,"update",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.ARTICLES,n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0;if(null!=n){var r=a.get(e,t);r&&Object(c.index)(r,n,i)}else console.warn("ArticleCache#update(): selector is empty")})}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(o,[{key:"sweep",value:function(){}}]),o}();r(a,"ARTICLES","articles");var o=new a},function(e,t,n){"use strict";var i=function(){return[].slice.call(arguments).reduce(function(e,t){return e[t]=t,e},{})}("UPDATE_APP_CONTEXT","REQUEST_ARTICLE","REQUEST_ARTICLE_FAILURE","LOAD_ARTICLE","OPEN_ARTICLE","CLOSE_ARTICLE");t.a=i},function(e,t,n){"use strict";var i=n(17),r=n(25),a=n.n(r),o=(n(30),n(1)),c=n(6);function s(e){switch(e){case"appContext":return{visible:!1,viewer:{},loggedIn:null,userCountry:"US"};case"article":return{data:null,ID:null,pendingID:null,isFetching:null,status:"idle"};default:console.warn("`getInitialStoreState()`: Unknown context name ",e)}}var l=["article","appContext"];var u=n(11),f=!1,d=0;var p,h=Object(i.combineReducers)({appContext:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s("appContext"),t=1<arguments.length?arguments[1]:void 0;switch(t.type){case c.a.OPEN_ARTICLE:return Object(o.updateShallow)(e,{visible:!0});case c.a.CLOSE_ARTICLE:return d=0,f=!1,Object(o.updateShallow)(e,{visible:!1,lastFullyRenderedArticleID:d});case c.a.UPDATE_APP_CONTEXT:return Object(o.updateShallow)(e,t.context);case c.a.LOAD_ARTICLE:!0===f&&d!==t.data.id&&(d=t.data.id);var n=t.data.viewer||window.viewer||{},i=function(e){return!Object(o.isEmpty)(e)&&null!=e.id}(n),r=t.data.current_country_code||e.userCountry;return Object(u.b)("loggedIn",i),Object(u.b)("viewer",n),f=!0,Object(o.update)(e,{lastFullyRenderedArticleID:d,loggedIn:i,viewer:n,userCountry:r});default:return e}},article:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s("article"),t=1<arguments.length?arguments[1]:void 0;switch(t.type){case c.a.LOAD_ARTICLE:return function(e){e.loading=!0!==e.fromServer,e.URLMeta=Object(o.extractMetaFromURL)(location.href),e.owner=e.user}(t.data),Object(o.updateShallow)(e,{data:t.data,status:t.status,ID:t.ID,pendingID:null,isFetching:!1});case c.a.REQUEST_ARTICLE:return Object(o.update)(e,{pendingID:t.pendingID,status:t.status,isFetching:!0});case c.a.REQUEST_ARTICLE_FAILURE:return Object(o.update)(e,{status:t.status,isFetching:!1});case c.a.CLOSE_ARTICLE:return Object(o.updateShallow)(s("article"));default:return e}}}),m=[a.a],g=(p=l.reduce(function(e,t){return e[t]=s(t),e},{}),Object(i.createStore)(h,p,i.applyMiddleware.apply(void 0,m)));t.a=g},function(e,t){e.exports=__F.FancyMixin},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return s});var i=n(1),r=n(3),a=n(4),o={Dynamic:0,Static:1,Timeline:2,Internal:3};function c(e){1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.Dynamic;if(_.isNaN(Number(e))||(e="/articles/".concat(e)),"Article"===Object(i.getObjectTypeFromUrl)(e)){var t=Object(i.extractMetaFromArticleURL)(e);a.a.overlayIsOn||(a.a.preservedHref=location.href),r.history.push(Object(i.stripPathname)(t.href),null)}else!function(e){null!=e&&(location.href=e)}(e)}function s(){Object(i.isStaticPage)()||$(document.body).removeClass("article-overlay-on")}},function(e,t){e.exports=__F.classnames},function(e,t,n){"use strict";n.d(t,"b",function(){return r});var i={viewer:{}};function r(e,t){i[e]=t}t.a=i},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var i=n(1),r=n(7),a=n(2),o=n(9),c=n(14),s=n(4);function l(e){if("TEXTAREA"!==e.target.tagName&&"INPUT"!==e.target.tagName)switch(e.which){case i.KEYS.ESC:0===$("#popup_container:visible").length&&r.a.dispatch(Object(c.a)())}}function u(e){$("#container-wrapper .btn-pause").attr("scroll",!0).click(),Object(i.isHomepage)()&&$(a.b.HomepageWrapper).has(e)?Object(o.c)(e.getAttribute("href"),o.a.Static):Object(o.c)(e.getAttribute("href"))}var f=!1;function d(){f||(f=!0,$(document.body).off("click.overlayArticleInit"),null!=window.__INIT_ARTICLE_ANCHOR&&(u(window.__INIT_ARTICLE_ANCHOR),delete window.__INIT_ARTICLE_ANCHOR),$(document.body).on("click","a",function(e){Object(i.isPlainLeftClick)(e)&&null==this.getAttribute("data-prevent-overlay")&&"Article"===Object(i.getObjectTypeFromUrl)(Object(i.getPathname)(this))&&(e.preventDefault(),$(document).on("keydown.overlayArticle",l),u(this))}),$("#overlay-article").on("click",function(e){var t=$(e.target);Object(i.didClickOn)(t,".wrapper-content")||Object(i.didClickOn)(t,".wrapper")||s.a.locationIsArticlePage||r.a.dispatch(Object(c.a)())}))}var p={isStatic:function(){return $(document.body).is(".static-article")},getDynamic:function(){return $("#article-container")},getStatic:function(){return $(document)},get:function(){return this.isStatic()?this.getStatic():this.getDynamic()}}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return s});var i=n(6);function r(e){return{type:i.a.REQUEST_ARTICLE,status:"request",pendingID:e}}function a(){return{type:i.a.REQUEST_ARTICLE_FAILURE,status:"failed"}}function o(e,t){var n=t.name;return n&&(document.title="Fancy | ".concat(n)),{type:i.a.LOAD_ARTICLE,status:"idle",ID:e,data:t}}function c(){return{type:i.a.OPEN_ARTICLE}}function s(){return{type:i.a.CLOSE_ARTICLE,ID:null,pendingID:null,article:null}}},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return o});var l=n(1),u=n(4),i=n(7),r=n(9),f=n(13),d=n(5),a=n(3);function p(){return function(e){Object(l.isStaticPage)()||(Object(r.b)(),u.a.overlayIsOn=!1,a.history.push(Object(l.stripPathname)(u.a.preservedHref),null),document.title=u.a.initialTitle,e(Object(f.a)()),$(document).off("keydown.overlayArticle"),$(window).trigger("scroll"))}}function o(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.a.ARTICLES,c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";return function(t,e){if(null!=a){var n=e();if(function(e){return!0!==e.appContext.visible}(n)&&t(Object(f.c)()),c&&(d.b.remove(a,o),delete n.article),c||function(e,t){return e.article.ID!==t&&!e.article.isFetching}(n,a)){if(d.b.exists(a,o)){var i=d.b.get(a,o);if(t(Object(f.b)(a,i)),h(i),!i.isCrawled)return}t(Object(f.d)(a));var r={saved_users_top:10,raw_content:"true",include_viewer:"true"};Object(l.getLocationArgPairs)("preview")&&(r.preview=!0),$.get("/rest-api/v1/articles/".concat(a).concat(s),r).then(function(e){d.b.add(a,e,o),t(Object(f.b)(a,e)),h(e)}).fail(function(e){t(Object(f.e)(a)),404===e.status?alertify.alert("This page is not available. Please try again later."):alertify.alert('There was an error while opening the page.<br> Please try again or contact <a mailto="cs@fancy.com">cs@fancy.com</a>.'),u.a.initialPageIsArticlePage?location.href="/":t(p())})}}else console.warn("fetchArticle(): articleID was null.")}}function h(e){var t={article_id:e.id},n=Object(l.getLocationArgPairs)("utm");n&&(t.utm=n[1]),Object(l.MP)("View Article Detail",t)}window.___D=function(){return i.a.getState()}},function(e,t,n){var u=n(23),f=36e5,d=6e4,p=/[T ]/,h=/:/,m=/^(\d{2})$/,g=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],v=/^(\d{4})/,y=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],b=/^-(\d{2})$/,w=/^-?(\d{3})$/,_=/^-?(\d{2})-?(\d{2})$/,S=/^-?W(\d{2})$/,E=/^-?W(\d{2})-?(\d{1})$/,O=/^(\d{2}([.,]\d*)?)$/,C=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,T=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,x=/([Z+-].*)$/,A=/^(Z)$/,I=/^([+-])(\d{2})$/,D=/^([+-])(\d{2}):?(\d{2})$/;function k(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var r=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}e.exports=function(e,t){if(u(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var i=function(e){var t,n={},i=e.split(p);if(t=h.test(i[0])?(n.date=null,i[0]):(n.date=i[0],i[1])){var r=x.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e),r=function(e,t){var n,i=g[t],r=y[t];if(n=v.exec(e)||r.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=m.exec(e)||i.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(i.date,n),a=r.year,o=function(e,t){if(null===t)return null;var n,i,r,a;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=b.exec(e))return i=new Date(0),r=parseInt(n[1],10)-1,i.setUTCFullYear(t,r),i;if(n=w.exec(e)){i=new Date(0);var o=parseInt(n[1],10);return i.setUTCFullYear(t,0,o),i}if(n=_.exec(e)){i=new Date(0),r=parseInt(n[1],10)-1;var c=parseInt(n[2],10);return i.setUTCFullYear(t,r,c),i}if(n=S.exec(e))return a=parseInt(n[1],10)-1,k(t,a);if(n=E.exec(e)){a=parseInt(n[1],10)-1;var s=parseInt(n[2],10)-1;return k(t,a,s)}return null}(r.restDateString,a);if(o){var c,s=o.getTime(),l=0;return i.time&&(l=function(e){var t,n,i;if(t=O.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*f;if(t=C.exec(e))return n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),n%24*f+i*d;if(t=T.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return n%24*f+i*d+1e3*r}return null}(i.time)),c=i.timezone?function(e){var t,n;return(t=A.exec(e))?0:(t=I.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=D.exec(e))?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0}(i.timezone):(c=new Date(s+l).getTimezoneOffset(),new Date(s+l+c*d).getTimezoneOffset()),new Date(s+l+c*d)}return new Date(e)}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l});var a=n(1);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={};function r(e,t){e.removeClass("fancy").removeClass("fancyd"),e.addClass(t?"fancyd":"fancy")}function s(e,t,n){0<=e.text().toLowerCase().indexOf("fancy")?e.html("<span><i></i></span> ".concat(t?"Fancy'd":"Fancy")):e.html("<span><i></i></span> ".concat(n))}function i(e,t,n){var i=function(e){if("string"==typeof e){var t=c[e];if("object"===o(t))return $(t);if(!1===t);else{var n=$('#container-wrapper a[href^="/things/'.concat(e,'"]:visible'));if(0<n.length){var i=Object(a.dedupeArray)(n.map(function(e,t){return $(t).closest("div.figure-item").get(0)}).toArray());if(i&&0<i.length){var r=$(i[0]).find("button.fancy, button.fancyd, a.fancyd, a.fancy");if(0<r.length)return c[e]=r[0],r}}c[e]=!1}}}(e);i&&0<i.length&&(r(i,t),s(i,t,n))}function l(e,t,n){var i=function(e){if("string"==typeof e){var t=c[e];if("object"===o(t))return $(t);if(!1===t);else{var n=$('#container-wrapper a[href^="/articles/'.concat(e,'"]:visible'));if(0<n.length){var i=Object(a.dedupeArray)(n.map(function(e,t){return $(t).closest("div.article_item").get(0)}).toArray());if(i&&0<i.length){var r=$(i[0]).find("button.fancy, button.fancyd, a.fancyd, a.fancy");if(0<r.length)return c[e]=r[0],r}}c[e]=!1}}}(e);i&&0<i.length&&(r(i,t),s(i,t,n))}},function(e,t){e.exports=__F.Redux},function(e,t){e.exports=__F.ReactRouter},function(e,C,Xe){"use strict";(function(Ge){Xe.d(C,"c",function(){return e}),Xe.d(C,"b",function(){return t}),Xe.d(C,"a",function(){return E}),Xe.d(C,"d",function(){return O});var n=Xe(0),s=Xe.n(n),o=Xe(1),l=Xe(29),c=Xe(28),u=Xe(5);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function h(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?g(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var e=function(e){function a(){var e,n;d(this,a);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return y(g(n=h(this,(e=m(a)).call.apply(e,[this].concat(i)))),"lastarticleID",null),y(g(n),"state",{showShare:!1,things:[]}),y(g(n),"logExposed",function(e){void 0!==window.LogExposed&&e.forEach(function(e){window.LogExposed.addLog(e.id+"","article")})}),y(g(n),"updateThingList",function(e){null!=e&&$.ajax({type:"get",url:"/rest-api/v1/articles/".concat(e,"/items")}).done(function(e){if(!n.unmounted){var t=Object(o.convertThingsV1ToRest)(e.article_items).map(function(e){if(window.isWhitelabel&&e.sales){var t="".concat(e.html_url);e.url=t,e.html_url=t}return e});n.logExposed(t),n.setState({things:t})}}).fail(function(e){console.warn("updateThingList():",e)})}),n}return v(a,n["Component"]),p(a,[{key:"componentDidMount",value:function(){this.updateThingList(this.props.article.id,!0);var e=Object(o.convertThingsV1ToRest)(this.props.article.things);this.setState({things:e}),this.lastarticleID=this.props.article.id}},{key:"componentDidUpdate",value:function(){var e=this.props;if(this.lastarticleID!==e.article.id){var t=e.article.id;this.lastarticleID=t,this.updateThingList(e.article.id,!0);var n=Object(o.convertThingsV1ToRest)(e.article.things);this.setState({things:n})}}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var n=this,e=this.props,t=e.article,i=e.appContext,r=e.appContext.loggedIn,a=e.hasPagination,o=this.state.things,c=t.options&&t.options.item_header||null;return s.a.createElement("div",{id:"content",className:"content ".concat(0===o.length?"_empty":"")},c&&s.a.createElement("h3",null,c),0<o.length?s.a.createElement(b,{hasPagination:a,length:o.length},o&&o.map(function(e,t){return s.a.createElement(l.a,f({itemIdx:t,itemType:"article",loggedIn:r,key:"timeline-recently-".concat(t),onDelete:n.handleDelete,viewer:n.props.appContext.viewer,appContext:i,showDelete:!1},e))})):null)}}]),a}(),b=function(e){function a(){var e,n;d(this,a);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return y(g(n=h(this,(e=m(a)).call.apply(e,[this].concat(i)))),"state",{page:0}),y(g(n),"handlePrevClick",function(e){e.preventDefault();n.setState({page:Math.max(n.state.page-1,0)})}),y(g(n),"handleNextClick",function(e){e.preventDefault();var t=Math.floor(n.props.length/4)-1;n.setState({page:Math.min(n.state.page+1,t)})}),n}return v(a,n["Component"]),p(a,[{key:"render",value:function(){var e=this.props,t=e.hasPagination,n=e.children,i={};t&&(i.transform="translateX(".concat(-101*this.state.page,"%)"));var r=s.a.createElement("ol",{className:"stream after",style:i},n);return t?s.a.createElement("div",{className:"itemSlide"},s.a.createElement("div",{className:"itemSlideWrap"},r),s.a.createElement("a",{href:"#",className:"prev",onClick:this.handlePrevClick},"Prev"),s.a.createElement("a",{href:"#",className:"next",onClick:this.handleNextClick},"Next")):r}}]),a}(),w=s.a.createElement("h3",{className:"stit"},"MORE ARTICLES"),_=s.a.createElement("div",null),t=function(e){function r(){var e,o;d(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return y(g(o=h(this,(e=m(r)).call.apply(e,[this].concat(n)))),"lastarticleID",null),y(g(o),"state",{articles:[],page:1}),y(g(o),"updateArticleList",function(n){null!=n&&$.ajax({type:"get",url:window.isWhitelabel?"/rest-api/v1/articles?limit=4&concise=true":"/rest-api/v1/articles?featured"}).done(function(e){if(!o.unmounted){var t=e.articles.filter(function(e){return e.id!==n});o.setState({articles:t})}}).fail(function(e){console.warn("updateArticleList():",e)})}),y(g(o),"handlePrevClick",function(e){e.preventDefault(),$(e.target).hasClass("disabled")||o.setState({page:o.state.page-1})}),y(g(o),"handleNextClick",function(e){e.preventDefault(),$(e.target).hasClass("disabled")||o.setState({page:o.state.page+1})}),y(g(o),"getLeftOffset",function(){var e=o.state,t=e.articles,n=e.page,i=-860*(n-1)-(1<n?4:0),r=(t.length/4|0)+(0<t.length%4?1:0);if(4<t.length&&r<=n){var a=10*(t.length-1)+205*t.length-970+28;return"".concat(Math.max(i,-a),"px")}return i}),o}return v(r,n["Component"]),p(r,[{key:"componentDidMount",value:function(){this.updateArticleList(this.props.article.id),this.lastarticleID=this.props.article.id}},{key:"componentDidUpdate",value:function(){var e=this.props;if(this.lastarticleID!==e.article.id){var t=e.article.id;this.lastarticleID=t,this.updateArticleList(e.article.id,!0)}}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var n=this.props.appContext,e=this.state,t=e.articles,i=e.page,r=1==i,a=i==Math.ceil(t.length/4);return s.a.createElement("div",{id:"sidebar"},s.a.createElement("div",{className:"wrapper recommend-article"},w,t.length?s.a.createElement("div",{className:"article_wrap",style:{left:this.getLeftOffset()}},t&&t.map(function(e,t){return s.a.createElement(c.a,f({itemIdx:t,appContext:n},e))})):_,4<t.length&&s.a.createElement("div",{className:"paging"},s.a.createElement("a",{href:"#",className:"".concat(r?"disabled":""," prev"),onClick:this.handlePrevClick},"Prev"),s.a.createElement("a",{href:"#",className:"".concat(a?"disabled":""," next"),onClick:this.handleNextClick},"Next"))))}}]),r}(),a=s.a.createElement("h2",null,"Admin Panel"),S=s.a.createElement("label",null,"Live"),E=function(e){function t(e){var o;return d(this,t),y(g(o=h(this,m(t).call(this,e))),"handleLiveClick",function(e){e.preventDefault();var n=g(o),i=$(e.target),r=o.props.article,t="Are you sure you want to set ".concat(r.title," live on ").concat(window.isWhitelabel?"Gear":"Fancy","?");i.hasClass("on")&&(t="Are you sure you want to hide ".concat(r.title," from ").concat(window.isWhitelabel?"Gear":"Fancy","?"));var a=window.alertify.labels;window.alertify.set({labels:{ok:i.hasClass("on")?"Hide":"Set Live",cancel:"Cancel"}}),window.alertify.confirm(t,function(e){if(e){var t=!i.hasClass("on");$.post("/_admin/articles/update_active.json",{article_id:r.id,is_active:t},function(e){e.error?window.alertify.alert(e.error):(window.alertify.alert(t?"Activated":"Deactivated"),n.setState({is_active:t}),u.b.update(n.props.article.slug,void 0,"is_active",t))})}}),window.alertify.set({labels:a})}),y(g(o),"handleEditArticleClick",function(e){e.preventDefault();var t=o.props.article;window.open("/_admin/articles/edit?id=".concat(t.id))}),o.state={is_active:e.article.is_active},o}return v(t,n["Component"]),p(t,[{key:"render",value:function(){var e=this.state.is_active;return s.a.createElement("div",{className:"admin-header"},s.a.createElement("div",{className:"inner"},a,s.a.createElement("a",{onClick:this.handleEditArticleClick},"Edit Article"),S,s.a.createElement("button",{className:"".concat(e?"on":""," btn-switch"),onClick:this.handleLiveClick})))}}]),t}();function O(e){!function(a,r,e,f){function c(e,t,n){return setTimeout(s(e,n),t)}function i(e,t,n){return!!Array.isArray(e)&&(o(e,n[t],n),!0)}function o(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==f)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function t(i,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=a.console&&(a.console.warn||a.console.log);return n&&n.call(a.console,r,t),i.apply(this,arguments)}}function n(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&Z(i,n)}function s(e,t){return function(){return e.apply(t,arguments)}}function l(e,t){return ze(e)==ee?e.apply(t&&t[0]||f,t):e}function u(e,t){return e===f?t:e}function d(t,e,n){o(g(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){o(g(e),function(e){t.removeEventListener(e,n,!1)})}function h(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return-1<e.indexOf(t)}function g(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function b(e,n,t){for(var i=[],r=[],a=0;a<e.length;){var o=n?e[a][n]:e[a];v(r,o)<0&&i.push(e[a]),r[a]=o,a++}return t&&(i=n?i.sort(function(e,t){return e[n]>t[n]}):i.sort()),i}function w(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),a=0;a<J.length;){if((i=(n=J[a])?n+r:t)in e)return i;a++}return f}function _(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}function S(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){l(t.options.enable,[t])&&n.handler(e)},this.init()}function E(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,a=t&pe&&i-r==0,o=t&(he|me)&&i-r==0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=O(t)),1<r&&!n.firstMultiple?n.firstMultiple=O(t):1===r&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,c=o?o.center:a.center,s=t.center=C(i);t.timeStamp=ie(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=I(c,s),t.distance=A(c,s),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};t.eventType!==pe&&a.eventType!==he||(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=x(t.deltaX,t.deltaY);var l=T(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=ne(l.x)>ne(l.y)?l.x:l.y,t.scale=o?function(e,t){return A(t[0],t[1],Ce)/A(e[0],e[1],Ce)}(o.pointers,i):1,t.rotation=o?function(e,t){return I(t[1],t[0],Ce)+I(e[1],e[0],Ce)}(o.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,a,o=e.lastInterval||t,c=t.timeStamp-o.timeStamp;if(t.eventType!=me&&(de<c||o.velocity===f)){var s=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,u=T(c,s,l);i=u.x,r=u.y,n=ne(u.x)>ne(u.y)?u.x:u.y,a=x(s,l),e.lastInterval=t}else n=o.velocity,i=o.velocityX,r=o.velocityY,a=o.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=a}(n,t);var u=e.element;h(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function O(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:te(e.pointers[n].clientX),clientY:te(e.pointers[n].clientY)},n++;return{timeStamp:ie(),pointers:t,center:C(t),deltaX:e.deltaX,deltaY:e.deltaY}}function C(e){var t=e.length;if(1===t)return{x:te(e[0].clientX),y:te(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:te(n/t),y:te(i/t)}}function T(e,t,n){return{x:t/e||0,y:n/e||0}}function x(e,t){return e===t?ge:ne(e)>=ne(t)?e<0?ve:ye:t<0?be:we}function A(e,t,n){n||(n=Oe);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function I(e,t,n){n||(n=Oe);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function D(){this.evEl=xe,this.evWin=Ae,this.pressed=!1,S.apply(this,arguments)}function k(){this.evEl=ke,this.evWin=je,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function j(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,S.apply(this,arguments)}function P(){this.evTarget=Me,this.targetIds={},S.apply(this,arguments)}function N(){S.apply(this,arguments);var e=s(this.handler,this);this.touch=new P(this.manager,e),this.mouse=new D(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function M(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);-1<e&&i.splice(e,1)},Fe)}}function F(e,t){this.manager=e,this.set(t)}function R(e){this.options=Z({},this.defaults,e||{}),this.id=oe++,this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=qe,this.simultaneous={},this.requireFail=[]}function L(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function $(e){return e==we?"down":e==be?"up":e==ve?"left":e==ye?"right":""}function U(e,t){var n=t.manager;return n?n.get(e):e}function H(){R.apply(this,arguments)}function W(){H.apply(this,arguments),this.pX=null,this.pY=null}function Y(){H.apply(this,arguments)}function V(){R.apply(this,arguments),this._timer=null,this._input=null}function q(){H.apply(this,arguments)}function G(){H.apply(this,arguments)}function z(){R.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function X(e,t){return(t=t||{}).recognizers=u(t.recognizers,X.defaults.preset),new B(e,t)}function B(e,t){this.options=Z({},X.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=function(e){var t=e.options.inputClass;return new(t||(se?k:le?P:ce?N:D))(e,E)}(this),this.touchAction=new F(this,this.options.touchAction),Q(this,!0),o(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Q(n,i){var r,a=n.element;a.style&&(o(n.options.cssProps,function(e,t){r=w(a.style,t),i?(n.oldCssProps[r]=a.style[r],a.style[r]=e):a.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}var Z,J=["","webkit","Moz","MS","ms","o"],K=r.createElement("div"),ee="function",te=Math.round,ne=Math.abs,ie=Date.now;Z="function"!=typeof Object.assign?function(e){if(e===f||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==f&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var re=t(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===f)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),ae=t(function(e,t){return re(e,t,!0)},"merge","Use `assign`."),oe=1,ce="ontouchstart"in a,se=w(a,"PointerEvent")!==f,le=ce&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ue="touch",fe="mouse",de=25,pe=1,he=4,me=8,ge=1,ve=2,ye=4,be=8,we=16,_e=ve|ye,Se=be|we,Ee=_e|Se,Oe=["x","y"],Ce=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(_(this.element),this.evWin,this.domHandler)}};var Te={mousedown:pe,mousemove:2,mouseup:he},xe="mousedown",Ae="mousemove mouseup";n(D,S,{handler:function(e){var t=Te[e.type];t&pe&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=he),this.pressed&&(t&he&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:fe,srcEvent:e}))}});var Ie={pointerdown:pe,pointermove:2,pointerup:he,pointercancel:me,pointerout:me},De={2:ue,3:"pen",4:fe,5:"kinect"},ke="pointerdown",je="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(ke="MSPointerDown",je="MSPointerMove MSPointerUp MSPointerCancel"),n(k,S,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ie[i],a=De[e.pointerType]||e.pointerType,o=a==ue,c=v(t,e.pointerId,"pointerId");r&pe&&(0===e.button||o)?c<0&&(t.push(e),c=t.length-1):r&(he|me)&&(n=!0),c<0||(t[c]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(c,1))}});var Pe={touchstart:pe,touchmove:2,touchend:he,touchcancel:me};n(j,S,{handler:function(e){var t=Pe[e.type];if(t===pe&&(this.started=!0),this.started){var n=function(e,t){var n=y(e.touches),i=y(e.changedTouches);return t&(he|me)&&(n=b(n.concat(i),"identifier",!0)),[n,i]}.call(this,e,t);t&(he|me)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:ue,srcEvent:e})}}});var Ne={touchstart:pe,touchmove:2,touchend:he,touchcancel:me},Me="touchstart touchmove touchend touchcancel";n(P,S,{handler:function(e){var t=Ne[e.type],n=function(e,t){var n=y(e.touches),i=this.targetIds;if(t&(2|pe)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,o=y(e.changedTouches),c=[],s=this.target;if(a=n.filter(function(e){return h(e.target,s)}),t===pe)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&c.push(o[r]),t&(he|me)&&delete i[o[r].identifier],r++;return c.length?[b(a.concat(c),"identifier",!0),c]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:ue,srcEvent:e})}});var Fe=2500;n(N,S,{handler:function(e,t,n){var i=n.pointerType==ue,r=n.pointerType==fe;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(e,t){e&pe?(this.primaryTouch=t.changedPointers[0].identifier,M.call(this,t)):e&(he|me)&&M.call(this,t)}).call(this,t,n);else if(r&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],a=Math.abs(t-r.x),o=Math.abs(n-r.y);if(a<=25&&o<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Re=w(K.style,"touchAction"),Le=Re!==f,$e="compute",Ue="manipulation",He="none",We="pan-x",Ye="pan-y",Ve=function(){if(!Le)return!1;var t={},n=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||a.CSS.supports("touch-action",e)}),t}();F.prototype={set:function(e){e==$e&&(e=this.compute()),Le&&this.manager.element.style&&Ve[e]&&(this.manager.element.style[Re]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){l(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(m(e,He))return He;var t=m(e,We),n=m(e,Ye);return t&&n?He:t||n?t?We:Ye:m(e,Ue)?Ue:"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(!this.manager.session.prevented){var i=this.actions,r=m(i,He)&&!Ve[He],a=m(i,Ye)&&!Ve[Ye],o=m(i,We)&&!Ve[We];if(r){var c=1===e.pointers.length,s=e.distance<2,l=e.deltaTime<250;if(c&&s&&l)return}return o&&a?void 0:r||a&&n&_e||o&&n&Se?this.preventSrc(t):void 0}t.preventDefault()},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var qe=1;R.prototype={defaults:{},set:function(e){return Z(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(i(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=U(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return i(e,"dropRecognizeWith",this)||(e=U(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(i(e,"requireFailure",this))return this;var t=this.requireFail;return-1===v(t,e=U(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(i(e,"dropRequireFailure",this))return this;e=U(e,this);var t=v(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<8&&e(n.options.event+L(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),8<=i&&e(n.options.event+L(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|qe)))return!1;e++}return!0},recognize:function(e){var t=Z({},e);return l(this.options.enable,[this,t])?(56&this.state&&(this.state=qe),this.state=this.process(t),void(30&this.state&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},n(H,R,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,r=this.attrTest(e);return i&&(n&me||!r)?16|t:i||r?n&he?8|t:2&t?4|t:2:32}}),n(W,H,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ee},getTouchAction:function(){var e=this.options.direction,t=[];return e&_e&&t.push(Ye),e&Se&&t.push(We),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,a=e.deltaX,o=e.deltaY;return r&t.direction||(i=t.direction&_e?(r=0===a?ge:a<0?ve:ye,n=a!=this.pX,Math.abs(e.deltaX)):(r=0===o?ge:o<0?be:we,n=o!=this.pY,Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return H.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=$(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),n(Y,H,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),n(V,R,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(he|me)&&!r)this.reset();else if(e.eventType&pe)this.reset(),this._timer=c(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&he)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&he?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ie(),this.manager.emit(this.options.event,this._input)))}}),n(q,H,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),n(G,H,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:_e|Se,pointers:1},getTouchAction:function(){return W.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(_e|Se)?t=e.overallVelocity:n&_e?t=e.overallVelocityX:n&Se&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ne(t)>this.options.velocity&&e.eventType&he},emit:function(e){var t=$(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),n(z,R,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ue]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&pe&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=he)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||A(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),X.VERSION="2.0.8",X.defaults={domEvents:!1,touchAction:$e,enable:!0,inputTarget:null,inputClass:null,preset:[[q,{enable:!1}],[Y,{enable:!1},["rotate"]],[G,{direction:_e}],[W,{direction:_e},["swipe"]],[z],[z,{event:"doubletap",taps:2},["tap"]],[V]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};B.prototype={set:function(e){return Z(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(r=t.curRecognizer=n),a++}},get:function(e){if(e instanceof R)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(i(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(i(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=v(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==f&&t!==f){var n=this.handlers;return o(g(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==f){var n=this.handlers;return o(g(e),function(e){t?n[e]&&n[e].splice(v(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=r.createEvent("Event");n.initEvent(e,!0,!0),(n.gesture=t).target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&Q(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Z(X,{INPUT_START:pe,INPUT_MOVE:2,INPUT_END:he,INPUT_CANCEL:me,STATE_POSSIBLE:qe,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:ge,DIRECTION_LEFT:ve,DIRECTION_RIGHT:ye,DIRECTION_UP:be,DIRECTION_DOWN:we,DIRECTION_HORIZONTAL:_e,DIRECTION_VERTICAL:Se,DIRECTION_ALL:Ee,Manager:B,Input:S,TouchAction:F,TouchInput:P,MouseInput:D,PointerEventInput:k,TouchMouseInput:N,SingleTouchInput:j,Recognizer:R,AttrRecognizer:H,Tap:z,Pan:W,Swipe:G,Pinch:Y,Rotate:q,Press:V,on:d,off:p,each:o,merge:ae,extend:re,assign:Z,inherit:n,bindFn:s,prefixed:w}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=X,"function"==typeof define&&Xe(45)?define(function(){return X}):Ge.exports?Ge.exports=X:a.Hammer=X}(window,document);var n=$(e);n.find(".description .gallery li:first-child").addClass("active"),n.find(".description .gallery .paging a:first-child").addClass("current"),n.find(".description .gallery img").on("load",function(){for(var e=104,t=0;t<n.find(".description .gallery li").length;t++)e=e+n.find(".description .gallery li:eq("+t+") img").width()+20,n.find(".description .gallery .photo-list").width(e)}),n.find(".description .gallery").each(function(e,i){var r=window.Hammer;new r(i).on("swipe",function(e){var t=e.type,n=e.direction;console.log(e),"swipe"===t&&(n===r.DIRECTION_LEFT?$(i).find(".paging .prev")[0].click():n===r.DIRECTION_RIGHT&&$(i).find(".paging .next")[0].click())})})}}).call(this,Xe(44)(e))},function(e,t){e.exports=__F.ReactDOM},function(e,t){e.exports=__F.ReactRedux},function(e,t,n){var i=n(37);e.exports=function(e){return i(e,{weekStartsOn:1})}},function(e,t){e.exports=function(e){return e instanceof Date}},function(e,t,n){var c=n(15),s=n(22);e.exports=function(e){var t=c(e),n=t.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var r=s(i),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var o=s(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}},function(e,t){e.exports=__F.ReduxThunk},function(e,t,n){var i=n(32),r=n(36),a=n(24),s=n(15),l=n(39),u=n(40);var f={M:function(e){return e.getMonth()+1},MM:function(e){return c(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return c(e.getDate(),2)},DDD:function(e){return i(e)},DDDD:function(e){return c(i(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return r(e)},WW:function(e){return c(r(e),2)},YY:function(e){return c(e.getFullYear(),4).substr(2)},YYYY:function(e){return c(e.getFullYear(),4)},GG:function(e){return String(a(e)).substr(2)},GGGG:function(e){return a(e)},H:function(e){return e.getHours()},HH:function(e){return c(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:12<t?t%12:t},hh:function(e){return c(f.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return c(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return c(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return c(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return c(e.getMilliseconds(),3)},Z:function(e){return o(e.getTimezoneOffset(),":")},ZZ:function(e){return o(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function o(e,t){t=t||"";var n=0<e?"-":"+",i=Math.abs(e),r=i%60;return n+c(Math.floor(i/60),2)+t+c(r,2)}function c(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}e.exports=function(e,t,n){var i=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=(n||{}).locale,a=u.format.formatters,o=u.format.formattingTokensRegExp;r&&r.format&&r.format.formatters&&(a=r.format.formatters,r.format.formattingTokensRegExp&&(o=r.format.formattingTokensRegExp));var c=s(e);return l(c)?function(e,t,n){var i,r,a,o=e.match(n),c=o.length;for(i=0;i<c;i++)r=t[o[i]]||f[o[i]],o[i]=r||((a=o[i]).match(/\[[\s\S]/)?a.replace(/^\[|]$/g,""):a.replace(/\\/g,""));return function(e){for(var t="",n=0;n<c;n++)o[n]instanceof Function?t+=o[n](e,f):t+=o[n];return t}}(i,a,o)(c):"Invalid Date"}},function(e,t){e.exports=__F.ReactImages},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),a=n.n(i),o=n(1),c=n(9);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=a.a.createElement("img",{src:"/_ui/images/common/blank.gif"}),p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(r=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?u(e):t}(this,l(t).call(this,e))),"handleLinkClick",function(e){if(e.stopPropagation(),Object(o.isPlainLeftClick)(e)){e.preventDefault();var t=r.props,n=t.id,i=(t.cover_image,t.title,t.html_url);t.tagline;r.props.backPropagateItem(n,itemType,itemIdx),Object(c.c)(i,c.a.Timeline)}}),r.state={},r.handleLinkClick=_.throttle(r.handleLinkClick,500),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i["Component"]),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.id,e.cover_image),n=e.title,i=e.url,r=e.tagline;return a.a.createElement("div",{className:"article_item detail"},a.a.createElement("a",{href:i},a.a.createElement("span",{className:"cover"},t&&a.a.createElement("img",{src:"/_ui/images/common/blank.gif",style:{backgroundImage:"url(".concat(t.url,")")}}),!t&&d),a.a.createElement("span",{className:"title"},n),a.a.createElement("span",{className:"description"},r)))}}]),t}()},function(e,t,n){"use strict";var i=n(0),y=n.n(i),r=n(10),b=n.n(r),w=n(1),S=n(3),f=n(11);function E(e){return"giftcard"===e.type?gettext("Fancy Gift Card"):function(e){return!Object(w.isEmpty)(e.sales)&&e.sales_available}(e)?e.sales.name:e.name}var c=n(9),h=n(8),g=n(2),s=n(5),l=n(16);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=$(e.currentTarget).find("em");t.css("margin-left","".concat(-t.width()/2-10,"px"))}function C(e){var t=e.user,n=void 0===t?{}:t,i=e.display,r=e.isViewer;return y.a.createElement("a",{href:n.html_url,className:b()("user",{_viewer:r}),onMouseOver:O,style:i},y.a.createElement("img",{src:"/_ui/images/common/blank.gif",style:{backgroundImage:"url(".concat(n.user_square_image_small||n.image_url,")")}}),y.a.createElement("em",null,n.full_name||n.fullname))}function T(e,t){return null!=e&&null!=t&&e.id===t.id}var x=[0,-54,-108,-163,-218,-272,-327,-436,-490,-545,-599,-654,-708,-763,-817,-872,-926,-981,-1035,-1144,-1199,-1253,-1308,-1417,-1471];function A(e){return e?g.a.Addition:g.a.Removal}function I(n,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=e.fancyd,a=e.fancyd_count,t=e.loading,o=!r,c=function(e,t){return!0===e?t+1:t-1}(o,a);t||(i({fancyd:o,loading:!0,fancyd_count:c,fancyStatus:A(o)}),$.ajax({type:"PUT",url:"/rest-api/v1/things/".concat(n),data:{fancyd:o}}).done(function(e){if(e.id&&e.fancyd===!r){var t=!0===e.fancyd?(a||0)+1:(a||0)-1;s.b.update(n,void 0,"fancyd",o),s.b.update(n,void 0,"fancyd_count",t),Object(l.b)(n,o,Object(w.getConciseNumberString)(t)),i({loading:!1,fancyd:o,fancyd_count:t,fancyStatus:function(e){return e?g.a.AfterAddition:g.a.AfterRemoval}(o)})}else i({loading:!1,fancyd:r,fancyd_count:a,fancyStatus:A(r)})}).fail(function(){i({loading:!1,fancyd:r,fancyd_count:a,fancyStatus:A(r)})}))}var D={width:"285px"},k=y.a.createElement("i",null),j=y.a.createElement("span",{className:"_fancyd"}),P=function(e){function t(e){var p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(u(p=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?u(e):t}(this,o(t).call(this,e))),"getFancydCountString",function(){var e=p.state.fancyd_count;return null!=e?Object(w.getConciseNumberString)(e,0):"0"}),v(u(p),"animateFancyBG",function(e){if(void 0===e)p.animateFancyBG(0);else if(e<x.length){var t=x[e];$(p.fancyBGAnimation).css("background-position-x","".concat(t,"px")),setTimeout(function(){p.animateFancyBG(e+1)},10)}else x.length<=e&&p.setState({fancyAnimation:!1})}),v(u(p),"getFancyduserDisplay",function(e,t,n){var i,r=p.props,a=r.appContext.viewer,o=r.bigContainer,c=p.state,s=c.fancyd,l=c.fancyStatus,u=0===t,f=t===n-1;l===g.a.AfterAddition||l===g.a.Addition?n<=2?i=h.Display.Inline:u&&(i=h.Display.Inline):l!==g.a.AfterRemoval&&l!==g.a.Removal||(u?i=h.Display.None:f&&(i=h.Display.Inline));var d=o?6:5;return(l===g.a.AfterAddition||l===g.a.Addition||l===g.a.Removal||s&&l===g.a.Idle)&&d<t&&(i=h.Display.None),l===g.a.Idle&&!s&&T(e,a)&&(i=h.Display.None),i}),v(u(p),"toggleFancy",function(){I(p.props.thing.id,p.state,function(e){p.setState(e)})}),v(u(p),"handleFancydStateOnLoadThing",function(e){null==e&&(e=p.props.thing),function(e,t){var n=t.fancyd,i=t.fancyd_count,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return e};Object(l.b)(e,n,Object(w.getConciseNumberString)(i)),r({fancyd:n,fancyd_count:i,loading:!1,fancyStatus:g.a.Idle})}(e.id,{fancyd:e.fancyd,fancyd_count:e.fancyd_count},function(e){p.setState(e)})}),v(u(p),"handleFancyClick",function(e){if(e.preventDefault(),e.stopPropagation(),p.props.appContext.loggedIn){var t=p.props.thing,n=p.state,i=n.fancyAnimation,r=n.fancyd;n.loading||(r||i||p.setState({fancyAnimation:!0},function(e){p.animateFancyBG()}),r?Object(w.MP)("Unfancy",{thing_id:t.id}):Object(w.MP)("Fancy",{thing_id:t.id}),p.toggleFancy())}else window.require_login&&window.require_login()}),p.state=p._getInitialState(),p.fancyBGAnimationRef=function(e){p.fancyBGAnimation=e},p}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i["Component"]),p(t,[{key:"_getInitialState",value:function(){return{fancyAnimation:!1,fancyd:null,loading:!1,fancyd_count:null,fancyStatus:g.a.Idle}}}]),p(t,[{key:"componentDidMount",value:function(){this.handleFancydStateOnLoadThing()}},{key:"componentDidUpdate",value:function(e){var t=e.thing;t.id===this.props.thing.id&&t.isCrawled===this.props.thing.isCrawled||this.handleFancydStateOnLoadThing(t)}},{key:"render",value:function(){var e,i=this,t=this.props,n=t.appContext,r=n.loggedIn,a=n.viewer,o=t.thing,c=o.fancyd_users,s=o.user,l=t.bigContainer,u=this.state,f=u.fancyd,d=u.fancyAnimation,p=u.fancyStatus,h=[r&&a,r&&!T(a,s)&&s].concat(c&&c.filter(function(e){return!T(e,s)&&!T(e,a)})).filter(function(e){return e});p===g.a.Addition?e="add":p===g.a.Removal&&(e="remove");var m=h.length<=2?"_insuff":"_suff";return y.a.createElement("span",{style:l&&D,className:"fancyd_users-wrap"},y.a.createElement("span",{className:"count"},y.a.createElement("a",{onClick:this.handleFancyClick,className:b()("button button-static fancy _count",{fancyd:f,loading:d})},y.a.createElement("span",{ref:this.fancyBGAnimationRef},k),this.getFancydCountString()),j),y.a.createElement("span",{className:b()("fancyd_user",e,m)},h.map(function(e,t){var n=T(e,a);return y.a.createElement(C,{key:t,user:e,display:i.getFancyduserDisplay(e,t,h.length),isViewer:n})})))}}]),t}(),N=n(12);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return G});var Y={article:{utm:"article",section:"items",via:"article"},similar:{section:"recommended",utm:"rec",via:"thing more"},recently:{section:"recently viewed",utm:"rv",via:"thing more"}},V=y.a.createElement("span",{className:"back"}),q=y.a.createElement("span",{className:"notify-soldout"},"Sorry, this item has sold out"),G=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(U(o=function(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?U(e):t}(this,L(t).call(this,e))),"state",{fancydCount:0,quantity:1,optionID:null,showCart:!1,popupOpened:!1}),W(U(o),"handleCartAddition",function(e){e.preventDefault(),e.stopPropagation(),o.addToCart()}),W(U(o),"handleQuickCartToggle",function(e){e.preventDefault(),e.stopPropagation();var t=o.isSaleAvailable(),n=o.isSaleOptionExists();t?n?o.setState({showCart:!o.state.showCart}):o.addToCart():o.setState({showCart:!o.state.showCart})}),W(U(o),"isSaleAvailable",function(){var e=o.props.sales_available,t=o.getSales();return!!t&&(e&&0!==t.quantity)}),W(U(o),"getSaleOption",function(){var e=o.isSaleOptionExists(),t=o.getSales();if(t&&e){var n=o.state.optionID||t.options[0].id;return t.options.filter(function(e){return e.id===n})[0]||null}return null}),W(U(o),"isSaleOptionExists",function(){var e=o.getSales();return!!e&&!0===e.has_options}),W(U(o),"isSaleOptionAvailable",function(){var e=o.getSaleOption();return!!e&&(!0===e.available_for_sale&&0!==e.quantity)}),W(U(o),"getSales",function(){return o.props.sales}),W(U(o),"getFancydCount",function(){return _.isNumber(o.state.fancydCount)?o.state.fancydCount:o.props.fancyd_count}),W(U(o),"handleFancydCount",function(e){o.setState({fancydCount:o.state.fancydCount+e})}),W(U(o),"getQuantityRange",function(){var e;return o.isSaleOptionExists()&&o.isSaleOptionAvailable()?e=o.getSaleOption().quantity:o.isSaleAvailable()&&(e=o.getSales().quantity),null==e?["1"]:_.range(1,Math.min(10,e+1))}),W(U(o),"handleOptionChange",function(e){e.preventDefault(),e.stopPropagation(),o.setState({optionID:parseInt(e.target.value,10),quantity:1})}),W(U(o),"handleOptionQuantityChange",function(e){e.preventDefault(),e.stopPropagation(),o.setState({quantity:parseInt(e.target.value,10)})}),W(U(o),"handleTrickClick",function(e){e.preventDefault(),e.stopPropagation(),o.setState({showCart:!1})}),W(U(o),"handleRecentlyDelete",function(){$.post("/remove_recently_viewed_thing",{thing_id:o.props.id},function(e){e&&1===e.status_code?o.props.onDelete(o.props):window.alertify.alert('Sorry, failed to remove "'.concat(o.props.name,'". Please retry.'))}).fail(function(){window.alertify.alert('Sorry, failed to remove "'.concat(o.props.name,'". Please retry.'))})}),W(U(o),"handleLinkClick",function(e){if(e.stopPropagation(),Object(w.isPlainLeftClick)(e)){e.preventDefault(),window.isWhitelabel||N.a.get().scrollTop(0);var t=o.props,n=t.backPropagateItem,i=t.id,r=t.itemType,a=t.itemIdx;n&&n(i,r,a),Object(c.c)(o.html_url(),c.a.Timeline)}}),W(U(o),"handleShowSomething",function(e){o.setState({popupOpened:e})}),W(U(o),"handleNotifySoldout",function(e){if(e.preventDefault(),e.stopPropagation(),f.a.loggedIn){var t=o.getSales(),n={sale_item_id:t.sale_id};o.getWaiting(t)&&(n.remove=1),$.ajax({type:"post",url:"/wait_for_product.json",data:n,dataType:"json"}).done(function(e){if(e&&null!=e.status_code)if(0==e.status_code&&e.message)window.alertify.alert(e.message);else{var t=!n.remove;o.setState({waiting:t})}}).fail(function(e){e&&e.message?window.alertify.alert(e.message):window.alertify.alert("There was an error while processing your request. Please try again later.")})}else window.require_login&&window.require_login()}),W(U(o),"getWaiting",function(){var e=o.getSales();return!!e&&(null==o.state.waiting?e.waiting:o.state.waiting)}),W(U(o),"html_url",function(){var e=(Y[o.props.itemType]||{}).utm;return"".concat(o.props.html_url).concat(e?"?utm="+e:"")}),o.handleLinkClick=_.throttle(o.handleLinkClick,500),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,i["Component"]),function(e,t,n){t&&R(e.prototype,t),n&&R(e,n)}(t,[{key:"componentDidMount",value:function(){this.setState({fancydCount:this.props.fancyd_count||0})}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"addToCart",value:function(){var t=this;if(f.a.loggedIn){var e=this.props,n=e.id,i=e.itemType,r=this.state.quantity,a=this.getSales(),o=this.isSaleAvailable(),c=this.isSaleOptionExists(),s=this.getSaleOption();if(o&&!this.state.loading)if(isNaN(r)||r<=0)alert(gettext("Please select a valid quantity."));else{var l={seller_id:a.seller.id,thing_id:n,sale_item_id:a.sale_id,quantity:r};c&&s&&(l.option_id=s.id);var u=Y[i];this.setState({loading:!0},function(){var e={salesID:a.sale_id,utm:u.utm,section:u.section,via:u.via};s&&(e.saleOptionID=s.id),function(e){var t=e.salesID,n=e.saleOptionID,i=e.utm,r=e.section,a=e.via;if(null!=t){if(null==i){var o=Object(w.getLocationArgPairs)("utm");o&&(i=o[1])}var c={"sale id":t,via:a||"thing page",utm:i};r&&(c.section=r),n&&t!==n&&(c["option id"]=n);try{window.track_event&&track_event("Add to Cart",c)}catch(e){}}}(e),function(n,e){n.from_sds_page=window.from_sds_page,window.dataLayer&&window.dataLayer.push({event:"Add_to_Cart_Button",product_id:n.sale_item_id,option_id:n.option_id,products:void 0,products_info:void 0,revenue:void 0}),$.ajax({type:"POST",url:"/add_item_to_cart.json",data:n}).done(function(e){if(e&&null!=e.status_code)if(1===e.status_code){var t={THING_ID:n.thing_id,ITEMCODE:e.itemcode,THUMBNAIL_IMAGE_URL:e.image_url,ITEMNAME:e.itemname,QUANTITY:e.quantity,PRICE:e.price,OPTIONS:e.option,HTML_URL:e.html_url,CART_ID:e.cart_id};e.fancy_price&&(t.FANCY_PRICE=e.fancy_price),Fancy.Cart.addItem(t),Fancy.Cart.openPopup()}else 0==e.status_code&&e.message&&alert(e.message)}).always(function(){e&&e()})}(l,function(){t.unmounted||t.setState({loading:!1})})})}}else window.require_login&&window.require_login()}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.thumb_image_url_310,i=e.itemIdx,r=e.loggedIn,a=e.viewer,o=e.showDelete,c=this.state,s=c.showCart,l=c.loading,u=c.popupOpened,f=this.html_url(),d=this.getSales(),p=d&&"0"!==d.discount_percentage,h=this.getWaiting(),m=this.isSaleAvailable(),g=this.isSaleOptionExists(),v=this.isSaleOptionAvailable();return y.a.createElement("li",{className:b()({"quick-cart":l,active:u||s})},y.a.createElement("div",{className:b()("figure-item",{toggled:s})},y.a.createElement("figure",null,y.a.createElement("a",{href:f,rel:"thing-".concat(t),onClick:this.handleLinkClick},V,y.a.createElement("img",{className:"figure",style:{backgroundImage:"url(".concat(n,")")},src:"/_ui/images/common/blank.gif"}))),y.a.createElement("figcaption",null,y.a.createElement("span",{className:b()("show_cart",{opened:s}),style:{display:d?null:"none"}},d&&y.a.createElement("button",{className:"btn-cart nopopup ".concat(p?"sales":""," ").concat(m?"":"soldout"),onClick:this.handleQuickCartToggle},y.a.createElement("em",null,[p&&y.a.createElement("small",{key:"ThingCard2-price-deal"},"$",Object(w.numberFormat)(d.price,0)),"$".concat(Object(w.numberFormat)(d.deal_price,0))])),y.a.createElement("em",{className:"sale-item-input"},y.a.createElement("small",{className:"trick",style:{display:s?"block":null},onClick:this.handleTrickClick}),m?y.a.createElement("span",{className:"frm"},g&&y.a.createElement("select",{name:"option_id",id:"".concat(t,"-option_id"),onChange:this.handleOptionChange},d.options.map(function(e,t){return y.a.createElement("option",{key:"other-item-".concat(i,"-saleoption-").concat(t),value:e.id},e.option," -"," ",e.available_for_sale&&0!==e.quantity?"$".concat(Object(w.numberFormat)(e.deal_price,0)):gettext("Sold out"))})),y.a.createElement("select",{className:"option",id:"".concat(t,"-quantity"),name:"quantity",disabled:!v,onChange:this.handleOptionQuantityChange},this.getQuantityRange().map(function(e,t){return y.a.createElement("option",{key:"other-item-".concat(i,"-quantityOption-").concat(t),value:e},e)})),y.a.createElement("button",{className:"add_to_cart btns-green-embo",onClick:this.handleCartAddition,disabled:!v},gettext("Add to Cart"))):y.a.createElement("span",{className:"frm"},q,y.a.createElement("button",{className:b()("btns-green-embo btn-notify",{subscribed:h}),onClick:this.handleNotifySoldout},h?"Subscribed":"Notify me when available")))),y.a.createElement("a",F({href:f,className:"title",rel:"thing-".concat(t),onClick:this.handleLinkClick},function(e){var t=e.emojified_name,n=e.name;return t?{dangerouslySetInnerHTML:{__html:t}}:{children:n}}(this.props))),y.a.createElement("span",{className:b()("buttons")},y.a.createElement(P,{thing:this.props,appContext:this.props.appContext}),y.a.createElement(S.MoreShare,{objectType:"thing",objectId:t,loggedIn:r,title:E(this.props),viewerUsername:a.username,onShowSomething:this.handleShowSomething}))),o&&y.a.createElement("a",{className:"delete",onClick:this.handleRecentlyDelete})))}}]),t}();W(G,"defaultProps",{showDelete:!0})},function(e,t,n){(function(C){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function g(e,t,n){g.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function v(e,t){v.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function y(e,t){y.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function b(e,t,n){b.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function w(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e}function _(e){var t=void 0===e?"undefined":E(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function S(i,r,a,o,e,t,c){c=c||[];var s=(e=e||[]).slice(0);if(void 0!==t){if(o){if("function"==typeof o&&o(s,t))return;if("object"===(void 0===o?"undefined":E(o))){if(o.prefilter&&o.prefilter(s,t))return;if(o.normalize){var n=o.normalize(s,t,i,r);n&&(i=n[0],r=n[1])}}}s.push(t)}"regexp"===_(i)&&"regexp"===_(r)&&(i=i.toString(),r=r.toString());var l=void 0===i?"undefined":E(i),u=void 0===r?"undefined":E(r),f="undefined"!==l||c&&c[c.length-1].lhs&&c[c.length-1].lhs.hasOwnProperty(t),d="undefined"!==u||c&&c[c.length-1].rhs&&c[c.length-1].rhs.hasOwnProperty(t);if(!f&&d)a(new v(s,r));else if(!d&&f)a(new y(s,i));else if(_(i)!==_(r))a(new g(s,i,r));else if("date"===_(i)&&i-r!=0)a(new g(s,i,r));else if("object"===l&&null!==i&&null!==r)if(c.filter(function(e){return e.lhs===i}).length)i!==r&&a(new g(s,i,r));else{if(c.push({lhs:i,rhs:r}),Array.isArray(i)){var p;for(i.length,p=0;p<i.length;p++)p>=r.length?a(new b(s,p,new y(void 0,i[p]))):S(i[p],r[p],a,o,s,p,c);for(;p<r.length;)a(new b(s,p,new v(void 0,r[p++])))}else{var h=Object.keys(i),m=Object.keys(r);h.forEach(function(e,t){var n=m.indexOf(e);0<=n?(S(i[e],r[e],a,o,s,e,c),m=w(m,n)):S(i[e],void 0,a,o,s,e,c)}),m.forEach(function(e){S(void 0,r[e],a,o,s,e,c)})}c.length=c.length-1}else i!==r&&("number"===l&&isNaN(i)&&isNaN(r)||a(new g(s,i,r)))}function a(e,t,n,i){return i=i||[],S(e,t,function(e){e&&i.push(e)},n),i.length?i:void 0}function r(e,t,n){if(e&&t&&n&&n.kind){for(var i=e,r=-1,a=n.path?n.path.length-1:0;++r<a;)void 0===i[n.path[r]]&&(i[n.path[r]]="number"==typeof n.path[r]?[]:{}),i=i[n.path[r]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){var r,a=t[n],o=i.path.length-1;for(r=0;r<o;r++)a=a[i.path[r]];switch(i.kind){case"A":e(a[i.path[r]],i.index,i.item);break;case"D":delete a[i.path[r]];break;case"E":case"N":a[i.path[r]]=i.rhs}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":t=w(t,n);break;case"E":case"N":t[n]=i.rhs}return t}(n.path?i[n.path[r]]:i,n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}}function o(e,t,n){if(n.path&&n.path.length){var i,r=e[t],a=n.path.length-1;for(i=0;i<a;i++)r=r[n.path[i]];switch(n.kind){case"A":o(r[n.path[i]],n.index,n.item);break;case"D":case"E":r[n.path[i]]=n.lhs;break;case"N":delete r[n.path[i]]}}else switch(n.kind){case"A":o(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=w(e,t)}return e}function N(e,t,i,n){var r=a(e,t);try{n?i.groupCollapsed("diff"):i.group("diff")}catch(e){i.log("diff")}r?r.forEach(function(e){var t=e.kind,n=function(e){var t=e.kind,n=e.path,i=e.lhs,r=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),i,"→",r];case"N":return[n.join("."),r];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}(e);i.log.apply(i,["%c "+d[t].text,function(e){return"color: "+d[e].color+"; font-weight: bold"}(t)].concat(u(n)))}):i.log("—— no diff ——");try{i.groupEnd()}catch(e){i.log("—— diff end —— ")}}function M(e,t,n,i){switch(void 0===e?"undefined":E(e)){case"object":return"function"==typeof e[i]?e[i].apply(e,u(n)):e[i];case"function":return e(t);default:return e}}function p(O,C){var T=C.logger,x=C.actionTransformer,e=C.titleFormatter,A=void 0===e?function(e){var r=e.timestamp,a=e.duration;return function(e,t,n){var i=["action"];return i.push("%c"+String(e.type)),r&&i.push("%c@ "+t),a&&i.push("%c(in "+n.toFixed(2)+" ms)"),i.join(" ")}}(C):e,I=C.collapsed,D=C.colors,k=C.level,j=C.diff,P=void 0===C.titleFormatter;O.forEach(function(e,t){var n=e.started,i=e.startedTime,r=e.action,a=e.prevState,o=e.error,c=e.took,s=e.nextState,l=O[t+1];l&&(s=l.prevState,c=l.started-n);var u=x(r),f="function"==typeof I?I(function(){return s},r,e):I,d=F(i),p=D.title?"color: "+D.title(u)+";":"",h=["color: gray; font-weight: lighter;"];h.push(p),C.timestamp&&h.push("color: gray; font-weight: lighter;"),C.duration&&h.push("color: gray; font-weight: lighter;");var m=A(u,d,c);try{f?D.title&&P?T.groupCollapsed.apply(T,["%c "+m].concat(h)):T.groupCollapsed(m):D.title&&P?T.group.apply(T,["%c "+m].concat(h)):T.group(m)}catch(e){T.log(m)}var g=M(k,u,[a],"prevState"),v=M(k,u,[u],"action"),y=M(k,u,[o,a],"error"),b=M(k,u,[s],"nextState");if(g)if(D.prevState){var w="color: "+D.prevState(a)+"; font-weight: bold";T[g]("%c prev state",w,a)}else T[g]("prev state",a);if(v)if(D.action){var _="color: "+D.action(u)+"; font-weight: bold";T[v]("%c action    ",_,u)}else T[v]("action    ",u);if(o&&y)if(D.error){var S="color: "+D.error(o,a)+"; font-weight: bold;";T[y]("%c error     ",S,o)}else T[y]("error     ",o);if(b)if(D.nextState){var E="color: "+D.nextState(s)+"; font-weight: bold";T[b]("%c next state",E,s)}else T[b]("next state",s);j&&N(a,s,T,f);try{T.groupEnd()}catch(e){T.log("—— log end ——")}})}function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=Object.assign({},m,e),t=o.logger,c=o.stateTransformer,s=o.errorTransformer,l=o.predicate,u=o.logErrors,f=o.diffPredicate;if(void 0===t)return function(){return function(t){return function(e){return t(e)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(t){return function(e){return t(e)}}};var d=[];return function(e){var a=e.getState;return function(r){return function(e){if("function"==typeof l&&!l(a,e))return r(e);var t={};d.push(t),t.started=h.now(),t.startedTime=new Date,t.prevState=c(a()),t.action=e;var n=void 0;if(u)try{n=r(e)}catch(e){t.error=s(e)}else n=r(e);t.took=h.now()-t.started,t.nextState=c(a());var i=o.diff&&"function"==typeof f?f(a,e):o.diff;if(p(d,Object.assign({},o,{diff:i})),d.length=0,t.error)throw t.error;return n}}}}var c,s,l=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},F=function(e){return l(e.getHours(),2)+":"+l(e.getMinutes(),2)+":"+l(e.getSeconds(),2)+"."+l(e.getMilliseconds(),3)},h="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},f=[];c="object"===(void 0===C?"undefined":E(C))&&C?C:"undefined"!=typeof window?window:{},(s=c.DeepDiff)&&f.push(function(){void 0!==s&&c.DeepDiff===a&&(c.DeepDiff=s,s=void 0)}),t(g,n),t(v,n),t(y,n),t(b,n),Object.defineProperties(a,{diff:{value:a,enumerable:!0},observableDiff:{value:S,enumerable:!0},applyDiff:{value:function(t,n,i){if(t&&n){var e=function(e){i&&!i(t,n,e)||r(t,n,e)};S(t,n,e)}},enumerable:!0},applyChange:{value:r,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var i,r,a=e;for(r=n.path.length-1,i=0;i<r;i++)void 0===a[n.path[i]]&&(a[n.path[i]]={}),a=a[n.path[i]];switch(n.kind){case"A":o(a[n.path[i]],n.index,n.item);break;case"D":case"E":a[n.path[i]]=n.lhs;break;case"N":delete a[n.path[i]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==s},enumerable:!0},noConflict:{value:function(){return f&&(f.forEach(function(e){e()}),f=null),a},enumerable:!0}});var d={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},m={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},O=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?i()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=m,e.createLogger=i,e.logger=O,e.default=O,Object.defineProperty(e,"__esModule",{value:!0})}(t)}).call(this,n(31))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(15),r=n(33),a=n(34);e.exports=function(e){var t=i(e);return a(t,r(t))+1}},function(e,t,n){var i=n(15);e.exports=function(e){var t=i(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},function(e,t,n){var o=n(35);e.exports=function(e,t){var n=o(e),i=o(t),r=n.getTime()-6e4*n.getTimezoneOffset(),a=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((r-a)/864e5)}},function(e,t,n){var i=n(15);e.exports=function(e){var t=i(e);return t.setHours(0,0,0,0),t}},function(e,t,n){var i=n(15),r=n(22),a=n(38);e.exports=function(e){var t=i(e),n=r(t).getTime()-a(t).getTime();return Math.round(n/6048e5)+1}},function(e,t,n){var o=n(15);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,i=o(e),r=i.getDay(),a=(r<n?7:0)+r-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}},function(e,t,n){var i=n(24),r=n(22);e.exports=function(e){var t=i(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),r(n)}},function(e,t,n){var i=n(23);e.exports=function(e){if(i(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")}},function(e,t,n){var i=n(41),r=n(42);e.exports={distanceInWords:i(),format:r()}},function(e,t){e.exports=function(){var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,t,n){var i;return n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix?0<n.comparison?"in "+i:i+" ago":i}}}},function(e,t,n){var l=n(43);e.exports=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["AM","PM"],c=["am","pm"],s=["a.m.","p.m."],e={MMM:function(e){return t[e.getMonth()]},MMMM:function(e){return n[e.getMonth()]},dd:function(e){return i[e.getDay()]},ddd:function(e){return r[e.getDay()]},dddd:function(e){return a[e.getDay()]},A:function(e){return 1<=e.getHours()/12?o[1]:o[0]},a:function(e){return 1<=e.getHours()/12?c[1]:c[0]},aa:function(e){return 1<=e.getHours()/12?s[1]:s[0]}};return["M","D","DDD","d","Q","W"].forEach(function(n){e[n+"o"]=function(e,t){return function(e){var t=e%100;if(20<t||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(t[n](e))}}),{formatters:e,formattingTokensRegExp:l(e)}}},function(e,t){var r=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var i=r.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(e,t){var r="Full",a="Normal",o="Quoted",c="Grid";function s(e){var t="shortcode-"+String(Math.random()).substr(2);return e.attr("id",t),function(){return $("#"+t)}}function l(e,n){0<e.length?function(e){return jQuery.when.apply(jQuery,e).then(function(){return Array.prototype.slice.call(arguments,0)})}(e.filter(function(e){return e}).map(function(t){var n=$.Deferred();return $.get("/rest-api/v1/things/"+t+"?sales=true&include_every_image=true").then(function(e){n.resolve(e)}).fail(function(e){404===e.status?alertify.alert("Product id "+t+"not found."):console.warn("There was an error whiel fetching sid:",t,e),n.resolve(null)}),n.promise()})).done(function(e){var t={items:e.map(function(e){var t=!1,n=e.image.src;try{t=e.sales.images[0].fit_to_bounds,n=e.sales.images[0].src}catch(e){}return e.sales&&{title:e.sales.emojified_name,price:e.sales.price,retail_price:e.sales.retail_price,image:n,image_fit_to_bounds:t,id:e.sales.id}}).filter(function(e){return e})};n(t)}):console.warn("[ShortCodeTransformers]: Error - product does not exist")}var u={};u["fancy-article-gallery"]=function(e,t){var n=e.images,i=e.title,r=e.tagline,a="";a+='<div class="gallery">',a+='<h3><span><%= title %></span><small class="tagline"><span><%= tagline %></span></small></h3>',a+='<ul class="photo-list">',a+="<% _.each(images, function(image, idx) { %>",a+="<li class=\"<%= idx === 0 ? 'active' : '' %>\"><a href=\"<%= image.link %>\" <%= image.link ? \"rel='noopener' target='_blank' class='linked'\" : \"onclick='return false;'\" %>><img src=\"<%= image.src %>\"></a><span><%= image.caption %></span></li>",a+="<% }) %>",a+="</ul>",a+='<div class="paging">',window.isWhitelabelV2&&(a+='<div class="btn"><a class="prev"></a><a class="next"></a></div>'),a+="<% _.each(images, function(e, idx) { %> ",a+="<a href=\"#\" class=\"<%= idx === 0 ? 'current' : '' %> pager\"><%= idx + 1 %></a>",a+="<% }) %>",a+="</div>",a+="</div>";var o=$(_.template(a)({images:n,title:i,tagline:r}));window.isWhitelabelV2&&(o.find("img").wrap('<span class="figure" />'),o=$('<div class="gallery-container" />').append(o)),t.replaceWith(o.prop("outerHTML"))},u["fancy-article-img"]=function(e,t){var n=e.images,i=n.reduce(function(e,t){return e+_.template(function(e){switch(e){case c:return'<div class="grid"><img src="/_ui/images/common/blank.gif"  alt="<%= image.caption %>" class="" style="background-image:url(\'<%= image.src %>\');" data-src="<%= image.src %>"><% if (image.caption) { %><figcaption class="text-placeholder"><%= image.caption %></figcaption><% } %></div>';case r:return'<figure class="mode-full"><img src="<%= image.src %>" alt="<%= image.caption %>"></figure>';case o:return'<figure class="mode-quoted"><p><img src="<%= image.src %>" alt="<%= image.caption %>"></p><p class="textarea"><%= image.caption %></p></figure>';case a:default:return'<figure class="mode-normal"><img src="<%= image.src %>" alt="<%= image.caption %>"></figure>'}}(t.mode))({image:t})},"");n[0]&&n[0].mode===c&&(i='<figure class="mode-grid">'+i+"</figure>"),t.replaceWith(i)},u["fancy-article-product"]=function(e,t){var n=e.products,i=s(t);l(n,function(e){var t=_.template('<ul class="itemList product"><% items.forEach(function(item) { %><li class="itemListElement" data-id="<%= item.id %>"><a href="<%= item.html_url %>?utm=article"><span class="figure <% if (item.image_fit_to_bounds) { %>fit<% } %>"><img src="/_ui/images/common/blank.gif" style="background-image:url(<%= item.image %>)"></span><span class="figcaption"><span class="title"><%= item.title %></span><% if (item.retail_price != null) { %><b class="price sales">$<%= item.price %> <small class="before">$<%= item.retail_price %></small></b><% } else { %><b class="price">$<%= item.price %></b><% } %></span></li><% }); %></ul>')(e);i().replaceWith(t)})},u["fancy-article-product-slideshow"]=function(e,t){var n=e.products,i=s(t);l(n,function(e){var t=_.template('<div class="itemSlide product"><div class="itemSlideWrap"><ul class="stream after"><% items.forEach(function(item) { %><li class="itemSlideElement"><div class="figure-item"><figure <% if (item.image_fit_to_bounds) { %>class="fit"<% } %>><a href="<% if (item.html_url) { %><%= item.html_url %><% } else { %>/sales/<%= item.id %>?utm=article<% } %>?utm=article"><span class="back"></span><img class="figure" src="/_ui/images/common/blank.gif"style="background-image: url(<%= item.image %>);"></a></figure><figcaption><span class="show_cart"><button class="btn-cart nopopup soldout"><% if (item.retail_price != null) { %><b class="price sales">$<%= item.price %> <small class="before">$<%= item.retail_price %></small></b><% } else { %><b class="price">$<%= item.price %></b><% } %></button></span><a href="<%= item.html_url %>?utm=article" class="title"><%= item.title %></a></figcaption></div></li><% }); %></ul></div><a href="#" class="prev">Prev</a><a href="#" class="next">Next</a></div>')(e);i().replaceWith(t)})},window.convertArticleShortcode=function(e){var t=function(e){return $('<div class="singlenode-wrapper">'+e+"</div>")}(e),n=function(e){var t=$(document.body).find(".disposable");return t=0<t.length?t.eq(0).empty():$("<div />",{id:"disposable",style:"display:none;"}).appendTo(document.body),e&&t.append(e),t}(t);return t.find("p.shortcode").each(function(e,t){var n=$(t);try{var i=JSON.parse(n.attr("data-internal"));u[i.name](i,n)}catch(e){console.warn(e)}}),n.remove(),t.html()}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(7),a=n(5),o=n(9);Object(i.getFancyDepsRoot)().Shared={getStore:function(){return r.a.getState()},cache:a.b,transition:o.c}},function(e,t,n){"use strict";n.r(t);var i=n(0),m=n.n(i),r=n(18),a=n(20),o=n.n(a),c=n(21),s=n(1),f=n(3),l=n(14),u=n(7),d=n(4);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,v(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i["Component"]),function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(t,[{key:"handleCloseArticle",value:function(e){e.preventDefault(),e.stopPropagation(),u.a.dispatch(Object(l.a)())}},{key:"render",value:function(){return m.a.createElement("div",{className:"popup article ".concat(window.isWhitelabel?"whitelabel-article":""," ").concat(window.isWhitelabelV2?"whitelabel-article-v2":""),id:"article-container"},this.props.children,m.a.createElement("a",{href:"#",className:"ly-close",onClick:this.handleCloseArticle},"Close"))}}]),t}(),w=n(12),S=n(11),E=n(26),O=n.n(E),C=n(27),T=n.n(C),x=n(10),A=n.n(x),I=n(8),D=n(2),k=n(5),j=n(16);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){var t=$(e.currentTarget).find("em");t.css("margin-left","".concat(-t.width()/2-10,"px"))}function W(e){var t=e.user,n=void 0===t?{}:t,i=e.display,r=e.isViewer;return m.a.createElement("a",{href:n.html_url,className:A()("user",{_viewer:r}),onMouseOver:H,style:i},m.a.createElement("img",{src:"/_ui/images/common/blank.gif",style:{backgroundImage:"url(".concat(n.image_url||n.profile_image_url,")")}}),m.a.createElement("em",null,n.fullname||n.full_name))}var Y=[0,-54,-108,-163,-218,-272,-327,-436,-490,-545,-599,-654,-708,-763,-817,-872,-926,-981,-1035,-1144,-1199,-1253,-1308,-1417,-1471];function V(e,t){return null!=e&&null!=t&&e.id===t.id}function q(e){return e?D.a.Addition:D.a.Removal}function G(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=e.fancyd,r=e.save_count,a=e.loading,o=!i,c=function(e,t){return!0===e?t+1:t-1}(o,r);a||(n({fancyd:o,loading:!0,fancyStatus:q(o)}),$.ajax({type:"POST",url:"/articles/save.json",data:{article_id:t.id,action:o?"save":"unsave"}}).done(function(e){e.article_id&&e.saved===!i?(k.b.update(t.slug,void 0,"saved",o),k.b.update(t.slug,void 0,"save_count",c),Object(j.a)(t.slug,o,Object(s.getConciseNumberString)(c)),n({loading:!1,fancyd:o,save_count:c,fancyStatus:function(e){return e?D.a.AfterAddition:D.a.AfterRemoval}(o)})):n({loading:!1,fancyd:i,save_count:r,fancyStatus:q(i)})}).fail(function(){n({loading:!1,fancyd:i,save_count:r,fancyStatus:q(i)})}))}var z=m.a.createElement("i",null),X=m.a.createElement("span",{className:"_fancyd"}),B=function(e){function t(e){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(M(u=function(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?M(e):t}(this,N(t).call(this,e))),"getFancydCountString",function(){var e=u.state.save_count;return null!=e?Object(s.getConciseNumberString)(e,0):"0"}),U(M(u),"animateFancyBG",function(e){if(void 0===e)u.animateFancyBG(0);else if(e<Y.length){var t=Y[e];$(u.fancyBGAnimation).css("background-position-x","".concat(t,"px")),setTimeout(function(){u.animateFancyBG(e+1)},10)}else Y.length<=e&&u.setState({fancyAnimation:!1})}),U(M(u),"getFancyduserDisplay",function(e,t,n){var i,r=u.props.appContext.viewer,a=u.state,o=a.fancyd,c=a.fancyStatus,s=0===t,l=t===n-1;c===D.a.AfterAddition||c===D.a.Addition?n<=8?i=I.Display.Inline:s&&(i=I.Display.Inline):c!==D.a.AfterRemoval&&c!==D.a.Removal||(s?i=I.Display.None:l&&(i=I.Display.Inline));return(c===D.a.AfterAddition||c===D.a.Addition||o&&c===D.a.Idle)&&8<t?i=I.Display.None:c===D.a.Removal&&8<=t&&(i=I.Display.None),c===D.a.Idle&&!o&&V(e,r)&&(i=I.Display.None),i}),U(M(u),"toggleFancy",function(){G(u.props.article,u.state,function(e){u.setState(e)})}),U(M(u),"handleFancydStateOnLoadArticle",function(e){null==e&&(e=u.props.article),function(e,t){var n=t.fancyd,i=t.save_count,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return e};Object(j.a)(e,n,Object(s.getConciseNumberString)(i)),r({fancyd:n,save_count:i,loading:!1,fancyStatus:D.a.Idle})}(e.slug,{fancyd:e.saved,save_count:e.save_count},function(e){u.setState(e)})}),U(M(u),"handleFancyClick",function(e){e.preventDefault(),e.stopPropagation();var t=u.props.article;if(u.props.appContext.loggedIn){var n=u.state,i=n.fancyAnimation,r=n.fancyd;n.loading||(r||i||u.setState({fancyAnimation:!0},function(e){u.animateFancyBG()}),r?Object(s.MP)("Unfancy",{article_id:t.id}):Object(s.MP)("Fancy",{article_id:t.id}),u.toggleFancy())}else window.require_login&&window.require_login(null,"fancy_article",t.id)}),u.state=u._getInitialState(),u.fancyBGAnimationRef=function(e){u.fancyBGAnimation=e},u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,i["Component"]),R(t,[{key:"_getInitialState",value:function(){return{fancyAnimation:!1,fancyd:null,loading:!1,save_count:null,fancyStatus:D.a.Idle}}}]),R(t,[{key:"componentDidMount",value:function(){this.handleFancydStateOnLoadArticle()}},{key:"componentDidUpdate",value:function(e){var t=e.article,n=this.props;t.id===n.article.id&&t.isCrawled===n.article.isCrawled||this.handleFancydStateOnLoadArticle(t)}},{key:"render",value:function(){var e,i=this,t=this.props,n=t.appContext,r=n.loggedIn,a=n.viewer,o=t.article,c=o.saved_users,s=o.user,l=this.state,u=l.fancyd,f=l.fancyAnimation,d=l.fancyStatus,p=[r&&a,r&&!V(a,s)&&s].concat(c&&c.filter(function(e){return!V(e,s)&&!V(e,a)})).filter(function(e){return e});d===D.a.Addition?e="add":d===D.a.Removal&&(e="remove");var h=p.length<=2?"_insuff":"_suff";return m.a.createElement("div",{className:"like"},m.a.createElement("span",{className:"count"},m.a.createElement("a",{onClick:this.handleFancyClick,className:A()("button button-static fancy _count",{fancyd:u,loading:f})},m.a.createElement("span",{ref:this.fancyBGAnimationRef},z),this.getFancydCountString()),X),m.a.createElement("span",{className:A()("fancyd_user",e,h)},p.map(function(e,t){var n=V(e,a);return m.a.createElement(W,{key:t,user:e,display:i.getFancyduserDisplay(e,t,p.length),isViewer:n})})))}}]),t}(),Q=n(19);n(46);function Z(){$(function(){function t(e,t){var l;(l=e.is(".itemSlide, .slideshow")?e:e.find(".itemSlide, .slideshow")).data("slideInit",!0);var u=e.find("ul"),n=u.find("li"),i=n.width()+20,r=(parseInt(u.css("padding-left")),e.find("a.prev")),a=e.find("a.next"),f=null;function o(e){!function(){var e=u.find("li"),t=Math.abs(parseInt(u.css("left"))),n=l.width(),i=e.width()+20;f&&(n=f);if(t<n){for(var r=Math.ceil(Math.abs(n-t)/i),a=0;a<r;a++){var o=u.find("li:not([_prev])").last();o.clone().insertBefore(u.find("li").first()),o.attr("_prev",!0)}u.css("left",0-t-r*i+"px")}}();var t=Math.abs(parseInt(u.css("left"))),n=l.width();return f&&(n=f),t-n}function c(e){!function(){var e=u.find("li"),t=Math.abs(parseInt(u.css("left"))),n=l.width(),i=e.length*(e.width()+20),r=e.width()+20,a=i-(t+n);f&&(n=f);if(a-n<n)for(var o=Math.ceil(Math.abs(n-(i-(t+n)))/r),c=0;c<o;c++){var s=u.find("li:not([_next])").first();s.clone().insertAfter(u.find("li").last()),s.attr("_next",!0)}}();var t=Math.abs(parseInt(u.css("left"))),n=l.width();return f&&(n=f),t+n}function s(){var e=u.find("li"),t=Math.abs(parseInt(u.css("left"))),n=e.width()+20,i=u.find("li[_next]:not(:in-viewport)"),r=i.length;u.find("li[_prev]:not(:in-viewport)").remove(),i.remove(),u.css("left",0-t+r*n+"px")}t.itemPerSlide&&(f=i*t.itemPerSlide),l&&n&&(f&&f>i*n.length||($(window).width()<920?(t.center&&l.find(".itemList").scrollLeft((147*n.length-$(window).width()+20)/2),r.removeClass("disabled"),a.removeClass("disabled")):l.width()>i*n.length?(r.addClass("disabled"),a.addClass("disabled"),t.center&&l.find(".itemList").css("left","0px")):(t.center&&l.find(".itemList").css("left",-parseInt((285*n.length-$(window).width()+20)/2)+"px"),r.removeClass("disabled"),a.removeClass("disabled")))),e.css("visibility","visible"),f&&f>i*n.length&&(r.hide(),a.hide()),e.on("click","a.prev",function(e){e.preventDefault();var t=$(this);if(!t.hasClass("_disabled")){var n=o();t.addClass("_disabled"),u.animate({left:0-n+"px"},300,"easeInOutExpo",function(){s(),t.removeClass("_disabled")})}}).on("click","a.next",function(e){e.preventDefault();var t=$(this);if(!t.hasClass("_disabled")){var n=c();t.addClass("_disabled"),u.animate({left:0-n+"px"},300,"easeInOutExpo",function(){s(),t.removeClass("_disabled")})}})}$.fn.productSlide=function(e){e=e||{center:!0};return this.each(function(){t($(this),e)})}})}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ie(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),e}function re(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=m.a.createElement("div",null),ue=m.a.createElement("div",null),fe=function(e){function t(){return te(this,t),re(this,oe(t).apply(this,arguments))}return ce(t,i["Component"]),ie(t,[{key:"componentDidMount",value:function(){var r;w.a.get().scrollTop(0),Z(),(r=window.jQuery||window.Zepto).fn.fitVids=function(e){var n={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("div");i.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(i.childNodes[1])}return e&&r.extend(n,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];n.customSelector&&e.push(n.customSelector);var i=".fitvidsignore";n.ignore&&(i=i+", "+n.ignore);var t=r(this).find(e.join(","));(t=(t=t.not("object object")).not(i)).each(function(){var e=r(this);if(!(0<e.parents(i).length||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var t=("object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height())/(isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10));if(!e.attr("name")){var n="fitvid"+r.fn.fitVids._count;e.attr("name",n),r.fn.fitVids._count++}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*t+"%"),e.removeAttr("height").removeAttr("width")}})})},r.fn.fitVids._count=0,$(".media-youtube").fitVids()}},{key:"componentDidUpdate",value:function(e){var t=e.article,n=this.props.article;null!=n&&(t&&t.id===n.id||(Object(s.isStaticArticlePage)()||$("#overlay-article > .popup").attr("tabindex",-1).focus(),w.a.get().scrollTop(0)),this.props.appContext.viewer.is_admin_senior?$("body").addClass("admin"):$("body").removeClass("admin"))}},{key:"render",value:function(){var e=this.props,t=e.article,n=e.appContext.viewer,i=null;if(d.a.locationIsArticlePage)if(null!=t){0<S.a.wrapperLeftOffset&&"".concat(S.a.wrapperLeftOffset,"px"),i=m.a.createElement("div",null,n.is_admin_senior&&m.a.createElement(Q.a,this.props),m.a.createElement(pe,this.props),m.a.createElement("div",{className:"container"},m.a.createElement(Q.c,ee({},this.props,{hasPagination:window.isWhitelabel})),m.a.createElement(Q.b,this.props)))}else i=le;else i=ue;return i}}]),t}(),de=Object(c.connect)(function(e){var t=e.appContext,n=e.article,i=n.data,r=n.isFetching,a=n.status;return i&&i.content&&window.convertArticleShortcode&&(i.content=window.convertArticleShortcode(i.content)),{appContext:t,status:a,article:i,isFetching:r}})(fe),pe=function(e){function t(e){var n;return te(this,t),K(ae(n=re(this,oe(t).call(this,e))),"state",{lightboxImages:[],lightboxOpen:!1}),K(ae(n),"handleGalleryClick",function(e){var t=$(e.target);if(window.isWhitelabelV2){if(t.is(".gallery .paging a")){e.preventDefault();var n,i=t.closest(".gallery"),r=i.find(".paging"),a=i.find(".paging a.pager").length,o=$(".gallery").index(t.closest(".gallery")),c=".gallery:eq(".concat(o,") .paging a.pager"),s=0;t.is(".btn .prev")?(n=i.find(".paging a.pager.current").index(c),s=-1):t.is(".btn .next")?(n=i.find(".paging a.pager.current").index(c),s=1):n=t.index(c),(n+=s)<0?n=a-1:a-1<=n&&(n=0),r.find("a.current").removeClass("current").end().find("a.pager:eq(".concat(n,")")).addClass("current"),i.find("li.active").removeClass("active").end().find("li:eq(".concat(n,")")).addClass("active")}}else if(t.is(".gallery .paging a, .gallery li *")){t.is(":not(.gallery li a.linked, .gallery li a.linked *)")&&e.preventDefault(),t.is(".gallery li *")&&(t=t.closest("li"));var l=t.closest(".gallery"),u=l.find(".paging"),f=t.index();u.find("a.current").removeClass("current").end().find("a:eq("+f+")").addClass("current"),l.find("li.active").removeClass("active").end().find("li:eq("+f+")").addClass("active");var d=0;d=0==f?0:f==l.find("li").length-1?l.width()-l.find(".photo-list").width():(l.width()-l.find("li:eq("+f+")").width())/2-l.find("li:eq("+f+")").position().left,l.find(".photo-list").css("left",d+"px")}}),K(ae(n),"prepareProductSlide",function(e,t){var n=t.closest(".product");n.data("slideInit")?e.preventDefault():(n.productSlide({itemPerSlide:4,center:!0}),setTimeout(function(){t.click()},500))}),K(ae(n),"handleContentClick",function(e){var t=$(e.target);t.is(".gallery *")?n.handleGalleryClick(e):t.is(".description .grid")?n.prepareLightboxOpen():t.is(".itemSlide .prev, .itemSlide .next")&&n.prepareProductSlide(e,t)}),K(ae(n),"handleClickPrev",function(){n.setState({lightboxCurrentImage:Math.max(n.state.lightboxCurrentImage-1,0)})}),K(ae(n),"handleClickNext",function(){n.setState({lightboxCurrentImage:Math.min(n.state.lightboxCurrentImage+1,n.state.lightboxImages.length-1)})}),K(ae(n),"handleClose",function(){n.setState({lightboxOpen:!1})}),K(ae(n),"handleClickThumbnail",function(e){n.setState({lightboxCurrentImage:e})}),0===$("#article-fonts").length&&($(document.head).append('<link rel="stylesheet" id="article-fonts" href="//fonts.googleapis.com/css?family=Merriweather:300,300i,400,400i,700,700i,900,900i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i|Merriweather+Sans:300,300i,400,400i,700,700i,800,800i" type="text/css" />'),$("body").is(".static-article")&&$("#container-wrapper #scroll-to-top").hide()),n}return ce(t,i["Component"]),ie(t,[{key:"componentDidMount",value:function(){Object(Q.d)(o.a.findDOMNode(this)),window.isWhitelabelV2&&setTimeout(function(){$(".itemSlide.product").productSlide({itemPerSlide:4,center:!0})},2500)}},{key:"prepareLightboxOpen",value:function(){this.setState({lightboxOpen:!0,lightboxCurrentImage:0,lightboxImages:$(".grid img").toArray().map(function(e){return{src:$(e).data("src")}})})}},{key:"render",value:function(){var e,t,n=this.props,i=n.appContext,r=i.lastFullyRenderedArticleID,a=i.viewer,o=i.loggedIn,c=n.article;if(f.Video.isVideoAvailableForArticle(c)){var s={object:c,display:!0,autoplay:c.cover_video.autoplay||!1,lastFullyRenderedObjectID:r,muted:!1};"floating-article-video"in location.args?(e=m.a.createElement(me,{videoProps:s}),t=m.a.createElement(ve,{videoProps:s})):e=m.a.createElement(f.Video,s)}var l=m.a.createElement("div",{className:"inner-wrapper"},m.a.createElement("div",{id:"coverImage",className:"cover image purple"},e,!e&&m.a.createElement("div",{className:"image"},m.a.createElement("img",{id:"coverImg",src:c.cover_image?c.cover_image.url:""})))),u=c.options&&c.options.authors&&m.a.createElement("div",{className:"author",dangerouslySetInnerHTML:{__html:c.options.authors}});return m.a.createElement("div",{id:"summary",className:"wrapper article-wrapper"},!window.isWhitelabelV2&&l,t,m.a.createElement("div",{className:"info"},m.a.createElement("div",{className:"title"},m.a.createElement("h1",null,c.title)," ",m.a.createElement("small",null,c.tagline)),window.isWhitelabelV2&&u,window.isWhitelabelV2&&c.date_created&&m.a.createElement("div",{className:"date text-placeholder"},O()(c.date_created||new Date,"MMMM DD, YYYY")),window.isWhitelabel?null:m.a.createElement(B,this.props),m.a.createElement("div",{className:"interaction"},m.a.createElement(f.MoreShare,{objectType:"article",objectId:c.id,loggedIn:o,title:c.title,viewerUsername:a.username,showShortcuts:!0,fromThingSidebar:!0,headerUpdate:!0}),c.options&&c.options.action_button&&_.isString(c.options.action_button.text)&&c.options.action_button.text.trim()&&m.a.createElement("a",{href:"".concat(c.options.action_button.link),className:"btn-shop"},c.options.action_button.text),window.isWhitelabel?m.a.createElement(B,this.props):null)),window.isWhitelabelV2&&l,m.a.createElement("div",{className:"description more"},!window.isWhitelabelV2&&u,m.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.content},onClick:this.handleContentClick})),m.a.createElement(T.a,{images:this.state.lightboxImages,isOpen:this.state.lightboxOpen,preventScroll:!0,showThumbnails:!0,currentImage:this.state.lightboxCurrentImage,onClickPrev:this.handleClickPrev,onClickNext:this.handleClickNext,onClose:this.handleClose,onClickThumbnail:this.handleClickThumbnail}))}}]),t}(),he=new(function(){function e(){var i=this;te(this,e),K(this,"active",!1),K(this,"calculateStyle",function(){var e=$(window).scrollTop(),t=$("#coverImage .video_player"),n=.4*t.height()+t.offset().top;Object(s.isStaticArticlePage)()?n-=($(".admin-header").height()||0)+$("#navigation").height():n-=$(".admin-header").height()||0,e<n?i.state.showFloatingVideo&&i.emit({showFloatingVideo:!1}):!i.state.showFloatingVideo&&i.eitherOneIsPlaying()&&i.emit({showFloatingVideo:!0})}),K(this,"components",{}),K(this,"state",{})}return ie(e,[{key:"initFloatingVideo",value:function(){var n=this;Object(s.isStaticArticlePage)()&&$(document.body).on("featuredHeaderExpansion.pipvideo",function(e){var t=e.headerExpanded;n.setStateAll({headerExpanded:t})}),w.a.get().on("resize.pipvideo",this.calculateStyle).on("scroll.pipvideo",this.calculateStyle).trigger("resize.pipvideo")}},{key:"destruct",value:function(){w.a.get().off("resize.pipvideo").off("scroll.pipvideo"),$(document.body).off("featuredHeaderExpansion.pipvideo")}},{key:"connect",value:function(e,t){this.active||this.initFloatingVideo(),(this.components[e]=t).setState({headerExpanded:Object(s.isStaticArticlePage)(),showFloatingVideo:!1})}},{key:"disconnect",value:function(e){this.components[e]=null}},{key:"setStateAll",value:function(t){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;_.each(t,function(e,t){n.state[t]=e}),_.each(this.components,function(e){e.setState(t,i)})}},{key:"sendState",value:function(e,t){this.components[e]&&this.components[e].setState(t)}},{key:"eitherOneIsPlaying",value:function(){var e=this.components,t=e.Host,n=e.Slave;return t.playing||n.Playing}},{key:"emit",value:function(e){if("showFloatingVideo"in e){var t=this.components,n=t.Host,i=t.Slave;e.showFloatingVideo?(this.sendState("Host",{forcePlayState:!1}),this.sendState("Slave",{forcePlayState:!(!n||!n.playing),forceTime:n&&n.currentTime||null})):(this.sendState("Host",{forcePlayState:!(!i||!i.playing),forceTime:!(!i||!i.currentTime)}),this.sendState("Slave",{forcePlayState:!1}))}this.setStateAll(e)}}]),e}()),me=function(e){function a(){var e,i;te(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return K(ae(i=re(this,(e=oe(a)).call.apply(e,[this].concat(n)))),"state",{showFloatingVideo:null,forceTime:null,forcePlayState:null}),K(ae(i),"handleVideoStateUpdate",function(e){var t=e.currentTime,n=e.playing;null!=t&&(i.currentTime=t),null!=n&&(i.playing=n)}),i}return ce(a,i["Component"]),ie(a,[{key:"componentDidMount",value:function(){he.connect("Host",this)}},{key:"componentWillUnmount",value:function(){he.disconnect("Host")}},{key:"render",value:function(){var e=this.state,t=e.showFloatingVideo,n=e.forceTime,i=e.forcePlayState;return m.a.createElement(f.Video,ee({},this.props.videoProps,{onVideoStateUpdate:this.handleVideoStateUpdate,forceTime:n,forcePlayState:i,meta:"Host",className:t?"floating":"",restrict:{play:t}}))}}]),a}(),ge=m.a.createElement("div",{className:"handover-extempt"}),ve=function(e){function a(){var e,i;te(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return K(ae(i=re(this,(e=oe(a)).call.apply(e,[this].concat(n)))),"state",{showFloatingVideo:null,forceTime:null,forcePlayState:null,top:114,right:30}),K(ae(i),"handleVideoStateUpdate",function(e){var t=e.currentTime,n=e.playing;null!=t&&(i.currentTime=t),null!=n&&(i.playing=n)}),K(ae(i),"handleMouseDown",function(e){console.log("handleMouseDown",e),i.md=!0}),K(ae(i),"handleMouseMove",function(e){i.md&&console.log(e)}),K(ae(i),"handleMouseUp",function(e){console.log("handleMouseUp",e),i.md=!1}),i}return ce(a,i["Component"]),ie(a,[{key:"componentDidMount",value:function(){he.connect("Slave",this)}},{key:"componentWillUnmount",value:function(){he.disconnect("Slave")}},{key:"render",value:function(){var e=this.props.videoProps,t=this.state,n=t.showFloatingVideo,i=t.forceTime,r=t.forcePlayState,a=t.right,o=t.top;return m.a.createElement("div",{className:"video-overlay",style:{opacity:n?1:0,top:"".concat(o,"px"),right:"".concat(a,"px")}},m.a.createElement("div",{className:"handover-layer",onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp},ge),m.a.createElement(f.Video,ee({},e,{onVideoStateUpdate:this.handleVideoStateUpdate,forceTime:i,forcePlayState:r,autoplay:!1,meta:"Slave",restrict:{play:!n}})))}}]),a}(),ye=m.a.createElement(r.Route,{path:"/articles/*",component:de}),be=!1,we=setInterval(function(){be||window.$&&"loading"!==document.readyState&&(be=!0,clearInterval(we),function(){n(47),Object(S.b)("wrapperLeftOffset",Object(s.measureWrapperLeftOffset)());var e=Object(s.selectOrCreate)("#overlay-article"),t=$(e);t.hasClass("seo")&&(t.empty(),t.removeClass("seo")),Object(a.render)(m.a.createElement(c.Provider,{store:u.a},m.a.createElement(r.Router,{history:f.history},m.a.createElement(b,null,m.a.createElement(r.Switch,null,ye,m.a.createElement(r.Route,{path:"*",component:function(){return null}}))))),e,function(){f.history.listen(d.b),Object(d.b)({pathname:location.pathname,search:location.search}),Object(w.b)()})}())},250)}]);